const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["../chunks/openseadragon.D4CfHLA_.js","../chunks/maplibre-gl.CdJt4RAd.js","../chunks/runtime.uqDDTF6C.js","../chunks/disclose-version.DTG0FDK3.js","../chunks/store.Bfsq4rHw.js","../chunks/utils.CgRNFham.js","../assets/maplibre-gl.CuCRB34y.css"])))=>i.map(i=>d[i]);
var ua=Object.defineProperty;var fa=(i,t,g)=>t in i?ua(i,t,{enumerable:!0,configurable:!0,writable:!0,value:g}):i[t]=g;var Dt=(i,t,g)=>fa(i,typeof t!="symbol"?t+"":t,g);import{_ as va}from"../chunks/preload-helper.C1FmrZbK.js";import{d as Rt,f as ma,c as Me,a as b,b as at,t as O}from"../chunks/disclose-version.DTG0FDK3.js";import{w as ga,y as At,z as jt,x as _a,B as zt,aD as ha,aM as ya,aL as pa,Y as ka,ag as ba,az as xa,v as N,p as be,o as l,q as o,t as R,s as f,m as xe,aQ as Ca,aR as Ft,aS as U,aT as He,f as x,g as a,aU as Z,C as I,aV as wa,aW as qt,h as it,J as La,n as Oa}from"../chunks/runtime.uqDDTF6C.js";import{a as C,s as Ze,p as Te,b as se,q as Ma}from"../chunks/store.Bfsq4rHw.js";import{l as Ea,s as Sa,i as B,p as u,b as Vt,a as Pa}from"../chunks/props.DzlgSq2p.js";import{a as st,s as ie,d as Ta,f as Ia,e as Ge,i as Ye}from"../chunks/attributes.DNu24IUl.js";import{c as pt,a as Ke,o as Gt}from"../chunks/index-client.BvFfPfCE.js";import{w as Oe,r as ht,b as Da}from"../chunks/paths.DWWS8mil.js";import{m as fe,s as Ra,t as Aa,I as ja}from"../chunks/maplibre-gl.CdJt4RAd.js";import{I as za,d as yt,i as Ba,m as Bt,E as ue,p as Ua}from"../chunks/Icon.BOF7NyOo.js";import"../chunks/legacy.o-EImAlt.js";import{i as Ne}from"../chunks/lifecycle.COUmibOa.js";function tt(i,t,g,e,r){var n=i,k="",d;ga(()=>{if(k===(k=t()??"")){At&&jt();return}d!==void 0&&(xa(d),d=void 0),k!==""&&(d=_a(()=>{if(At){zt.data;for(var s=jt(),_=s;s!==null&&(s.nodeType!==8||s.data!=="");)_=s,s=ha(s);if(s===null)throw ya(),pa;Rt(zt,_),n=ka(s);return}var M=k+"",w=ma(M);Rt(ba(w),w.lastChild),n.before(w)}))})}function Ha(i,t){const g=Ea(t,["children","$$slots","$$events","$$legacy"]);za(i,Sa({name:"external-link"},()=>g,{iconNode:[["path",{d:"M15 3h6v6"}],["path",{d:"M10 14 21 3"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"}]],children:(r,n)=>{var k=Me(),d=N(k);st(d,t,"default",{},null),b(r,k)},$$slots:{default:!0}}))}var Za=O("<!><!>",1),Na=O("<span> </span>"),Wa=O("<span> </span>"),Fa=O("at <a> </a>",1),qa=O("at <span> </span>",1),Va=O("<a>Zotero</a>"),Ga=O("<a>FAIR</a>"),Ya=O("<!> <!> <!> <!>",1);function Ja(i,t){be(t,!0);var g=Ya(),e=N(g);B(e,()=>t.entry.citation,d=>{var s=Za(),_=N(s);tt(_,()=>t.entry.citation);var M=f(_);B(M,()=>t.entry.citedRange,w=>{var S=at(",");b(w,S)},w=>{var S=at(".");b(w,S)}),b(d,s)},d=>{var s=Me(),_=N(s);B(_,()=>t.entry.type==="bulletin"||t.entry.type==="corpus",M=>{var w=Na(),S=l(w);o(w),R(()=>C(S,`${t.entry.n??""} ${(t.entry.author?`${t.entry.author} (${t.entry.date})`:"")??""}`)),b(M,w)},M=>{var w=Wa(),S=l(w);o(w),R(()=>C(S,`${t.entry.author??""} (${t.entry.date??""})`)),b(M,w)},!0),b(d,s)});var r=f(e,2);B(r,()=>{var d;return typeof t.entry.citedRange=="object"&&((d=t.entry.citedRange)==null?void 0:d.ref)},d=>{var s=Fa(),_=f(N(s)),M=l(_,!0);o(_),R(()=>{ie(_,"href",t.entry.citedRange.ref.target),C(M,t.entry.citedRange.ref._)}),b(d,s)},d=>{var s=Me(),_=N(s);B(_,()=>t.entry.citedRange,M=>{var w=qa(),S=f(N(w)),W=l(S,!0);o(S),R(()=>C(W,t.entry.citedRange)),b(M,w)},null,!0),b(d,s)});var n=f(r,2);B(n,()=>{var d;return(d=t.entry.ptr)==null?void 0:d.target},d=>{var s=Va();R(()=>{var _;return ie(s,"href",(_=t.entry.ptr)==null?void 0:_.target)}),b(d,s)});var k=f(n,2);B(k,()=>{var d;return(d=t.entry.ref)==null?void 0:d.target},d=>{var s=Ga();R(()=>ie(s,"href",t.entry.ref.target)),b(d,s)}),b(i,g),xe()}const kt=Symbol.for("svelte-maplibre");function Qe(){return Ca(kt)}function Ka(i){let t=new WeakMap;return g=>{var k;let e=t.get(g.originalEvent);if(e!==void 0)return e;let n=(k=g.target.queryRenderedFeatures(g.point).find(d=>{var s;return(s=i.get(d.layer.id))==null?void 0:s.interactive}))==null?void 0:k.layer.id;return t.set(g.originalEvent,n),n}}function Qa(){let i=new Map;return Ft(kt,{map:Oe(null),source:ht(null),layer:ht(null),popupTarget:ht(null),cluster:Oe(),loadedImages:Oe(new Set),minzoom:Oe(0),maxzoom:Oe(24),layerEvent:Oe(null),layerInfo:i,eventTopMost:Ka(i),markerClickManager:new tr})}function Ut(i){return{subscribe:i.subscribe}}function Xa({key:i,setPopupTarget:t=!1,setCluster:g=!1,setMouseEvent:e=!1}){let r=Qe(),n=Oe(null),k=Ut(n),d={...r,[i]:Ut(n)};if(t&&(d.popupTarget=k),e){let s=Oe(null);d.layerEvent=s,r.layerEvent=s}return g&&(d.cluster=Oe()),Ft(kt,d),{...r,self:n}}function $a(){return Xa({key:"popupTarget",setPopupTarget:!0,setMouseEvent:!0})}function er(i){return"layerType"in i&&i.layerType==="deckgl"}class tr{constructor(){Dt(this,"_handlers",new Set)}add(t){this._handlers.add(t)}remove(t){this._handlers.delete(t)}handleClick(t){for(const g of this._handlers)g(t)}}var Yt=ar;function ar(i){var t,g,e;if(i){if(Array.isArray(i)){for(t=[],g=i.length,e=0;e<g;e++){var r=i[e];r!=null&&t.push(r)}return t}if(typeof i=="object"){t={};var n=Object.keys(i);for(g=n.length,e=0;e<g;e++){var k=n[e],d=i[k];d!=null&&(t[k]=d)}return t}}}function Ht(i,t){be(t,!1);const g=Ze(),e=()=>se(J,"$marker",g),r=()=>se(D,"$map",g);let n=u(t,"marker",12,void 0),k=u(t,"lngLat",12),d=u(t,"class",8,void 0),s=u(t,"draggable",8,!1),_=u(t,"feature",8,null),M=u(t,"offset",8,void 0),w=u(t,"rotation",8,0),S=u(t,"opacity",8,1);const W=pt(),{map:D,layerEvent:G,self:J}=$a(),le=()=>V("dragstart"),Ce=()=>{ve(),V("drag")},ae=()=>{ve(),V("dragend")};Te(J,new fe.Marker(Yt({draggable:s(),rotation:w(),className:d(),offset:M(),opacity:S().toString()})).setLngLat(k()).addTo(r())),n(e()),s()&&(e().on("dragstart",le),e().on("drag",Ce),e().on("dragend",ae)),Ke(()=>{var E;n(void 0),(E=e())==null||E.remove()});function ve(){var re;let E=(re=e())==null?void 0:re.getLngLat();E&&(Array.isArray(k())?k([E.lng,E.lat]):k()&&"lon"in k()?k({lon:E.lng,lat:E.lat}):k(E))}function V(E){var Ee,de;let re=(Ee=e())==null?void 0:Ee.getLngLat();if(!re)return;const we=[re.lng,re.lat];let ne={map:r(),marker:e(),lngLat:we,features:[{type:"Feature",properties:((de=_())==null?void 0:de.properties)??{},geometry:{type:"Point",coordinates:we}}]};Te(G,{...ne,layerType:"marker",type:E}),W(E,ne)}U(()=>(e(),x(k())),()=>{var E;(E=e())==null||E.setLngLat(k())}),U(()=>(e(),x(M())),()=>{var E;(E=e())==null||E.setOffset(M()??[0,0])}),U(()=>(e(),x(w())),()=>{var E;(E=e())==null||E.setRotation(w())}),U(()=>(e(),x(S())),()=>{var E;(E=e())==null||E.setOpacity(S().toString())}),He(),Ne();var me=Me(),j=N(me);st(j,t,"default",{get marker(){return e()}},null),b(i,me),xe()}function rr(i,t){be(t,!1);const g=Ze(),e=()=>se(r,"$map",g),{map:r}=Qe();let n=u(t,"position",8,"top-left"),k=u(t,"container",8,void 0),d=Z(null);Ke(()=>{var s;(s=e())!=null&&s.loaded()&&a(d)&&e().removeControl(a(d))}),U(()=>(e(),a(d),x(k()),x(n())),()=>{if(e()&&!a(d)){let s;typeof k()=="string"?s=document.querySelector(k())??void 0:s=k(),I(d,new fe.FullscreenControl({container:s})),e().addControl(a(d),n())}}),He(),Ne(),xe()}function nr(i,t){be(t,!1);const g=Ze(),e=()=>se(r,"$map",g),{map:r}=Qe();let n=u(t,"position",8,"top-left"),k=u(t,"positionOptions",8,void 0),d=u(t,"fitBoundsOptions",8,void 0),s=u(t,"trackUserLocation",8,!1),_=u(t,"showAccuracyCircle",8,!0),M=u(t,"showUserLocation",8,!0),w=u(t,"control",12,null);Ke(()=>{var S;(S=e())!=null&&S.loaded()&&w()&&e().removeControl(w())}),U(()=>(e(),x(w()),x(k()),x(d()),x(s()),x(_()),x(M()),x(n())),()=>{e()&&!w()&&(w(new fe.GeolocateControl({positionOptions:k(),fitBoundsOptions:d(),trackUserLocation:s(),showAccuracyCircle:_(),showUserLocation:M()})),e().addControl(w(),n()))}),He(),Ne(),xe()}function or(i){let t=i.getCenter(),g=Math.round(i.getZoom()*100)/100,e=Math.ceil((g*Math.LN2+Math.log(512/360/.5))/Math.LN10),r=Math.pow(10,e),n=Math.round(t.lat*r)/r,k=Math.round(t.lng*r)/r,d=`${g}/${n}/${k}`,s=i.getBearing(),_=i.getPitch();return(s||_)&&(d+=`/${Math.round(s*10)/10}`),_&&(d+=`/${Math.round(_)}`),`#${d}`}function ir(i){return i.replace("#","").split("/").map(parseFloat)}var Je=bt;function bt(i,t){return i===t||i!==i&&t!==t?!0:typeof i!=typeof t||{}.toString.call(i)!={}.toString.call(t)||i!==Object(i)||!i?!1:Array.isArray(i)?Zt(i,t):{}.toString.call(i)=="[object Set]"?Zt(Array.from(i),Array.from(t)):{}.toString.call(i)=="[object Object]"?lr(i,t):sr(i,t)}function sr(i,t){return i.toString()===t.toString()}function Zt(i,t){var g=i.length;if(g!=t.length)return!1;for(var e=0;e<g;e++)if(!bt(i[e],t[e]))return!1;return!0}function lr(i,t){var g=Object.keys(i),e=g.length;if(e!=Object.keys(t).length)return!1;for(var r=0;r<e;r++){var n=g[r];if(!(t.hasOwnProperty(n)&&bt(i[n],t[n])))return!1}return!0}function dr(i,t){be(t,!1);const g=Ze(),e=()=>se(r,"$map",g),{map:r}=Qe();let n=u(t,"position",8,"top-left"),k=u(t,"showCompass",8,!0),d=u(t,"showZoom",8,!0),s=u(t,"visualizePitch",8,!1),_=Z(null);Ke(()=>{var M;(M=e())!=null&&M.loaded()&&a(_)&&e().removeControl(a(_))}),U(()=>(e(),a(_),x(k()),x(d()),x(s()),x(n())),()=>{e()&&!a(_)&&(I(_,new fe.NavigationControl({showCompass:k(),showZoom:d(),visualizePitch:s()})),e().addControl(a(_),n()))}),He(),Ne(),xe()}function cr(i,t){be(t,!1);const g=Ze(),e=()=>se(r,"$map",g),{map:r}=Qe();let n=u(t,"position",8,"bottom-left"),k=u(t,"maxWidth",8,void 0),d=u(t,"unit",8,"metric"),s=Z(null);Ke(()=>{var _;(_=e())!=null&&_.loaded()&&a(s)&&e().removeControl(a(s))}),U(()=>(e(),a(s),x(k()),x(d()),x(n())),()=>{e()&&!a(s)&&(I(s,new fe.ScaleControl({maxWidth:k(),unit:d()})),e().addControl(a(s),n()))}),He(),Ne(),xe()}var ur=O("<!> <!> <!> <!>",1),fr=O("<!> <!>",1),vr=O('<div data-testid="map-container"><!></div>');function Nt(i,t){be(t,!1);const g=Ze(),e=()=>se(X,"$mapInstance",g),r=()=>se(_e,"$loadedImages",g),n=Z(),k=Z();let d=u(t,"map",12,null),s=u(t,"mapContainer",12,void 0),_=u(t,"class",8,void 0),M=u(t,"style",8),w=u(t,"diffStyleUpdates",8,!1),S=u(t,"center",12,void 0),W=u(t,"zoom",12,void 0),D=u(t,"pitch",12,0),G=u(t,"bearing",12,0),J=u(t,"bounds",12,void 0),le=u(t,"hash",8,!1),Ce=u(t,"updateHash",8,h=>{window.history.replaceState(window.history.state,"",h)}),ae=u(t,"loaded",12,!1),ve=u(t,"minZoom",8,0),V=u(t,"maxZoom",8,22),me=u(t,"minPitch",8,0),j=u(t,"maxPitch",8,60),E=u(t,"renderWorldCopies",8,void 0),re=u(t,"dragPan",8,void 0),we=u(t,"dragRotate",8,void 0),ne=u(t,"pitchWithRotate",8,void 0),Ee=u(t,"antialias",8,void 0),de=u(t,"zoomOnDoubleClick",8,!0),We=u(t,"locale",8,void 0),Fe=u(t,"interactive",8,!0),L=u(t,"attributionControl",8,!0),Se=u(t,"cooperativeGestures",8,!1),K=u(t,"preserveDrawingBuffer",8,!1),Ie=u(t,"maxBounds",8,void 0),ge=u(t,"images",24,()=>[]),F=u(t,"standardControls",8,!1),Q=u(t,"filterLayers",8,void 0),De=u(t,"transformRequest",8,void 0);const H=pt(),{map:X,loadedImages:_e}=Qa();let oe=Z(new Set);async function Re(h,m=!1){var P;if(e()&&!(!e().loaded()&&!m))if("url"in h){a(oe).add(h.id);try{let q=await e().loadImage(h.url);(P=e())==null||P.addImage(h.id,q.data,h.options),r().add(h.id),Te(_e,r())}catch(q){H("error",q)}finally{a(oe).delete(h.id)}}else e().addImage(h.id,h.data,h.options),r().add(h.id),Te(_e,r())}let he=Z(void 0),$=Z(void 0),ye=Z(void 0),ee=Z(void 0);function Ae(h){return y(),Te(X,new fe.Map(Yt({container:h,style:M(),locale:We(),center:S(),zoom:W(),pitch:D(),bearing:G(),minZoom:ve(),maxZoom:V(),minPitch:me(),maxPitch:j(),renderWorldCopies:E(),dragPan:re(),dragRotate:we(),pitchWithRotate:ne(),antialias:Ee(),interactive:Fe(),preserveDrawingBuffer:K(),maxBounds:Ie(),bounds:J(),attributionControl:L(),transformRequest:De(),cooperativeGestures:Se()}))),e().on("load",m=>{m.target.getContainer().setAttribute("data-testid","map"),m.target.getCanvas().setAttribute("data-testid","map-canvas"),ae(!0),H("load",e())}),e().on("error",m=>H("error",{...m,map:e()})),e().on("movestart",m=>H("movestart",{...m,map:e()})),e().on("moveend",m=>{if(S(m.target.getCenter()),W(m.target.getZoom()),D(m.target.getPitch()),G(m.target.getBearing()),J(m.target.getBounds()),H("moveend",{...m,map:e()}),le()){let P=new URL(window.location.href.replace(/(#.+)?$/,or(e())));Ce()(P)}}),e().on("click",m=>H("click",{...m,map:e()})),e().on("dblclick",m=>H("dblclick",{...m,map:e()})),e().on("contextmenu",m=>H("contextmenu",{...m,map:e()})),e().on("zoomstart",m=>H("zoomstart",{...m,map:e()})),e().on("zoom",m=>{H("zoom",{...m,map:e()})}),e().on("zoomend",m=>{H("zoomend",{...m,map:e()})}),e().on("style.load",()=>{if(e()){const m=e().getStyle();if(I(he,m.layers.map(P=>P.id)),I($,Object.keys(m.sources)),a(ee))for(const[P,q]of Object.entries(a(ee)))e().addSource(P,q);if(a(ye))for(const P of a(ye))e().addLayer(P);for(const P of ge())Re(P,!0)}}),e().on("styledata",m=>{if(e()&&Q()){const P=e().getStyle().layers;if(P)for(let q of P)Q()(q)||e().setLayoutProperty(q.id,"visibility","none")}H("styledata",{...m,map:e()})}),{destroy(){var m;ae(!1),(m=e())==null||m.remove(),Te(X,null)}}}let Pe=Z(M());function y(){if(le()){let h=ir(window.location.hash);h.length>=3&&(W(h[0]),S([h[2],h[1]])),h.length==5&&(G(h[3]),D(h[4]))}}U(()=>x(F()),()=>{I(n,typeof F()=="boolean"?void 0:F())}),U(()=>e(),()=>{d(e())}),U(()=>(e(),x(M()),a(Pe),a(he),a($),x(w())),()=>{if(e()&&!Je(M(),a(Pe))){const h=e().getStyle();if(a(he)&&I(ye,h.layers.filter(m=>!a(he).includes(m.id))),a($)){const m=Object.keys(h.sources).filter(P=>!a($).includes(P));I(ee,{});for(const P of m)qt(ee,a(ee)[P]=h.sources[P])}I(Pe,M()),e().setStyle(M(),{diff:w()}),Te(_e,new Set),I(oe,new Set)}}),U(()=>(x(ae()),e(),x(ge()),r(),a(oe)),()=>{var h;if(ae()&&((h=e())!=null&&h.loaded()))for(let m of ge())!r().has(m.id)&&!a(oe).has(m.id)&&!e().hasImage(m.id)&&Re(m)}),U(()=>(x(ge()),r()),()=>{I(k,ge().every(h=>r().has(h.id)))}),U(()=>(e(),x(S()),x(W()),x(G()),x(D())),()=>{var h,m,P,q;if(e()){let ce={};S()!=null&&!Je(S(),(h=e())==null?void 0:h.getCenter())&&(ce.center=S()),W()!=null&&!Je(W(),(m=e())==null?void 0:m.getZoom())&&(ce.zoom=W()),G()!=null&&!Je(G(),(P=e())==null?void 0:P.getBearing())&&(ce.bearing=G()),D()!=null&&!Je(D(),(q=e())==null?void 0:q.getPitch())&&(ce.pitch=D()),Object.keys(ce).length&&e().easeTo(ce)}}),U(()=>(x(J()),e()),()=>{var h,m;J()&&!Je(J(),(h=e())==null?void 0:h.getBounds())&&((m=e())==null||m.fitBounds(J()))}),U(()=>(x(de()),e()),()=>{var h,m;de()?(h=e())==null||h.doubleClickZoom.enable():(m=e())==null||m.doubleClickZoom.disable()}),He(),Ne();var z=vr();Ma("hashchange",wa,y);var pe=l(z);B(pe,()=>e()&&ae(),h=>{var m=fr(),P=N(m);B(P,F,ce=>{var nt=ur(),qe=N(nt);dr(qe,{get position(){return a(n)}});var Xe=f(qe,2);nr(Xe,{get position(){return a(n)},fitBoundsOptions:{maxZoom:12}});var $e=f(Xe,2);rr($e,{get position(){return a(n)}});var et=f($e,2);cr(et,{get position(){return a(n)}}),b(ce,nt)});var q=f(P,2);st(q,t,"default",{get map(){return e()},get loadedImages(){return r()},get allImagesLoaded(){return a(k)}},null),b(h,m)}),o(z),Vt(z,h=>s(h),()=>s()),Ta(z,h=>Ae(h)),R(()=>{Ra(z,`${_()??""} svelte-p00lfq`),Aa(z,"expand-map",!_())}),b(i,z),xe()}var mr=O("<div><!></div>");function Wt(i,t){const g=Ia(t);be(t,!1);const e=Ze(),r=()=>se(we,"$popupTarget",e),n=()=>se(re,"$map",e),k=()=>se(Ee,"$layer",e),d=()=>se(ne,"$layerEvent",e),s=Z(),_=Z();let M=u(t,"closeButton",8,void 0),w=u(t,"closeOnClickOutside",8,!0),S=u(t,"closeOnClickInside",8,!1),W=u(t,"closeOnMove",8,!1),D=u(t,"openOn",8,"click"),G=u(t,"openIfTopMost",8,!0),J=u(t,"focusAfterOpen",8,!0),le=u(t,"anchor",8,void 0),Ce=u(t,"offset",8,void 0),ae=u(t,"popupClass",8,void 0),ve=u(t,"maxWidth",8,void 0),V=u(t,"lngLat",12,void 0),me=u(t,"html",8,void 0),j=u(t,"open",12,!1);const E=pt(),{map:re,popupTarget:we,layerEvent:ne,layer:Ee,eventTopMost:de,markerClickManager:We}=Qe(),Fe=["click","dblclick","contextmenu"];let L=Z(),Se=Z(!1),K=Z();function Ie(){if(!a(L))return;let y=a(L).getElement();!y||y===a(K)||(I(K,y),D()==="hover"&&qt(K,a(K).style.pointerEvents="none"),a(K).addEventListener("mouseenter",()=>{I(Se,!0)},{passive:!0}),a(K).addEventListener("mouseleave",()=>{I(Se,!1)},{passive:!0}),a(K).addEventListener("click",()=>{S()&&j(!1)},{passive:!0}))}Gt(()=>{if(n())return n().on("click",$),n().on("contextmenu",$),We.add(ye),typeof r()=="string"&&(n().on("click",r(),H),n().on("dblclick",r(),H),n().on("contextmenu",r(),H),n().on("mousemove",r(),he),n().on("mouseleave",r(),Re),n().on("touchstart",r(),_e),n().on("touchend",r(),oe)),()=>{var y,z;(y=n())!=null&&y.loaded()&&((z=a(L))==null||z.remove(),n().off("click",$),n().off("contextmenu",$),We.remove(ye),r()instanceof fe.Marker?r().getPopup()===a(L)&&r().setPopup(void 0):typeof r()=="string"&&(n().off("click",r(),H),n().off("dblclick",r(),H),n().off("contextmenu",r(),H),n().off("mousemove",r(),he),n().off("mouseleave",r(),Re),n().off("touchstart",r(),_e),n().off("touchend",r(),oe)))}});function ge(y){return G()?!("marker"in y)&&!er(y)&&de(y)!==k():!1}let F=Z(null),Q=Z("normal");function De(y){"layerType"in y&&y.layerType==="deckgl"?(V(y.coordinate),I(F,y.object?[y.object]:null)):(V(y.lngLat),I(F,y.features??[]))}function H(y){y.type!==D()||ge(y)||(De(y),setTimeout(()=>j(!0)))}let X=null;function _e(y){X=y.point}function oe(y){if(!X||D()!=="hover")return;let z=X.dist(y.point);X=null,z<3&&(V(y.lngLat),I(F,y.features??[]),a(L).isOpen()?I(Q,"justOpened"):(I(Q,"opening"),j(!0)))}function Re(y){D()!=="hover"||X||a(Q)!=="normal"||(j(!1),I(F,null))}function he(y){if(!(D()!=="hover"||X||a(Q)!=="normal")){if(ge(y)){j(!1),I(F,null);return}j(!0),I(F,y.features??[]),V(y.lngLat)}}function $(y){var pe;if(a(Q)==="justOpened"){I(Q,"normal");return}if(!w())return;let z=[a(K),r()instanceof fe.Marker?(pe=r())==null?void 0:pe.getElement():null];j()&&a(L).isOpen()&&!z.some(h=>h==null?void 0:h.contains(y.originalEvent.target))&&(y.type==="contextmenu"&&D()==="contextmenu"||y.type!=="contextmenu")&&j(!1)}function ye(y){w()&&j()&&a(L).isOpen()&&y.marker!==r()&&j(!1)}Ke(()=>{var y;n()&&((y=a(L))!=null&&y.isOpen())&&a(L).remove()});let ee=Z();U(()=>(x(M()),x(w()),x(S())),()=>{I(s,M()??(!w()&&!S()))}),U(()=>(a(L),a(s),x(W()),x(J()),x(ve()),x(ae()),x(le()),x(Ce())),()=>{a(L)||(I(L,new fe.Popup({closeButton:a(s),closeOnClick:!1,closeOnMove:W(),focusAfterOpen:J(),maxWidth:ve(),className:ae(),anchor:le(),offset:Ce()})),I(K,a(L).getElement()),a(L).on("open",()=>{j(!0),Ie(),E("open",a(L))}),a(L).on("close",()=>{j(!1),E("close",a(L))}),a(L).on("hover",()=>{E("hover",a(L))}))}),U(()=>(a(L),r(),x(D())),()=>{a(L)&&r()instanceof fe.Marker&&(D()==="click"?r().setPopup(a(L)):r().getPopup()===a(L)&&r().setPopup(void 0))}),U(()=>(x(D()),d()),()=>{var y;Fe.includes(D())&&((y=d())==null?void 0:y.type)===D()&&(H(d()),Te(ne,null))}),U(()=>(x(D()),d()),()=>{var y,z;I(_,D()==="hover"&&(((y=d())==null?void 0:y.type)==="mousemove"||((z=d())==null?void 0:z.type)==="mouseenter"))}),U(()=>(x(D()),a(_),d(),a(Se)),()=>{D()==="hover"&&ne&&(a(_)&&d()&&De(d()),j((a(_)||a(Se))??!1))}),U(()=>(a(ee),a(L),x(me())),()=>{a(ee)?a(L).setDOMContent(a(ee)):me()&&a(L).setHTML(me())}),U(()=>(x(V()),a(L)),()=>{V()&&a(L).setLngLat(V())}),U(()=>(n(),a(L),x(j()),a(Q)),()=>{if(n()){let y=a(L).isOpen();j()&&!y?(a(L).addTo(n()),a(Q)==="opening"&&I(Q,"justOpened")):!j()&&y&&a(L).remove()}}),He(),Ne();var Ae=Me(),Pe=N(Ae);B(Pe,()=>g.default,y=>{var z=mr(),pe=l(z);B(pe,()=>{var h;return((h=a(F))==null?void 0:h.length)||r()instanceof fe.Marker},h=>{var m=Me(),P=N(m);st(P,t,"default",{get features(){return a(F)},get data(){var q;return((q=a(F))==null?void 0:q[0])??null},get map(){return n()},close:()=>j(!1)},null),b(h,m)}),o(z),Vt(z,h=>I(ee,h),()=>a(ee)),b(y,z)}),b(i,Ae),xe()}var rt=Uint8Array,Jt=Uint16Array,gr=Int32Array,_r=new rt([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),hr=new rt([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Kt=function(i,t){for(var g=new Jt(31),e=0;e<31;++e)g[e]=t+=1<<i[e-1];for(var r=new gr(g[30]),e=1;e<30;++e)for(var n=g[e];n<g[e+1];++n)r[n]=n-g[e]<<5|e;return{b:g,r}},Qt=Kt(_r,2),yr=Qt.b,pr=Qt.r;yr[28]=258,pr[258]=28;Kt(hr,0);var kr=new Jt(32768);for(T=0;T<32768;++T)Le=(T&43690)>>1|(T&21845)<<1,Le=(Le&52428)>>2|(Le&13107)<<2,Le=(Le&61680)>>4|(Le&3855)<<4,kr[T]=((Le&65280)>>8|(Le&255)<<8)>>1;var Le,T,lt=new rt(288);for(T=0;T<144;++T)lt[T]=8;var T;for(T=144;T<256;++T)lt[T]=9;var T;for(T=256;T<280;++T)lt[T]=7;var T;for(T=280;T<288;++T)lt[T]=8;var T,br=new rt(32);for(T=0;T<32;++T)br[T]=5;var T,xr=new rt(0),Cr=typeof TextDecoder<"u"&&new TextDecoder,wr=0;try{Cr.decode(xr,{stream:!0}),wr=1}catch{}var Lr=O('<a target="_blank" rel="noopener noreferrer"> </a>');function Or(i,t){be(t,!0);function g(s){return s.padStart(6,"0")}function e(s,_){if(!_)return"";switch(s){case"DOI":return yt.DOI+_;case"EDR":case"EDH":return yt[s]+g(_);case"URI":return _;default:return yt[s]+_}}const r=it(()=>e(t.edition.type,t.edition._)),n=it(()=>t.edition.type==="DOI"?`DOI: ${t.edition._} (${t.edition.when})`:`${t.edition.type}: ${t.edition._}`);var k=Me(),d=N(k);B(d,()=>t.edition._,s=>{var _=Lr(),M=l(_,!0);o(_),R(()=>{ie(_,"href",a(r)),C(M,a(n))}),b(s,_)},s=>{var _=at();R(()=>C(_,`${t.edition.type??""}: -`)),b(s,_)}),b(i,k),xe()}var Mr=O('<dd class="svelte-1uks9c9"><a class="svelte-1uks9c9"> </a></dd>'),Er=O('<section id="translations" class="svelte-1uks9c9"></section>'),Sr=O("<dd><a> </a></dd>"),Pr=O("<dd> </dd>"),Tr=O("<dd> </dd>"),Ir=O("<dd> </dd>"),Dr=O(" <!>",1),Rr=O("<dd> </dd>"),Ar=O("<dd> </dd>"),jr=O("<dd> </dd>"),zr=O("<dd> </dd>"),Br=O("<dd> <a> </a></dd>"),Ur=O("<dd> </dd>"),Hr=O('<div class="popup"> </div>'),Zr=O("<dt>Map</dt> <dd><!></dd>",1),Nr=O("<p> </p>"),Wr=O('<div class="popup"> </div>'),Fr=O("<dt>Map</dt> <dd><!></dd>",1),qr=O("<dl><dt>Place</dt> <dd> </dd> <dt>Repository</dt> <dd><a> </a><!></dd> <dt>Autopsy</dt> <dd> </dd> <!></dl>"),Vr=O("<li><!></li>"),Gr=O("<li><!></li>"),Yr=O('<dt>Printed editions</dt> <dd><ul class="bibliography-list"></ul></dd>',1),Jr=O('<article class="svelte-1uks9c9"><section id="overview" class="svelte-1uks9c9"><h1 class="inscription-title svelte-1uks9c9"> </h1> <figure id="facsimile-images" class="svelte-1uks9c9"><section id="image-viewer" style="height: 50vh; width: 100%;" class="svelte-1uks9c9"></section> <figcaption class="svelte-1uks9c9"> </figcaption></figure> <dl class="svelte-1uks9c9"><dt class="svelte-1uks9c9">Language</dt> <dd class="svelte-1uks9c9"> </dd> <dt class="svelte-1uks9c9">Text type</dt> <dd class="svelte-1uks9c9"><a class="svelte-1uks9c9"> </a></dd> <dt class="svelte-1uks9c9">Object type</dt> <!> <dt class="svelte-1uks9c9">ID</dt> <dd class="svelte-1uks9c9"> </dd> <dt class="svelte-1uks9c9">Status</dt> <dd class="svelte-1uks9c9"> </dd> <dt class="svelte-1uks9c9">Links</dt> <dd class="svelte-1uks9c9"><a class="button svelte-1uks9c9" target="inscription">View in current site <!></a></dd></dl></section> <section id="content" class="svelte-1uks9c9"><section id="edition" class="svelte-1uks9c9"><h2 class="svelte-1uks9c9">Edition</h2> <!></section> <section id="apparatus" class="svelte-1uks9c9"><!></section> <!> <section id="physical-description" class="svelte-1uks9c9"><h2>Physical description</h2> <section class="svelte-1uks9c9"><h3>Support</h3> <dl><dt>Description</dt> <dd> </dd> <dt>Object type</dt> <!> <dt>Material</dt> <dd><a> </a></dd> <dt>Condition</dt> <!> <dt>Dimensions</dt> <dd></dd></dl></section> <section class="svelte-1uks9c9"><h3>Inscription</h3> <dl><dt>Layout</dt> <dd> </dd> <dt>Text condition</dt> <!> <dt>Lettering</dt> <dd> </dd> <dt>Letter heights</dt> <!> <dt>Interlinear heights</dt> <!></dl></section></section> <section id="provenance" class="svelte-1uks9c9"><h2>Provenance</h2> <dl><dt>Place of origin</dt> <!> <dt>Provenance found</dt> <dd> </dd> <!></dl></section> <section id="current-location" class="svelte-1uks9c9"><h2>Current location</h2> <!></section> <section id="date" class="svelte-1uks9c9"><h2>Date</h2> <!> <dl><dt>Evidence</dt> <dd> </dd></dl></section> <section id="text-type" class="svelte-1uks9c9"><h2>Text type</h2> <p><a> </a></p></section> <section id="commentary" class="svelte-1uks9c9"><!></section> <section id="bibliography" class="svelte-1uks9c9"><h2>Bibliography</h2> <dl><dt>Digital editions</dt> <dd><ul></ul></dd> <!></dl></section> <section id="citation-and-status" class="svelte-1uks9c9"><h2>Citation and editorial status</h2> <dl><dt>Citation</dt> <dd> </dd></dl></section></section></article>');function mn(i,t){be(t,!0);let{slug:g,metadata:e,images:r,html:n}=t.data,k=La(Pa(r[0].desc));const d=n.divs.find(v=>v.id==="edition"),s=n.divs.find(v=>v.id==="apparatus"),_=n.divs.filter(v=>v.id==="translation"),M=n.divs.find(v=>v.id==="commentary");let w=r.map(v=>`${Ba}${g}/${v.url}/info.json`),S;Gt(async()=>{S=(await va(async()=>{const{default:c}=await import("../chunks/openseadragon.D4CfHLA_.js").then(p=>p.o);return{default:c}},__vite__mapDeps([0,1,2,3,4,5,6]),import.meta.url)).default,S({id:"image-viewer",prefixUrl:`${Da}/openseadragon/images/`,tileSources:w,sequenceMode:!0,showReferenceStrip:!0,preserveViewport:!0}).addHandler("page",function(c){const p=r[c.page];I(k,`${p.surfaceType}, ${p.desc}`)})});var W=Jr(),D=l(W),G=l(D),J=l(G);o(G);var le=f(G,2),Ce=f(l(le),2),ae=l(Ce,!0);o(Ce),o(le);var ve=f(le,2),V=f(l(ve),2),me=l(V,!0);o(V);var j=f(V,4),E=l(j),re=l(E,!0);o(E),o(j);var we=f(j,4);B(we,()=>e.objectType,v=>{var c=Mr(),p=l(c),A=l(p,!0);o(p),o(c),R(()=>{ie(p,"href",e.objectType.ref),C(A,e.objectType._)}),b(v,c)});var ne=f(we,4),Ee=l(ne,!0);o(ne);var de=f(ne,4),We=l(de,!0);o(de);var Fe=f(de,4),L=l(Fe),Se=f(l(L));Ha(Se,{}),o(L),o(Fe),o(ve),o(D);var K=f(D,2),Ie=l(K),ge=f(l(Ie),2);tt(ge,()=>d.html),o(Ie);var F=f(Ie,2),Q=l(F);tt(Q,()=>s.html),o(F);var De=f(F,2);B(De,()=>_.length,v=>{var c=Er();Ge(c,21,()=>_,Ye,(p,A)=>{var Y=Me(),te=N(Y);tt(te,()=>a(A).html),b(p,Y)}),o(c),b(v,c)});var H=f(De,2),X=f(l(H),2),_e=f(l(X),2),oe=f(l(_e),2),Re=l(oe,!0);o(oe);var he=f(oe,4);B(he,()=>e.objectType,v=>{var c=Sr(),p=l(c),A=l(p,!0);o(p),o(c),R(()=>{ie(p,"href",e.objectType.ref),C(A,e.objectType._)}),b(v,c)},v=>{var c=Pr(),p=l(c,!0);o(c),R(()=>C(p,ue)),b(v,c)});var $=f(he,4),ye=l($),ee=l(ye,!0);o(ye),o($);var Ae=f($,4);B(Ae,()=>{var v;return(v=e.condition)==null?void 0:v.ana},v=>{var c=Tr(),p=l(c,!0);R(()=>C(p,e.condition.ana.split(".").slice(1).join(", "))),o(c),b(v,c)},v=>{var c=Ir(),p=l(c,!0);o(c),R(()=>C(p,e.condition._||ue)),b(v,c)});var Pe=f(Ae,4);Ge(Pe,21,()=>e.dimensions,Ye,(v,c,p)=>{Oa();var A=Dr(),Y=N(A),te=f(Y);B(te,()=>p<e.dimensions.length-1,je=>{var ze=at(",Â ");b(je,ze)}),R(()=>C(Y,`${a(c).dimension??""}: ${a(c)._??""}
							${a(c).unit??""}`)),b(v,A)}),o(Pe),o(_e),o(X);var y=f(X,2),z=f(l(y),2),pe=f(l(z),2),h=l(pe,!0);o(pe);var m=f(pe,4);B(m,()=>e.layoutDesc.layout.damage.ana,v=>{var c=Rr(),p=l(c,!0);R(()=>C(p,e.layoutDesc.layout.damage.ana.split(".").slice(1).join(", "))),o(c),b(v,c)},v=>{var c=Ar(),p=l(c,!0);o(c),R(()=>C(p,e.layoutDesc.layout.damage._||ue)),b(v,c)});var P=f(m,4),q=l(P,!0);o(P);var ce=f(P,4);Ge(ce,17,()=>e.handNote.dimensions.filter(v=>(v==null?void 0:v.type)==="letterHeight"),Ye,(v,c)=>{var p=jr(),A=l(p);o(p),R(()=>C(A,`${a(c).l??""}: ${a(c).h??""}${a(c).unit??""}`)),b(v,p)});var nt=f(ce,4);Ge(nt,17,()=>e.handNote.dimensions.filter(v=>(v==null?void 0:v.type)==="interlinear"),Ye,(v,c)=>{var p=zr(),A=l(p);o(p),R(()=>C(A,`${a(c).l??""}: ${a(c).h??""}${(a(c).h!=="not measured"?a(c).unit:"")??""}`)),b(v,p)}),o(z),o(y),o(H);var qe=f(H,2),Xe=f(l(qe),2),$e=f(l(Xe),2);B($e,()=>e.places.length,v=>{var c=Br(),p=l(c),A=f(p),Y=l(A,!0);o(A),o(c),R(()=>{C(p,`${(e.places[0].offset||"")??""} `),ie(A,"href",e.places[0].ref),C(Y,e.places[0]._)}),b(v,c)},v=>{var c=Ur(),p=l(c,!0);o(c),R(()=>C(p,ue)),b(v,c)});var et=f($e,4),Xt=l(et,!0);o(et);var $t=f(et,2);B($t,()=>{var v;return(v=e.provenanceFound)==null?void 0:v.geo},v=>{var c=Zr();const p=it(()=>[e.provenanceFound.geo[1],e.provenanceFound.geo[0]]);var A=f(N(c),2),Y=l(A);Nt(Y,{get center(){return a(p)},zoom:7,class:"map",standardControls:!0,get style(){return Bt},children:(te,je)=>{Ht(te,{get lngLat(){return a(p)},children:(ze,Ve)=>{Wt(ze,{offset:[0,-10],children:(Be,ot)=>{var ke=Hr(),Ue=l(ke,!0);o(ke),R(()=>C(Ue,e.provenanceFound._)),b(Be,ke)},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}}),o(A),b(v,c)}),o(Xe),o(qe);var dt=f(qe,2),ea=f(l(dt),2);B(ea,()=>e.provenanceLost,v=>{var c=Nr(),p=l(c,!0);o(c),R(()=>C(p,e.provenanceLost._)),b(v,c)},v=>{var c=qr(),p=f(l(c),2),A=l(p);o(p);var Y=f(p,4),te=l(Y),je=l(te,!0);o(te);var ze=f(te);B(ze,()=>e.idno,ke=>{var Ue=at();R(()=>C(Ue,`,
							${e.idno._??""}`)),b(ke,Ue)}),o(Y);var Ve=f(Y,4),Be=l(Ve,!0);o(Ve);var ot=f(Ve,2);B(ot,()=>e.repository.museum.location.geo,ke=>{var Ue=Fr();const Tt=it(()=>[e.repository.museum.location.geo.lon,e.repository.museum.location.geo.lat]);var It=f(N(Ue),2),ia=l(It);Nt(ia,{get center(){return a(Tt)},zoom:7,class:"map",standardControls:!0,get style(){return Bt},children:(sa,Qr)=>{Ht(sa,{get lngLat(){return a(Tt)},children:(la,Xr)=>{Wt(la,{offset:[0,-10],children:(da,$r)=>{var _t=Wr(),ca=l(_t,!0);o(_t),R(()=>C(ca,e.repository.museum.name)),b(da,_t)},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}}),o(It),b(ke,Ue)}),o(c),R(()=>{var ke;C(A,`${e.settlement??""}, ${e.country??""}`),ie(te,"href",e.repository.ref),C(je,e.repository._),C(Be,((ke=e.provenanceObserved)==null?void 0:ke._)||ue)}),b(v,c)}),o(dt);var ct=f(dt,2),xt=f(l(ct),2);ja(xt,{inscription:e});var Ct=f(xt,2),wt=f(l(Ct),2),ta=l(wt,!0);o(wt),o(Ct),o(ct);var ut=f(ct,2),Lt=f(l(ut),2),ft=l(Lt),aa=l(ft,!0);o(ft),o(Lt),o(ut);var vt=f(ut,2),ra=l(vt);tt(ra,()=>M.html),o(vt);var mt=f(vt,2),Ot=f(l(mt),2),gt=f(l(Ot),2),Mt=l(gt);Ge(Mt,21,()=>e.editions,Ye,(v,c)=>{var p=Vr(),A=l(p);Or(A,{get edition(){return a(c)}}),o(p),b(v,p)}),o(Mt),o(gt);var na=f(gt,2);B(na,()=>{var v,c;return(c=(v=e.bibliographyEdition)==null?void 0:v.bibl)==null?void 0:c.length},v=>{var c=Yr(),p=f(N(c),2),A=l(p);Ge(A,21,()=>e.bibliographyEdition.bibl,Ye,(Y,te)=>{var je=Me(),ze=N(je);B(ze,()=>a(te),Ve=>{var Be=Gr(),ot=l(Be);Ja(ot,{get entry(){return a(te)}}),o(Be),b(Ve,Be)}),b(Y,je)}),o(A),o(p),b(v,c)}),o(Ot),o(mt);var Et=f(mt,2),St=f(l(Et),2),Pt=f(l(St),2),oa=l(Pt,!0);o(Pt),o(St),o(Et),o(K),o(W),R(()=>{var v;C(J,`${e.file??""}: ${e.title??""}`),C(ae,a(k)),C(me,e.textLang._),ie(E,"href",e.type.ref),C(re,e.type._),C(Ee,e.file),C(We,e.status),ie(L,"href",`${Ua}inscription/${g??""}`),C(Re,e.support||ue),ie(ye,"href",e.material.ref),C(ee,e.material._),C(h,e.layoutDesc.layout.p||ue),C(q,e.handNote.lettering||ue),C(Xt,((v=e.provenanceFound)==null?void 0:v._)||ue),C(ta,e.evidence||ue),ie(ft,"href",e.type.ref),C(aa,e.type._),C(oa,e.citation||ue)}),b(i,W),xe()}export{mn as component};
