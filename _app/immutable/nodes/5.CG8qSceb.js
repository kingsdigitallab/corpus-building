const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["../chunks/openseadragon.CKpNC7as.js","../chunks/maplibre-gl.p2rm0KV9.js","../chunks/runtime.BQotSvAO.js","../chunks/disclose-version.CNJLWmUd.js","../chunks/store.D90-691m.js","../chunks/utils.B5sIsHFd.js","../assets/maplibre-gl.CuCRB34y.css"])))=>i.map(i=>d[i]);
var ha=Object.defineProperty;var ya=(r,t,m)=>t in r?ha(r,t,{enumerable:!0,configurable:!0,writable:!0,value:m}):r[t]=m;var jt=(r,t,m)=>ya(r,typeof t!="symbol"?t+"":t,m);import{_ as pa}from"../chunks/preload-helper.C1FmrZbK.js";import{d as Bt,f as xa,c as le,a as b,b as at,t as O}from"../chunks/disclose-version.CNJLWmUd.js";import{B as ba,F as Nt,P as Ht,C as Ca,G as Ut,au as wa,ay as ka,aw as La,O as Oa,K as Ma,D as Ea,z as U,q as Ce,w as c,x as i,t as A,y as f,v as we,g as a,k as lt,aE as Pa,aF as Yt,aG as B,aH as He,j as C,aI as W,s as T,aJ as Sa,aK as Jt,I as Zt,n as Ta}from"../chunks/runtime.BQotSvAO.js";import{a as w,s as Ue,f as Re,b as ie,g as Ia}from"../chunks/store.D90-691m.js";import{l as xt,s as bt,i as z,p as u,b as Xt,a as Da,c as Ra}from"../chunks/props.7sWcRfGm.js";import{b as Ye,s as oe,d as Aa,f as za,e as Ge,B as ja,i as Ve}from"../chunks/button.B3mRU6RN.js";import{m as me,s as Ba,t as Qt,I as Na}from"../chunks/maplibre-gl.p2rm0KV9.js";import{c as Ct,a as Je,o as $t}from"../chunks/index-client.BkwQQHTV.js";import{w as Ee,r as yt,b as Ha}from"../chunks/paths.CKqK2DWX.js";import{I as wt,d as pt,i as Ua,m as Ft,E as ve,p as Za}from"../chunks/Icon.D6A_rVCV.js";import"../chunks/legacy.D7Z1dIIn.js";import{i as Ze}from"../chunks/lifecycle.BUkS9xIk.js";function tt(r,t,m,e,n){var o=r,h="",l;ba(()=>{if(h===(h=t()??"")){Nt&&Ht();return}l!==void 0&&(Ea(l),l=void 0),h!==""&&(l=Ca(()=>{if(Nt){Ut.data;for(var s=Ht(),y=s;s!==null&&(s.nodeType!==8||s.data!=="");)y=s,s=wa(s);if(s===null)throw ka(),La;Bt(Ut,y),o=Oa(s);return}var M=h+"",k=xa(M);Bt(Ma(k),k.lastChild),o.before(k)}))})}function Fa(r,t){const m=xt(t,["children","$$slots","$$events","$$legacy"]);wt(r,bt({name:"external-link"},()=>m,{iconNode:[["path",{d:"M15 3h6v6"}],["path",{d:"M10 14 21 3"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"}]],children:(n,o)=>{var h=le(),l=U(h);Ye(l,t,"default",{},null),b(n,h)},$$slots:{default:!0}}))}function Wa(r,t){const m=xt(t,["children","$$slots","$$events","$$legacy"]);wt(r,bt({name:"maximize-2"},()=>m,{iconNode:[["polyline",{points:"15 3 21 3 21 9"}],["polyline",{points:"9 21 3 21 3 15"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14"}]],children:(n,o)=>{var h=le(),l=U(h);Ye(l,t,"default",{},null),b(n,h)},$$slots:{default:!0}}))}function qa(r,t){const m=xt(t,["children","$$slots","$$events","$$legacy"]);wt(r,bt({name:"minimize-2"},()=>m,{iconNode:[["polyline",{points:"4 14 10 14 10 20"}],["polyline",{points:"20 10 14 10 14 4"}],["line",{x1:"14",x2:"21",y1:"10",y2:"3"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14"}]],children:(n,o)=>{var h=le(),l=U(h);Ye(l,t,"default",{},null),b(n,h)},$$slots:{default:!0}}))}var Ga=O("<!><!>",1),Va=O("<span> </span>"),Ka=O("<span> </span>"),Ya=O("at <a> </a>",1),Ja=O("at <span> </span>",1),Xa=O("<a>Zotero</a>"),Qa=O("<a>FAIR</a>"),$a=O("<!> <!> <!> <!>",1);function en(r,t){Ce(t,!0);var m=$a(),e=U(m);z(e,()=>t.entry.citation,l=>{var s=Ga(),y=U(s);tt(y,()=>t.entry.citation);var M=f(y);z(M,()=>t.entry.citedRange,k=>{var P=at(",");b(k,P)},k=>{var P=at(".");b(k,P)}),b(l,s)},l=>{var s=le(),y=U(s);z(y,()=>t.entry.type==="bulletin"||t.entry.type==="corpus",M=>{var k=Va(),P=c(k);i(k),A(()=>w(P,`${t.entry.n??""} ${(t.entry.author?`${t.entry.author} (${t.entry.date})`:"")??""}`)),b(M,k)},M=>{var k=Ka(),P=c(k);i(k),A(()=>w(P,`${t.entry.author??""} (${t.entry.date??""})`)),b(M,k)},!0),b(l,s)});var n=f(e,2);z(n,()=>{var l;return typeof t.entry.citedRange=="object"&&((l=t.entry.citedRange)==null?void 0:l.ref)},l=>{var s=Ya(),y=f(U(s)),M=c(y,!0);i(y),A(()=>{oe(y,"href",t.entry.citedRange.ref.target),w(M,t.entry.citedRange.ref._)}),b(l,s)},l=>{var s=le(),y=U(s);z(y,()=>t.entry.citedRange,M=>{var k=Ja(),P=f(U(k)),F=c(P,!0);i(P),A(()=>w(F,t.entry.citedRange)),b(M,k)},null,!0),b(l,s)});var o=f(n,2);z(o,()=>{var l;return(l=t.entry.ptr)==null?void 0:l.target},l=>{var s=Xa();A(()=>{var y;return oe(s,"href",(y=t.entry.ptr)==null?void 0:y.target)}),b(l,s)});var h=f(o,2);z(h,()=>{var l;return(l=t.entry.ref)==null?void 0:l.target},l=>{var s=Qa();A(()=>oe(s,"href",t.entry.ref.target)),b(l,s)}),b(r,m),we()}var tn=O('<a target="_blank" rel="noopener noreferrer"> </a>');function an(r,t){Ce(t,!0);function m(s){return s.padStart(6,"0")}function e(s,y){if(!y)return"";switch(s){case"DOI":return pt.DOI+y;case"EDR":case"EDH":return pt[s]+m(y);case"URI":return y;default:return pt[s]+y}}const n=lt(()=>e(t.edition.type,t.edition._)),o=lt(()=>t.edition.type==="DOI"?`DOI: ${t.edition._} (${t.edition.when})`:`${t.edition.type}: ${t.edition._}`);var h=le(),l=U(h);z(l,()=>t.edition._,s=>{var y=tn(),M=c(y,!0);i(y),A(()=>{oe(y,"href",a(n)),w(M,a(o))}),b(s,y)},s=>{var y=at();A(()=>w(y,`${t.edition.type??""}: -`)),b(s,y)}),b(r,h),we()}const kt=Symbol.for("svelte-maplibre");function Xe(){return Pa(kt)}function nn(r){let t=new WeakMap;return m=>{var h;let e=t.get(m.originalEvent);if(e!==void 0)return e;let o=(h=m.target.queryRenderedFeatures(m.point).find(l=>{var s;return(s=r.get(l.layer.id))==null?void 0:s.interactive}))==null?void 0:h.layer.id;return t.set(m.originalEvent,o),o}}function rn(){let r=new Map;return Yt(kt,{map:Ee(null),source:yt(null),layer:yt(null),popupTarget:yt(null),cluster:Ee(),loadedImages:Ee(new Set),minzoom:Ee(0),maxzoom:Ee(24),layerEvent:Ee(null),layerInfo:r,eventTopMost:nn(r),markerClickManager:new dn})}function Wt(r){return{subscribe:r.subscribe}}function on({key:r,setPopupTarget:t=!1,setCluster:m=!1,setMouseEvent:e=!1}){let n=Xe(),o=Ee(null),h=Wt(o),l={...n,[r]:Wt(o)};if(t&&(l.popupTarget=h),e){let s=Ee(null);l.layerEvent=s,n.layerEvent=s}return m&&(l.cluster=Ee()),Yt(kt,l),{...n,self:o}}function ln(){return on({key:"popupTarget",setPopupTarget:!0,setMouseEvent:!0})}function sn(r){return"layerType"in r&&r.layerType==="deckgl"}class dn{constructor(){jt(this,"_handlers",new Set)}add(t){this._handlers.add(t)}remove(t){this._handlers.delete(t)}handleClick(t){for(const m of this._handlers)m(t)}}var ea=cn;function cn(r){var t,m,e;if(r){if(Array.isArray(r)){for(t=[],m=r.length,e=0;e<m;e++){var n=r[e];n!=null&&t.push(n)}return t}if(typeof r=="object"){t={};var o=Object.keys(r);for(m=o.length,e=0;e<m;e++){var h=o[e],l=r[h];l!=null&&(t[h]=l)}return t}}}function qt(r,t){Ce(t,!1);const m=Ue(),e=()=>ie(V,"$marker",m),n=()=>ie(D,"$map",m);let o=u(t,"marker",12,void 0),h=u(t,"lngLat",12),l=u(t,"class",8,void 0),s=u(t,"draggable",8,!1),y=u(t,"feature",8,null),M=u(t,"offset",8,void 0),k=u(t,"rotation",8,0),P=u(t,"opacity",8,1);const F=Ct(),{map:D,layerEvent:J,self:V}=ln(),se=()=>K("dragstart"),Pe=()=>{de(),K("drag")},ee=()=>{de(),K("dragend")};Re(V,new me.Marker(ea({draggable:s(),rotation:k(),className:l(),offset:M(),opacity:P().toString()})).setLngLat(h()).addTo(n())),o(e()),s()&&(e().on("dragstart",se),e().on("drag",Pe),e().on("dragend",ee)),Je(()=>{var E;o(void 0),(E=e())==null||E.remove()});function de(){var te;let E=(te=e())==null?void 0:te.getLngLat();E&&(Array.isArray(h())?h([E.lng,E.lat]):h()&&"lon"in h()?h({lon:E.lng,lat:E.lat}):h(E))}function K(E){var Se,he;let te=(Se=e())==null?void 0:Se.getLngLat();if(!te)return;const _e=[te.lng,te.lat];let ae={map:n(),marker:e(),lngLat:_e,features:[{type:"Feature",properties:((he=y())==null?void 0:he.properties)??{},geometry:{type:"Point",coordinates:_e}}]};Re(J,{...ae,layerType:"marker",type:E}),F(E,ae)}B(()=>(e(),C(h())),()=>{var E;(E=e())==null||E.setLngLat(h())}),B(()=>(e(),C(M())),()=>{var E;(E=e())==null||E.setOffset(M()??[0,0])}),B(()=>(e(),C(k())),()=>{var E;(E=e())==null||E.setRotation(k())}),B(()=>(e(),C(P())),()=>{var E;(E=e())==null||E.setOpacity(P().toString())}),He(),Ze();var ge=le(),N=U(ge);Ye(N,t,"default",{get marker(){return e()}},null),b(r,ge),we()}function un(r,t){Ce(t,!1);const m=Ue(),e=()=>ie(n,"$map",m),{map:n}=Xe();let o=u(t,"position",8,"top-left"),h=u(t,"container",8,void 0),l=W(null);Je(()=>{var s;(s=e())!=null&&s.loaded()&&a(l)&&e().removeControl(a(l))}),B(()=>(e(),a(l),C(h()),C(o())),()=>{if(e()&&!a(l)){let s;typeof h()=="string"?s=document.querySelector(h())??void 0:s=h(),T(l,new me.FullscreenControl({container:s})),e().addControl(a(l),o())}}),He(),Ze(),we()}function fn(r,t){Ce(t,!1);const m=Ue(),e=()=>ie(n,"$map",m),{map:n}=Xe();let o=u(t,"position",8,"top-left"),h=u(t,"positionOptions",8,void 0),l=u(t,"fitBoundsOptions",8,void 0),s=u(t,"trackUserLocation",8,!1),y=u(t,"showAccuracyCircle",8,!0),M=u(t,"showUserLocation",8,!0),k=u(t,"control",12,null);Je(()=>{var P;(P=e())!=null&&P.loaded()&&k()&&e().removeControl(k())}),B(()=>(e(),C(k()),C(h()),C(l()),C(s()),C(y()),C(M()),C(o())),()=>{e()&&!k()&&(k(new me.GeolocateControl({positionOptions:h(),fitBoundsOptions:l(),trackUserLocation:s(),showAccuracyCircle:y(),showUserLocation:M()})),e().addControl(k(),o()))}),He(),Ze(),we()}function vn(r){let t=r.getCenter(),m=Math.round(r.getZoom()*100)/100,e=Math.ceil((m*Math.LN2+Math.log(512/360/.5))/Math.LN10),n=Math.pow(10,e),o=Math.round(t.lat*n)/n,h=Math.round(t.lng*n)/n,l=`${m}/${o}/${h}`,s=r.getBearing(),y=r.getPitch();return(s||y)&&(l+=`/${Math.round(s*10)/10}`),y&&(l+=`/${Math.round(y)}`),`#${l}`}function mn(r){return r.replace("#","").split("/").map(parseFloat)}var Ke=Lt;function Lt(r,t){return r===t||r!==r&&t!==t?!0:typeof r!=typeof t||{}.toString.call(r)!={}.toString.call(t)||r!==Object(r)||!r?!1:Array.isArray(r)?Gt(r,t):{}.toString.call(r)=="[object Set]"?Gt(Array.from(r),Array.from(t)):{}.toString.call(r)=="[object Object]"?_n(r,t):gn(r,t)}function gn(r,t){return r.toString()===t.toString()}function Gt(r,t){var m=r.length;if(m!=t.length)return!1;for(var e=0;e<m;e++)if(!Lt(r[e],t[e]))return!1;return!0}function _n(r,t){var m=Object.keys(r),e=m.length;if(e!=Object.keys(t).length)return!1;for(var n=0;n<e;n++){var o=m[n];if(!(t.hasOwnProperty(o)&&Lt(r[o],t[o])))return!1}return!0}function hn(r,t){Ce(t,!1);const m=Ue(),e=()=>ie(n,"$map",m),{map:n}=Xe();let o=u(t,"position",8,"top-left"),h=u(t,"showCompass",8,!0),l=u(t,"showZoom",8,!0),s=u(t,"visualizePitch",8,!1),y=W(null);Je(()=>{var M;(M=e())!=null&&M.loaded()&&a(y)&&e().removeControl(a(y))}),B(()=>(e(),a(y),C(h()),C(l()),C(s()),C(o())),()=>{e()&&!a(y)&&(T(y,new me.NavigationControl({showCompass:h(),showZoom:l(),visualizePitch:s()})),e().addControl(a(y),o()))}),He(),Ze(),we()}function yn(r,t){Ce(t,!1);const m=Ue(),e=()=>ie(n,"$map",m),{map:n}=Xe();let o=u(t,"position",8,"bottom-left"),h=u(t,"maxWidth",8,void 0),l=u(t,"unit",8,"metric"),s=W(null);Je(()=>{var y;(y=e())!=null&&y.loaded()&&a(s)&&e().removeControl(a(s))}),B(()=>(e(),a(s),C(h()),C(l()),C(o())),()=>{e()&&!a(s)&&(T(s,new me.ScaleControl({maxWidth:h(),unit:l()})),e().addControl(a(s),o()))}),He(),Ze(),we()}var pn=O("<!> <!> <!> <!>",1),xn=O("<!> <!>",1),bn=O('<div data-testid="map-container"><!></div>');function Vt(r,t){Ce(t,!1);const m=Ue(),e=()=>ie(ne,"$mapInstance",m),n=()=>ie(pe,"$loadedImages",m),o=W(),h=W();let l=u(t,"map",12,null),s=u(t,"mapContainer",12,void 0),y=u(t,"class",8,void 0),M=u(t,"style",8),k=u(t,"diffStyleUpdates",8,!1),P=u(t,"center",12,void 0),F=u(t,"zoom",12,void 0),D=u(t,"pitch",12,0),J=u(t,"bearing",12,0),V=u(t,"bounds",12,void 0),se=u(t,"hash",8,!1),Pe=u(t,"updateHash",8,g=>{window.history.replaceState(window.history.state,"",g)}),ee=u(t,"loaded",12,!1),de=u(t,"minZoom",8,0),K=u(t,"maxZoom",8,22),ge=u(t,"minPitch",8,0),N=u(t,"maxPitch",8,60),E=u(t,"renderWorldCopies",8,void 0),te=u(t,"dragPan",8,void 0),_e=u(t,"dragRotate",8,void 0),ae=u(t,"pitchWithRotate",8,void 0),Se=u(t,"antialias",8,void 0),he=u(t,"zoomOnDoubleClick",8,!0),Te=u(t,"locale",8,void 0),Qe=u(t,"interactive",8,!0),L=u(t,"attributionControl",8,!0),Ie=u(t,"cooperativeGestures",8,!1),$=u(t,"preserveDrawingBuffer",8,!1),Ae=u(t,"maxBounds",8,void 0),ye=u(t,"images",24,()=>[]),G=u(t,"standardControls",8,!1),Y=u(t,"filterLayers",8,void 0),Fe=u(t,"transformRequest",8,void 0);const H=Ct(),{map:ne,loadedImages:pe}=rn();let re=W(new Set);async function ke(g,_=!1){var S;if(e()&&!(!e().loaded()&&!_))if("url"in g){a(re).add(g.id);try{let Z=await e().loadImage(g.url);(S=e())==null||S.addImage(g.id,Z.data,g.options),n().add(g.id),Re(pe,n())}catch(Z){H("error",Z)}finally{a(re).delete(g.id)}}else e().addImage(g.id,g.data,g.options),n().add(g.id),Re(pe,n())}let ce=W(void 0),ue=W(void 0),Le=W(void 0),X=W(void 0);function De(g){return p(),Re(ne,new me.Map(ea({container:g,style:M(),locale:Te(),center:P(),zoom:F(),pitch:D(),bearing:J(),minZoom:de(),maxZoom:K(),minPitch:ge(),maxPitch:N(),renderWorldCopies:E(),dragPan:te(),dragRotate:_e(),pitchWithRotate:ae(),antialias:Se(),interactive:Qe(),preserveDrawingBuffer:$(),maxBounds:Ae(),bounds:V(),attributionControl:L(),transformRequest:Fe(),cooperativeGestures:Ie()}))),e().on("load",_=>{_.target.getContainer().setAttribute("data-testid","map"),_.target.getCanvas().setAttribute("data-testid","map-canvas"),ee(!0),H("load",e())}),e().on("error",_=>H("error",{..._,map:e()})),e().on("movestart",_=>H("movestart",{..._,map:e()})),e().on("moveend",_=>{if(P(_.target.getCenter()),F(_.target.getZoom()),D(_.target.getPitch()),J(_.target.getBearing()),V(_.target.getBounds()),H("moveend",{..._,map:e()}),se()){let S=new URL(window.location.href.replace(/(#.+)?$/,vn(e())));Pe()(S)}}),e().on("click",_=>H("click",{..._,map:e()})),e().on("dblclick",_=>H("dblclick",{..._,map:e()})),e().on("contextmenu",_=>H("contextmenu",{..._,map:e()})),e().on("zoomstart",_=>H("zoomstart",{..._,map:e()})),e().on("zoom",_=>{H("zoom",{..._,map:e()})}),e().on("zoomend",_=>{H("zoomend",{..._,map:e()})}),e().on("style.load",()=>{if(e()){const _=e().getStyle();if(T(ce,_.layers.map(S=>S.id)),T(ue,Object.keys(_.sources)),a(X))for(const[S,Z]of Object.entries(a(X)))e().addSource(S,Z);if(a(Le))for(const S of a(Le))e().addLayer(S);for(const S of ye())ke(S,!0)}}),e().on("styledata",_=>{if(e()&&Y()){const S=e().getStyle().layers;if(S)for(let Z of S)Y()(Z)||e().setLayoutProperty(Z.id,"visibility","none")}H("styledata",{..._,map:e()})}),{destroy(){var _;ee(!1),(_=e())==null||_.remove(),Re(ne,null)}}}let ze=W(M());function p(){if(se()){let g=mn(window.location.hash);g.length>=3&&(F(g[0]),P([g[2],g[1]])),g.length==5&&(J(g[3]),D(g[4]))}}B(()=>C(G()),()=>{T(o,typeof G()=="boolean"?void 0:G())}),B(()=>e(),()=>{l(e())}),B(()=>(e(),C(M()),a(ze),a(ce),a(ue),C(k())),()=>{if(e()&&!Ke(M(),a(ze))){const g=e().getStyle();if(a(ce)&&T(Le,g.layers.filter(_=>!a(ce).includes(_.id))),a(ue)){const _=Object.keys(g.sources).filter(S=>!a(ue).includes(S));T(X,{});for(const S of _)Jt(X,a(X)[S]=g.sources[S])}T(ze,M()),e().setStyle(M(),{diff:k()}),Re(pe,new Set),T(re,new Set)}}),B(()=>(C(ee()),e(),C(ye()),n(),a(re)),()=>{var g;if(ee()&&((g=e())!=null&&g.loaded()))for(let _ of ye())!n().has(_.id)&&!a(re).has(_.id)&&!e().hasImage(_.id)&&ke(_)}),B(()=>(C(ye()),n()),()=>{T(h,ye().every(g=>n().has(g.id)))}),B(()=>(e(),C(P()),C(F()),C(J()),C(D())),()=>{var g,_,S,Z;if(e()){let xe={};P()!=null&&!Ke(P(),(g=e())==null?void 0:g.getCenter())&&(xe.center=P()),F()!=null&&!Ke(F(),(_=e())==null?void 0:_.getZoom())&&(xe.zoom=F()),J()!=null&&!Ke(J(),(S=e())==null?void 0:S.getBearing())&&(xe.bearing=J()),D()!=null&&!Ke(D(),(Z=e())==null?void 0:Z.getPitch())&&(xe.pitch=D()),Object.keys(xe).length&&e().easeTo(xe)}}),B(()=>(C(V()),e()),()=>{var g,_;V()&&!Ke(V(),(g=e())==null?void 0:g.getBounds())&&((_=e())==null||_.fitBounds(V()))}),B(()=>(C(he()),e()),()=>{var g,_;he()?(g=e())==null||g.doubleClickZoom.enable():(_=e())==null||_.doubleClickZoom.disable()}),He(),Ze();var j=bn();Ia("hashchange",Sa,p);var Oe=c(j);z(Oe,()=>e()&&ee(),g=>{var _=xn(),S=U(_);z(S,G,xe=>{var $e=pn(),rt=U($e);hn(rt,{get position(){return a(o)}});var We=f(rt,2);fn(We,{get position(){return a(o)},fitBoundsOptions:{maxZoom:12}});var et=f(We,2);un(et,{get position(){return a(o)}});var ot=f(et,2);yn(ot,{get position(){return a(o)}}),b(xe,$e)});var Z=f(S,2);Ye(Z,t,"default",{get map(){return e()},get loadedImages(){return n()},get allImagesLoaded(){return a(h)}},null),b(g,_)}),i(j),Xt(j,g=>s(g),()=>s()),Aa(j,g=>De(g)),A(()=>{Ba(j,`${y()??""} svelte-p00lfq`),Qt(j,"expand-map",!y())}),b(r,j),we()}var Cn=O("<div><!></div>");function Kt(r,t){const m=za(t);Ce(t,!1);const e=Ue(),n=()=>ie(_e,"$popupTarget",e),o=()=>ie(te,"$map",e),h=()=>ie(Se,"$layer",e),l=()=>ie(ae,"$layerEvent",e),s=W(),y=W();let M=u(t,"closeButton",8,void 0),k=u(t,"closeOnClickOutside",8,!0),P=u(t,"closeOnClickInside",8,!1),F=u(t,"closeOnMove",8,!1),D=u(t,"openOn",8,"click"),J=u(t,"openIfTopMost",8,!0),V=u(t,"focusAfterOpen",8,!0),se=u(t,"anchor",8,void 0),Pe=u(t,"offset",8,void 0),ee=u(t,"popupClass",8,void 0),de=u(t,"maxWidth",8,void 0),K=u(t,"lngLat",12,void 0),ge=u(t,"html",8,void 0),N=u(t,"open",12,!1);const E=Ct(),{map:te,popupTarget:_e,layerEvent:ae,layer:Se,eventTopMost:he,markerClickManager:Te}=Xe(),Qe=["click","dblclick","contextmenu"];let L=W(),Ie=W(!1),$=W();function Ae(){if(!a(L))return;let p=a(L).getElement();!p||p===a($)||(T($,p),D()==="hover"&&Jt($,a($).style.pointerEvents="none"),a($).addEventListener("mouseenter",()=>{T(Ie,!0)},{passive:!0}),a($).addEventListener("mouseleave",()=>{T(Ie,!1)},{passive:!0}),a($).addEventListener("click",()=>{P()&&N(!1)},{passive:!0}))}$t(()=>{if(o())return o().on("click",ue),o().on("contextmenu",ue),Te.add(Le),typeof n()=="string"&&(o().on("click",n(),H),o().on("dblclick",n(),H),o().on("contextmenu",n(),H),o().on("mousemove",n(),ce),o().on("mouseleave",n(),ke),o().on("touchstart",n(),pe),o().on("touchend",n(),re)),()=>{var p,j;(p=o())!=null&&p.loaded()&&((j=a(L))==null||j.remove(),o().off("click",ue),o().off("contextmenu",ue),Te.remove(Le),n()instanceof me.Marker?n().getPopup()===a(L)&&n().setPopup(void 0):typeof n()=="string"&&(o().off("click",n(),H),o().off("dblclick",n(),H),o().off("contextmenu",n(),H),o().off("mousemove",n(),ce),o().off("mouseleave",n(),ke),o().off("touchstart",n(),pe),o().off("touchend",n(),re)))}});function ye(p){return J()?!("marker"in p)&&!sn(p)&&he(p)!==h():!1}let G=W(null),Y=W("normal");function Fe(p){"layerType"in p&&p.layerType==="deckgl"?(K(p.coordinate),T(G,p.object?[p.object]:null)):(K(p.lngLat),T(G,p.features??[]))}function H(p){p.type!==D()||ye(p)||(Fe(p),setTimeout(()=>N(!0)))}let ne=null;function pe(p){ne=p.point}function re(p){if(!ne||D()!=="hover")return;let j=ne.dist(p.point);ne=null,j<3&&(K(p.lngLat),T(G,p.features??[]),a(L).isOpen()?T(Y,"justOpened"):(T(Y,"opening"),N(!0)))}function ke(p){D()!=="hover"||ne||a(Y)!=="normal"||(N(!1),T(G,null))}function ce(p){if(!(D()!=="hover"||ne||a(Y)!=="normal")){if(ye(p)){N(!1),T(G,null);return}N(!0),T(G,p.features??[]),K(p.lngLat)}}function ue(p){var Oe;if(a(Y)==="justOpened"){T(Y,"normal");return}if(!k())return;let j=[a($),n()instanceof me.Marker?(Oe=n())==null?void 0:Oe.getElement():null];N()&&a(L).isOpen()&&!j.some(g=>g==null?void 0:g.contains(p.originalEvent.target))&&(p.type==="contextmenu"&&D()==="contextmenu"||p.type!=="contextmenu")&&N(!1)}function Le(p){k()&&N()&&a(L).isOpen()&&p.marker!==n()&&N(!1)}Je(()=>{var p;o()&&((p=a(L))!=null&&p.isOpen())&&a(L).remove()});let X=W();B(()=>(C(M()),C(k()),C(P())),()=>{T(s,M()??(!k()&&!P()))}),B(()=>(a(L),a(s),C(F()),C(V()),C(de()),C(ee()),C(se()),C(Pe())),()=>{a(L)||(T(L,new me.Popup({closeButton:a(s),closeOnClick:!1,closeOnMove:F(),focusAfterOpen:V(),maxWidth:de(),className:ee(),anchor:se(),offset:Pe()})),T($,a(L).getElement()),a(L).on("open",()=>{N(!0),Ae(),E("open",a(L))}),a(L).on("close",()=>{N(!1),E("close",a(L))}),a(L).on("hover",()=>{E("hover",a(L))}))}),B(()=>(a(L),n(),C(D())),()=>{a(L)&&n()instanceof me.Marker&&(D()==="click"?n().setPopup(a(L)):n().getPopup()===a(L)&&n().setPopup(void 0))}),B(()=>(C(D()),l()),()=>{var p;Qe.includes(D())&&((p=l())==null?void 0:p.type)===D()&&(H(l()),Re(ae,null))}),B(()=>(C(D()),l()),()=>{var p,j;T(y,D()==="hover"&&(((p=l())==null?void 0:p.type)==="mousemove"||((j=l())==null?void 0:j.type)==="mouseenter"))}),B(()=>(C(D()),a(y),l(),a(Ie)),()=>{D()==="hover"&&ae&&(a(y)&&l()&&Fe(l()),N((a(y)||a(Ie))??!1))}),B(()=>(a(X),a(L),C(ge())),()=>{a(X)?a(L).setDOMContent(a(X)):ge()&&a(L).setHTML(ge())}),B(()=>(C(K()),a(L)),()=>{K()&&a(L).setLngLat(K())}),B(()=>(o(),a(L),C(N()),a(Y)),()=>{if(o()){let p=a(L).isOpen();N()&&!p?(a(L).addTo(o()),a(Y)==="opening"&&T(Y,"justOpened")):!N()&&p&&a(L).remove()}}),He(),Ze();var De=le(),ze=U(De);z(ze,()=>m.default,p=>{var j=Cn(),Oe=c(j);z(Oe,()=>{var g;return((g=a(G))==null?void 0:g.length)||n()instanceof me.Marker},g=>{var _=le(),S=U(_);Ye(S,t,"default",{get features(){return a(G)},get data(){var Z;return((Z=a(G))==null?void 0:Z[0])??null},get map(){return o()},close:()=>N(!1)},null),b(g,_)}),i(j),Xt(j,g=>T(X,g),()=>a(X)),b(p,j)}),b(r,De),we()}var nt=Uint8Array,ta=Uint16Array,wn=Int32Array,kn=new nt([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Ln=new nt([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),aa=function(r,t){for(var m=new ta(31),e=0;e<31;++e)m[e]=t+=1<<r[e-1];for(var n=new wn(m[30]),e=1;e<30;++e)for(var o=m[e];o<m[e+1];++o)n[o]=o-m[e]<<5|e;return{b:m,r:n}},na=aa(kn,2),On=na.b,Mn=na.r;On[28]=258,Mn[258]=28;aa(Ln,0);var En=new ta(32768);for(I=0;I<32768;++I)Me=(I&43690)>>1|(I&21845)<<1,Me=(Me&52428)>>2|(Me&13107)<<2,Me=(Me&61680)>>4|(Me&3855)<<4,En[I]=((Me&65280)>>8|(Me&255)<<8)>>1;var Me,I,st=new nt(288);for(I=0;I<144;++I)st[I]=8;var I;for(I=144;I<256;++I)st[I]=9;var I;for(I=256;I<280;++I)st[I]=7;var I;for(I=280;I<288;++I)st[I]=8;var I,Pn=new nt(32);for(I=0;I<32;++I)Pn[I]=5;var I,Sn=new nt(0),Tn=typeof TextDecoder<"u"&&new TextDecoder,In=0;try{Tn.decode(Sn,{stream:!0}),In=1}catch{}var Dn=O('<dd class="svelte-1xtx7m"><a class="svelte-1xtx7m"> </a></dd>'),Rn=O('<section id="translations" class="svelte-1xtx7m"></section>'),An=O("<dd><a> </a></dd>"),zn=O("<dd> </dd>"),jn=O("<dd> </dd>"),Bn=O("<dd> </dd>"),Nn=O(" <!>",1),Hn=O("<dd> </dd>"),Un=O("<dd> </dd>"),Zn=O("<dd> </dd>"),Fn=O("<dd> </dd>"),Wn=O("<dd> <a> </a></dd>"),qn=O("<dd> </dd>"),Gn=O('<div class="popup"> </div>'),Vn=O("<dt>Map</dt> <dd><!></dd>",1),Kn=O("<p> </p>"),Yn=O('<div class="popup"> </div>'),Jn=O("<dt>Map</dt> <dd><!></dd>",1),Xn=O("<dl><dt>Place</dt> <dd> </dd> <dt>Repository</dt> <dd><a> </a><!></dd> <dt>Autopsy</dt> <dd> </dd> <!></dl>"),Qn=O("<li><!></li>"),$n=O("<li><!></li>"),er=O('<dt>Printed editions</dt> <dd><ul class="bibliography-list"></ul></dd>',1),tr=O('<article class="svelte-1xtx7m"><section id="overview" class="svelte-1xtx7m"><div class="overview-header svelte-1xtx7m"><h1 class="inscription-title svelte-1xtx7m"> </h1> <!></div> <figure id="facsimile-images" class="svelte-1xtx7m"><section id="image-viewer" style="height: 50vh; width: 100%;"></section> <figcaption class="svelte-1xtx7m"> </figcaption></figure> <dl class="svelte-1xtx7m"><dt class="svelte-1xtx7m">Language</dt> <dd class="svelte-1xtx7m"> </dd> <dt class="svelte-1xtx7m">Text type</dt> <dd class="svelte-1xtx7m"><a class="svelte-1xtx7m"> </a></dd> <dt class="svelte-1xtx7m">Object type</dt> <!> <dt class="svelte-1xtx7m">ID</dt> <dd class="svelte-1xtx7m"> </dd> <dt class="svelte-1xtx7m">Status</dt> <dd class="svelte-1xtx7m"> </dd> <dt class="svelte-1xtx7m">Links</dt> <dd class="svelte-1xtx7m"><a target="inscription" class="svelte-1xtx7m">View in current site <!></a></dd></dl></section> <section id="content" class="svelte-1xtx7m"><section id="edition" class="svelte-1xtx7m"><h2 class="svelte-1xtx7m">Edition</h2> <!></section> <section id="apparatus" class="svelte-1xtx7m"><!></section> <!> <section id="physical-description" class="svelte-1xtx7m"><h2 class="svelte-1xtx7m">Physical description</h2> <h3 class="svelte-1xtx7m">Support</h3> <dl><dt>Description</dt> <dd> </dd> <dt>Object type</dt> <!> <dt>Material</dt> <dd><a> </a></dd> <dt>Condition</dt> <!> <dt>Dimensions</dt> <dd></dd></dl> <h3 class="svelte-1xtx7m">Inscription</h3> <dl><dt>Layout</dt> <dd> </dd> <dt>Text condition</dt> <!> <dt>Lettering</dt> <dd> </dd> <dt>Letter heights</dt> <!> <dt>Interlinear heights</dt> <!></dl></section> <section id="provenance" class="svelte-1xtx7m"><h2 class="svelte-1xtx7m">Provenance</h2> <dl><dt>Place of origin</dt> <!> <dt>Provenance found</dt> <dd> </dd> <!></dl></section> <section id="current-location" class="svelte-1xtx7m"><h2 class="svelte-1xtx7m">Current location</h2> <!></section> <section id="date" class="svelte-1xtx7m"><h2 class="svelte-1xtx7m">Date</h2> <!> <dl><dt>Evidence</dt> <dd> </dd></dl></section> <section id="text-type" class="svelte-1xtx7m"><h2 class="svelte-1xtx7m">Text type</h2> <p><a> </a></p></section> <section id="commentary" class="svelte-1xtx7m"><!></section> <section id="bibliography" class="svelte-1xtx7m"><h2 class="svelte-1xtx7m">Bibliography</h2> <dl><dt>Digital editions</dt> <dd><ul></ul></dd> <!></dl></section> <section id="citation-and-status" class="svelte-1xtx7m"><h2 class="svelte-1xtx7m">Citation and editorial status</h2> <dl><dt>Citation</dt> <dd> </dd></dl></section></section></article>');function pr(r,t){Ce(t,!0);let{slug:m,metadata:e,images:n,html:o}=t.data,h=Zt(Da(n[0].desc));const l=o.divs.find(v=>v.id==="edition"),s=o.divs.find(v=>v.id==="apparatus"),y=o.divs.filter(v=>v.id==="translation"),M=o.divs.find(v=>v.id==="commentary");let k=n.map(v=>`${Ua}${m}/${v.url}/info.json`),P,F=Zt(!1);$t(async()=>{P=(await pa(async()=>{const{default:d}=await import("../chunks/openseadragon.CKpNC7as.js").then(x=>x.o);return{default:d}},__vite__mapDeps([0,1,2,3,4,5,6]),import.meta.url)).default,P({id:"image-viewer",prefixUrl:`${Ha}/openseadragon/images/`,tileSources:k,sequenceMode:!0,showReferenceStrip:!0,preserveViewport:!0}).addHandler("page",function(d){const x=n[d.page];T(h,`${x.surfaceType}, ${x.desc}`)})});var D=tr(),J=c(D),V=c(J),se=c(V),Pe=c(se);i(se);var ee=f(se,2);Ra(ee,()=>ja,(v,d)=>{d(v,{class:"expand-button surface-1",onclick:()=>T(F,!a(F)),children:(x,R)=>{var q=le(),Q=U(q);z(Q,()=>a(F),fe=>{qa(fe,{})},fe=>{Wa(fe,{})}),b(x,q)},$$slots:{default:!0}})}),i(V);var de=f(V,2),K=f(c(de),2),ge=c(K,!0);i(K),i(de);var N=f(de,2),E=f(c(N),2),te=c(E,!0);i(E);var _e=f(E,4),ae=c(_e),Se=c(ae,!0);i(ae),i(_e);var he=f(_e,4);z(he,()=>e.objectType,v=>{var d=Dn(),x=c(d),R=c(x,!0);i(x),i(d),A(()=>{oe(x,"href",e.objectType.ref),w(R,e.objectType._)}),b(v,d)});var Te=f(he,4),Qe=c(Te,!0);i(Te);var L=f(Te,4),Ie=c(L,!0);i(L);var $=f(L,4),Ae=c($),ye=f(c(Ae));Fa(ye,{}),i(Ae),i($),i(N),i(J);var G=f(J,2),Y=c(G),Fe=f(c(Y),2);tt(Fe,()=>l.html),i(Y);var H=f(Y,2),ne=c(H);tt(ne,()=>s.html),i(H);var pe=f(H,2);z(pe,()=>y.length,v=>{var d=Rn();Ge(d,21,()=>y,Ve,(x,R)=>{var q=le(),Q=U(q);tt(Q,()=>a(R).html),b(x,q)}),i(d),b(v,d)});var re=f(pe,2),ke=f(c(re),4),ce=f(c(ke),2),ue=c(ce,!0);i(ce);var Le=f(ce,4);z(Le,()=>e.objectType,v=>{var d=An(),x=c(d),R=c(x,!0);i(x),i(d),A(()=>{oe(x,"href",e.objectType.ref),w(R,e.objectType._)}),b(v,d)},v=>{var d=zn(),x=c(d,!0);i(d),A(()=>w(x,ve)),b(v,d)});var X=f(Le,4),De=c(X),ze=c(De,!0);i(De),i(X);var p=f(X,4);z(p,()=>{var v;return(v=e.condition)==null?void 0:v.ana},v=>{var d=jn(),x=c(d,!0);A(()=>w(x,e.condition.ana.split(".").slice(1).join(", "))),i(d),b(v,d)},v=>{var d=Bn(),x=c(d,!0);i(d),A(()=>w(x,e.condition._||ve)),b(v,d)});var j=f(p,4);Ge(j,21,()=>e.dimensions,Ve,(v,d,x)=>{Ta();var R=Nn(),q=U(R),Q=f(q);z(Q,()=>x<e.dimensions.length-1,fe=>{var je=at(",Â ");b(fe,je)}),A(()=>w(q,`${a(d).dimension??""}: ${a(d)._??""}
						${a(d).unit??""}`)),b(v,R)}),i(j),i(ke);var Oe=f(ke,4),g=f(c(Oe),2),_=c(g,!0);i(g);var S=f(g,4);z(S,()=>e.layoutDesc.layout.damage.ana,v=>{var d=Hn(),x=c(d,!0);A(()=>w(x,e.layoutDesc.layout.damage.ana.split(".").slice(1).join(", "))),i(d),b(v,d)},v=>{var d=Un(),x=c(d,!0);i(d),A(()=>w(x,e.layoutDesc.layout.damage._||ve)),b(v,d)});var Z=f(S,4),xe=c(Z,!0);i(Z);var $e=f(Z,4);Ge($e,17,()=>e.handNote.dimensions.filter(v=>(v==null?void 0:v.type)==="letterHeight"),Ve,(v,d)=>{var x=Zn(),R=c(x);i(x),A(()=>w(R,`${a(d).l??""}: ${a(d).h??""}${a(d).unit??""}`)),b(v,x)});var rt=f($e,4);Ge(rt,17,()=>e.handNote.dimensions.filter(v=>(v==null?void 0:v.type)==="interlinear"),Ve,(v,d)=>{var x=Fn(),R=c(x);i(x),A(()=>w(R,`${a(d).l??""}: ${a(d).h??""}${(a(d).h!=="not measured"?a(d).unit:"")??""}`)),b(v,x)}),i(Oe),i(re);var We=f(re,2),et=f(c(We),2),ot=f(c(et),2);z(ot,()=>e.places.length,v=>{var d=Wn(),x=c(d),R=f(x),q=c(R,!0);i(R),i(d),A(()=>{w(x,`${(e.places[0].offset||"")??""} `),oe(R,"href",e.places[0].ref),w(q,e.places[0]._)}),b(v,d)},v=>{var d=qn(),x=c(d,!0);i(d),A(()=>w(x,ve)),b(v,d)});var dt=f(ot,4),ra=c(dt,!0);i(dt);var oa=f(dt,2);z(oa,()=>{var v;return(v=e.provenanceFound)==null?void 0:v.geo},v=>{var d=Vn();const x=lt(()=>[e.provenanceFound.geo[1],e.provenanceFound.geo[0]]);var R=f(U(d),2),q=c(R);Vt(q,{get center(){return a(x)},zoom:7,class:"map",standardControls:!0,get style(){return Ft},children:(Q,fe)=>{qt(Q,{get lngLat(){return a(x)},children:(je,qe)=>{Kt(je,{offset:[0,-10],children:(Be,it)=>{var be=Gn(),Ne=c(be,!0);i(be),A(()=>w(Ne,e.provenanceFound._)),b(Be,be)},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}}),i(R),b(v,d)}),i(et),i(We);var ct=f(We,2),ia=f(c(ct),2);z(ia,()=>e.provenanceLost,v=>{var d=Kn(),x=c(d,!0);i(d),A(()=>w(x,e.provenanceLost._)),b(v,d)},v=>{var d=Xn(),x=f(c(d),2),R=c(x);i(x);var q=f(x,4),Q=c(q),fe=c(Q,!0);i(Q);var je=f(Q);z(je,()=>e.idno,be=>{var Ne=at();A(()=>w(Ne,`,
							${e.idno._??""}`)),b(be,Ne)}),i(q);var qe=f(q,4),Be=c(qe,!0);i(qe);var it=f(qe,2);z(it,()=>e.repository.museum.location.geo,be=>{var Ne=Jn();const At=lt(()=>[e.repository.museum.location.geo.lon,e.repository.museum.location.geo.lat]);var zt=f(U(Ne),2),fa=c(zt);Vt(fa,{get center(){return a(At)},zoom:7,class:"map",standardControls:!0,get style(){return Ft},children:(va,nr)=>{qt(va,{get lngLat(){return a(At)},children:(ma,rr)=>{Kt(ma,{offset:[0,-10],children:(ga,or)=>{var ht=Yn(),_a=c(ht,!0);i(ht),A(()=>w(_a,e.repository.museum.name)),b(ga,ht)},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}}),i(zt),b(be,Ne)}),i(d),A(()=>{var be;w(R,`${e.settlement??""}, ${e.country??""}`),oe(Q,"href",e.repository.ref),w(fe,e.repository._),w(Be,((be=e.provenanceObserved)==null?void 0:be._)||ve)}),b(v,d)}),i(ct);var ut=f(ct,2),Ot=f(c(ut),2);Na(Ot,{inscription:e});var Mt=f(Ot,2),Et=f(c(Mt),2),la=c(Et,!0);i(Et),i(Mt),i(ut);var ft=f(ut,2),Pt=f(c(ft),2),vt=c(Pt),sa=c(vt,!0);i(vt),i(Pt),i(ft);var mt=f(ft,2),da=c(mt);tt(da,()=>M.html),i(mt);var gt=f(mt,2),St=f(c(gt),2),_t=f(c(St),2),Tt=c(_t);Ge(Tt,21,()=>e.editions,Ve,(v,d)=>{var x=Qn(),R=c(x);an(R,{get edition(){return a(d)}}),i(x),b(v,x)}),i(Tt),i(_t);var ca=f(_t,2);z(ca,()=>{var v,d;return(d=(v=e.bibliographyEdition)==null?void 0:v.bibl)==null?void 0:d.length},v=>{var d=er(),x=f(U(d),2),R=c(x);Ge(R,21,()=>e.bibliographyEdition.bibl,Ve,(q,Q)=>{var fe=le(),je=U(fe);z(je,()=>a(Q),qe=>{var Be=$n(),it=c(Be);en(it,{get entry(){return a(Q)}}),i(Be),b(qe,Be)}),b(q,fe)}),i(R),i(x),b(v,d)}),i(St),i(gt);var It=f(gt,2),Dt=f(c(It),2),Rt=f(c(Dt),2),ua=c(Rt,!0);i(Rt),i(Dt),i(It),i(G),i(D),A(()=>{var v;Qt(D,"expanded",a(F)),w(Pe,`${e.file??""}: ${e.title??""}`),w(ge,a(h)),w(te,e.textLang._),oe(ae,"href",e.type.ref),w(Se,e.type._),w(Qe,e.file),w(Ie,e.status),oe(Ae,"href",`${Za}inscription/${m??""}`),w(ue,e.support||ve),oe(De,"href",e.material.ref),w(ze,e.material._),w(_,e.layoutDesc.layout.p||ve),w(xe,e.handNote.lettering||ve),w(ra,((v=e.provenanceFound)==null?void 0:v._)||ve),w(la,e.evidence||ve),oe(vt,"href",e.type.ref),w(sa,e.type._),w(ua,e.citation||ve)}),b(r,D),we()}export{pr as component};
