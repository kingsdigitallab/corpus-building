const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["../chunks/openseadragon.CtDNE41u.js","../chunks/maplibre-gl.BTuv7Yai.js","../chunks/utils.dzgPpf3o.js","../chunks/disclose-version.yxoevJ6J.js","../assets/maplibre-gl.CuCRB34y.css"])))=>i.map(i=>d[i]);
var Yt=Object.defineProperty;var Kt=(o,t,h)=>t in o?Yt(o,t,{enumerable:!0,configurable:!0,writable:!0,value:h}):o[t]=h;var Lt=(o,t,h)=>Kt(o,typeof t!="symbol"?t+"":t,h);import{_ as Xt}from"../chunks/preload-helper.C1FmrZbK.js";import{w as Mt,x as Jt,e as Pe,a as k,d as et,t as M,b as w,s as Ue,y as Te,c as oe,z as Qt}from"../chunks/disclose-version.yxoevJ6J.js";import{h as $t,k as Et,m as St,j as ea,q as Tt,a7 as ta,aN as aa,aM as na,N as ra,a1 as oa,a0 as ia,p as ye,f as F,e as u,r as s,t as A,s as v,d as pe,aR as da,aS as Rt,aT as q,aU as Ze,C as b,g as a,aV as H,v as I,aW as la,aX as At,D as vt,K as sa,n as Pt}from"../chunks/utils.dzgPpf3o.js";import{i as U,p as c,b as jt,a as ca}from"../chunks/props.BxeGn5nG.js";import{s as re,a as mt,c as ua,d as fa,e as Ge,i as Ye}from"../chunks/attributes.DJj9jQYP.js";import{c as gt,a as Xe,o as qt}from"../chunks/index-client.DkxbLtkQ.js";import{w as Le,r as ut,b as va}from"../chunks/paths.BVX8s1hF.js";import{m as ve,s as ma,t as ga,I as _a}from"../chunks/maplibre-gl.BTuv7Yai.js";import{d as ft,i as ha,m as ya,E as fe,p as pa}from"../chunks/config.xn5Jidz-.js";import{i as He}from"../chunks/legacy.C6KA_5n4.js";function $e(o,t,h,e,r){var n=o,x="",l;$t(()=>{if(x===(x=t()??"")){Et&&St();return}l!==void 0&&(ia(l),l=void 0),x!==""&&(l=ea(()=>{if(Et){Tt.data;for(var i=St(),_=i;i!==null&&(i.nodeType!==8||i.data!=="");)_=i,i=ta(i);if(i===null)throw aa(),na;Mt(Tt,_),n=ra(i);return}var L=x+"",C=Jt(L);Mt(oa(C),C.lastChild),n.before(C)}))})}var xa=M("<!><!>",1),ba=M("<span> </span>"),ka=M("<span> </span>"),Ca=M("at <a> </a>",1),wa=M("at <span> </span>",1),Oa=M("<a>Zotero</a>"),La=M("<a>FAIR</a>"),Ma=M("<!> <!> <!> <!>",1);function Ea(o,t){ye(t,!0);var h=Ma(),e=F(h);U(e,()=>t.entry.citation,l=>{var i=xa(),_=F(i);$e(_,()=>t.entry.citation);var L=v(_);U(L,()=>t.entry.citedRange,C=>{var E=et(",");k(C,E)},C=>{var E=et(".");k(C,E)}),k(l,i)},l=>{var i=Pe(),_=F(i);U(_,()=>t.entry.type==="bulletin"||t.entry.type==="corpus",L=>{var C=ba(),E=u(C);s(C),A(()=>w(E,`${t.entry.n??""} ${(t.entry.author?`${t.entry.author} (${t.entry.date})`:"")??""}`)),k(L,C)},L=>{var C=ka(),E=u(C);s(C),A(()=>w(E,`${t.entry.author??""} (${t.entry.date??""})`)),k(L,C)},!0),k(l,i)});var r=v(e,2);U(r,()=>{var l;return typeof t.entry.citedRange=="object"&&((l=t.entry.citedRange)==null?void 0:l.ref)},l=>{var i=Ca(),_=v(F(i)),L=u(_,!0);s(_),A(()=>{re(_,"href",t.entry.citedRange.ref.target),w(L,t.entry.citedRange.ref._)}),k(l,i)},l=>{var i=Pe(),_=F(i);U(_,()=>t.entry.citedRange,L=>{var C=wa(),E=v(F(C)),N=u(E,!0);s(E),A(()=>w(N,t.entry.citedRange)),k(L,C)},null,!0),k(l,i)});var n=v(r,2);U(n,()=>{var l;return(l=t.entry.ptr)==null?void 0:l.target},l=>{var i=Oa();A(()=>{var _;return re(i,"href",(_=t.entry.ptr)==null?void 0:_.target)}),k(l,i)});var x=v(n,2);U(x,()=>{var l;return(l=t.entry.ref)==null?void 0:l.target},l=>{var i=La();A(()=>re(i,"href",t.entry.ref.target)),k(l,i)}),k(o,h),pe()}const _t=Symbol.for("svelte-maplibre");function Je(){return da(_t)}function Sa(o){let t=new WeakMap;return h=>{var x;let e=t.get(h.originalEvent);if(e!==void 0)return e;let n=(x=h.target.queryRenderedFeatures(h.point).find(l=>{var i;return(i=o.get(l.layer.id))==null?void 0:i.interactive}))==null?void 0:x.layer.id;return t.set(h.originalEvent,n),n}}function Ta(){let o=new Map;return Rt(_t,{map:Le(null),source:ut(null),layer:ut(null),popupTarget:ut(null),cluster:Le(),loadedImages:Le(new Set),minzoom:Le(0),maxzoom:Le(24),layerEvent:Le(null),layerInfo:o,eventTopMost:Sa(o),markerClickManager:new Ra})}function It(o){return{subscribe:o.subscribe}}function Pa({key:o,setPopupTarget:t=!1,setCluster:h=!1,setMouseEvent:e=!1}){let r=Je(),n=Le(null),x=It(n),l={...r,[o]:It(n)};if(t&&(l.popupTarget=x),e){let i=Le(null);l.layerEvent=i,r.layerEvent=i}return h&&(l.cluster=Le()),Rt(_t,l),{...r,self:n}}function Ia(){return Pa({key:"popupTarget",setPopupTarget:!0,setMouseEvent:!0})}function Da(o){return"layerType"in o&&o.layerType==="deckgl"}class Ra{constructor(){Lt(this,"_handlers",new Set)}add(t){this._handlers.add(t)}remove(t){this._handlers.delete(t)}handleClick(t){for(const h of this._handlers)h(t)}}var Bt=Aa;function Aa(o){var t,h,e;if(o){if(Array.isArray(o)){for(t=[],h=o.length,e=0;e<h;e++){var r=o[e];r!=null&&t.push(r)}return t}if(typeof o=="object"){t={};var n=Object.keys(o);for(h=n.length,e=0;e<h;e++){var x=n[e],l=o[x];l!=null&&(t[x]=l)}return t}}}function ja(o,t){ye(t,!1);const h=Ue(),e=()=>oe(J,"$marker",h),r=()=>oe(D,"$map",h);let n=c(t,"marker",12,void 0),x=c(t,"lngLat",12),l=c(t,"class",8,void 0),i=c(t,"draggable",8,!1),_=c(t,"feature",8,null),L=c(t,"offset",8,void 0),C=c(t,"rotation",8,0),E=c(t,"opacity",8,1);const N=gt(),{map:D,layerEvent:V,self:J}=Ia(),ie=()=>Y("dragstart"),xe=()=>{be(),Y("drag")},G=()=>{be(),Y("dragend")};Te(J,new ve.Marker(Bt({draggable:i(),rotation:C(),className:l(),offset:L(),opacity:E().toString()})).setLngLat(x()).addTo(r())),n(e()),i()&&(e().on("dragstart",ie),e().on("drag",xe),e().on("dragend",G)),Xe(()=>{var S;n(void 0),(S=e())==null||S.remove()});function be(){var ee;let S=(ee=e())==null?void 0:ee.getLngLat();S&&(Array.isArray(x())?x([S.lng,S.lat]):x()&&"lon"in x()?x({lon:S.lng,lat:S.lat}):x(S))}function Y(S){var Me,se;let ee=(Me=e())==null?void 0:Me.getLngLat();if(!ee)return;const me=[ee.lng,ee.lat];let le={map:r(),marker:e(),lngLat:me,features:[{type:"Feature",properties:((se=_())==null?void 0:se.properties)??{},geometry:{type:"Point",coordinates:me}}]};Te(V,{...le,layerType:"marker",type:S}),N(S,le)}q(()=>(e(),b(x())),()=>{var S;(S=e())==null||S.setLngLat(x())}),q(()=>(e(),b(L())),()=>{var S;(S=e())==null||S.setOffset(L()??[0,0])}),q(()=>(e(),b(C())),()=>{var S;(S=e())==null||S.setRotation(C())}),q(()=>(e(),b(E())),()=>{var S;(S=e())==null||S.setOpacity(E().toString())}),Ze(),He();var de=Pe(),B=F(de);mt(B,t,"default",{get marker(){return e()}},null),k(o,de),pe()}function qa(o,t){ye(t,!1);const h=Ue(),e=()=>oe(r,"$map",h),{map:r}=Je();let n=c(t,"position",8,"top-left"),x=c(t,"container",8,void 0),l=H(null);Xe(()=>{var i;(i=e())!=null&&i.loaded()&&a(l)&&e().removeControl(a(l))}),q(()=>(e(),a(l),b(x()),b(n())),()=>{if(e()&&!a(l)){let i;typeof x()=="string"?i=document.querySelector(x())??void 0:i=x(),I(l,new ve.FullscreenControl({container:i})),e().addControl(a(l),n())}}),Ze(),He(),pe()}function Ba(o,t){ye(t,!1);const h=Ue(),e=()=>oe(r,"$map",h),{map:r}=Je();let n=c(t,"position",8,"top-left"),x=c(t,"positionOptions",8,void 0),l=c(t,"fitBoundsOptions",8,void 0),i=c(t,"trackUserLocation",8,!1),_=c(t,"showAccuracyCircle",8,!0),L=c(t,"showUserLocation",8,!0),C=c(t,"control",12,null);Xe(()=>{var E;(E=e())!=null&&E.loaded()&&C()&&e().removeControl(C())}),q(()=>(e(),b(C()),b(x()),b(l()),b(i()),b(_()),b(L()),b(n())),()=>{e()&&!C()&&(C(new ve.GeolocateControl({positionOptions:x(),fitBoundsOptions:l(),trackUserLocation:i(),showAccuracyCircle:_(),showUserLocation:L()})),e().addControl(C(),n()))}),Ze(),He(),pe()}function za(o){let t=o.getCenter(),h=Math.round(o.getZoom()*100)/100,e=Math.ceil((h*Math.LN2+Math.log(512/360/.5))/Math.LN10),r=Math.pow(10,e),n=Math.round(t.lat*r)/r,x=Math.round(t.lng*r)/r,l=`${h}/${n}/${x}`,i=o.getBearing(),_=o.getPitch();return(i||_)&&(l+=`/${Math.round(i*10)/10}`),_&&(l+=`/${Math.round(_)}`),`#${l}`}function Ua(o){return o.replace("#","").split("/").map(parseFloat)}var Ke=ht;function ht(o,t){return o===t||o!==o&&t!==t?!0:typeof o!=typeof t||{}.toString.call(o)!={}.toString.call(t)||o!==Object(o)||!o?!1:Array.isArray(o)?Dt(o,t):{}.toString.call(o)=="[object Set]"?Dt(Array.from(o),Array.from(t)):{}.toString.call(o)=="[object Object]"?Ha(o,t):Za(o,t)}function Za(o,t){return o.toString()===t.toString()}function Dt(o,t){var h=o.length;if(h!=t.length)return!1;for(var e=0;e<h;e++)if(!ht(o[e],t[e]))return!1;return!0}function Ha(o,t){var h=Object.keys(o),e=h.length;if(e!=Object.keys(t).length)return!1;for(var r=0;r<e;r++){var n=h[r];if(!(t.hasOwnProperty(n)&&ht(o[n],t[n])))return!1}return!0}function Na(o,t){ye(t,!1);const h=Ue(),e=()=>oe(r,"$map",h),{map:r}=Je();let n=c(t,"position",8,"top-left"),x=c(t,"showCompass",8,!0),l=c(t,"showZoom",8,!0),i=c(t,"visualizePitch",8,!1),_=H(null);Xe(()=>{var L;(L=e())!=null&&L.loaded()&&a(_)&&e().removeControl(a(_))}),q(()=>(e(),a(_),b(x()),b(l()),b(i()),b(n())),()=>{e()&&!a(_)&&(I(_,new ve.NavigationControl({showCompass:x(),showZoom:l(),visualizePitch:i()})),e().addControl(a(_),n()))}),Ze(),He(),pe()}function Wa(o,t){ye(t,!1);const h=Ue(),e=()=>oe(r,"$map",h),{map:r}=Je();let n=c(t,"position",8,"bottom-left"),x=c(t,"maxWidth",8,void 0),l=c(t,"unit",8,"metric"),i=H(null);Xe(()=>{var _;(_=e())!=null&&_.loaded()&&a(i)&&e().removeControl(a(i))}),q(()=>(e(),a(i),b(x()),b(l()),b(n())),()=>{e()&&!a(i)&&(I(i,new ve.ScaleControl({maxWidth:x(),unit:l()})),e().addControl(a(i),n()))}),Ze(),He(),pe()}var Fa=M("<!> <!> <!> <!>",1),Va=M("<!> <!>",1),Ga=M('<div data-testid="map-container"><!></div>');function Ya(o,t){ye(t,!1);const h=Ue(),e=()=>oe($,"$mapInstance",h),r=()=>oe(Ce,"$loadedImages",h),n=H(),x=H();let l=c(t,"map",12,null),i=c(t,"mapContainer",12,void 0),_=c(t,"class",8,void 0),L=c(t,"style",8),C=c(t,"diffStyleUpdates",8,!1),E=c(t,"center",12,void 0),N=c(t,"zoom",12,void 0),D=c(t,"pitch",12,0),V=c(t,"bearing",12,0),J=c(t,"bounds",12,void 0),ie=c(t,"hash",8,!1),xe=c(t,"updateHash",8,m=>{window.history.replaceState(window.history.state,"",m)}),G=c(t,"loaded",12,!1),be=c(t,"minZoom",8,0),Y=c(t,"maxZoom",8,22),de=c(t,"minPitch",8,0),B=c(t,"maxPitch",8,60),S=c(t,"renderWorldCopies",8,void 0),ee=c(t,"dragPan",8,void 0),me=c(t,"dragRotate",8,void 0),le=c(t,"pitchWithRotate",8,void 0),Me=c(t,"antialias",8,void 0),se=c(t,"zoomOnDoubleClick",8,!0),Ne=c(t,"locale",8,void 0),Ie=c(t,"interactive",8,!0),O=c(t,"attributionControl",8,!0),ke=c(t,"cooperativeGestures",8,!1),K=c(t,"preserveDrawingBuffer",8,!1),De=c(t,"maxBounds",8,void 0),ce=c(t,"images",24,()=>[]),W=c(t,"standardControls",8,!1),Q=c(t,"filterLayers",8,void 0),Re=c(t,"transformRequest",8,void 0);const z=gt(),{map:$,loadedImages:Ce}=Ta();let ue=H(new Set);async function Ee(m,g=!1){var T;if(e()&&!(!e().loaded()&&!g))if("url"in m){a(ue).add(m.id);try{let Z=await e().loadImage(m.url);(T=e())==null||T.addImage(m.id,Z.data,m.options),r().add(m.id),Te(Ce,r())}catch(Z){z("error",Z)}finally{a(ue).delete(m.id)}}else e().addImage(m.id,m.data,m.options),r().add(m.id),Te(Ce,r())}let ge=H(void 0),ne=H(void 0),_e=H(void 0),te=H(void 0);function Ae(m){return y(),Te($,new ve.Map(Bt({container:m,style:L(),locale:Ne(),center:E(),zoom:N(),pitch:D(),bearing:V(),minZoom:be(),maxZoom:Y(),minPitch:de(),maxPitch:B(),renderWorldCopies:S(),dragPan:ee(),dragRotate:me(),pitchWithRotate:le(),antialias:Me(),interactive:Ie(),preserveDrawingBuffer:K(),maxBounds:De(),bounds:J(),attributionControl:O(),transformRequest:Re(),cooperativeGestures:ke()}))),e().on("load",g=>{g.target.getContainer().setAttribute("data-testid","map"),g.target.getCanvas().setAttribute("data-testid","map-canvas"),G(!0),z("load",e())}),e().on("error",g=>z("error",{...g,map:e()})),e().on("movestart",g=>z("movestart",{...g,map:e()})),e().on("moveend",g=>{if(E(g.target.getCenter()),N(g.target.getZoom()),D(g.target.getPitch()),V(g.target.getBearing()),J(g.target.getBounds()),z("moveend",{...g,map:e()}),ie()){let T=new URL(window.location.href.replace(/(#.+)?$/,za(e())));xe()(T)}}),e().on("click",g=>z("click",{...g,map:e()})),e().on("dblclick",g=>z("dblclick",{...g,map:e()})),e().on("contextmenu",g=>z("contextmenu",{...g,map:e()})),e().on("zoomstart",g=>z("zoomstart",{...g,map:e()})),e().on("zoom",g=>{z("zoom",{...g,map:e()})}),e().on("zoomend",g=>{z("zoomend",{...g,map:e()})}),e().on("style.load",()=>{if(e()){const g=e().getStyle();if(I(ge,g.layers.map(T=>T.id)),I(ne,Object.keys(g.sources)),a(te))for(const[T,Z]of Object.entries(a(te)))e().addSource(T,Z);if(a(_e))for(const T of a(_e))e().addLayer(T);for(const T of ce())Ee(T,!0)}}),e().on("styledata",g=>{if(e()&&Q()){const T=e().getStyle().layers;if(T)for(let Z of T)Q()(Z)||e().setLayoutProperty(Z.id,"visibility","none")}z("styledata",{...g,map:e()})}),{destroy(){var g;G(!1),(g=e())==null||g.remove(),Te($,null)}}}let we=H(L());function y(){if(ie()){let m=Ua(window.location.hash);m.length>=3&&(N(m[0]),E([m[2],m[1]])),m.length==5&&(V(m[3]),D(m[4]))}}q(()=>b(W()),()=>{I(n,typeof W()=="boolean"?void 0:W())}),q(()=>e(),()=>{l(e())}),q(()=>(e(),b(L()),a(we),a(ge),a(ne),b(C())),()=>{if(e()&&!Ke(L(),a(we))){const m=e().getStyle();if(a(ge)&&I(_e,m.layers.filter(g=>!a(ge).includes(g.id))),a(ne)){const g=Object.keys(m.sources).filter(T=>!a(ne).includes(T));I(te,{});for(const T of g)At(te,a(te)[T]=m.sources[T])}I(we,L()),e().setStyle(L(),{diff:C()}),Te(Ce,new Set),I(ue,new Set)}}),q(()=>(b(G()),e(),b(ce()),r(),a(ue)),()=>{var m;if(G()&&((m=e())!=null&&m.loaded()))for(let g of ce())!r().has(g.id)&&!a(ue).has(g.id)&&!e().hasImage(g.id)&&Ee(g)}),q(()=>(b(ce()),r()),()=>{I(x,ce().every(m=>r().has(m.id)))}),q(()=>(e(),b(E()),b(N()),b(V()),b(D())),()=>{var m,g,T,Z;if(e()){let he={};E()!=null&&!Ke(E(),(m=e())==null?void 0:m.getCenter())&&(he.center=E()),N()!=null&&!Ke(N(),(g=e())==null?void 0:g.getZoom())&&(he.zoom=N()),V()!=null&&!Ke(V(),(T=e())==null?void 0:T.getBearing())&&(he.bearing=V()),D()!=null&&!Ke(D(),(Z=e())==null?void 0:Z.getPitch())&&(he.pitch=D()),Object.keys(he).length&&e().easeTo(he)}}),q(()=>(b(J()),e()),()=>{var m,g;J()&&!Ke(J(),(m=e())==null?void 0:m.getBounds())&&((g=e())==null||g.fitBounds(J()))}),q(()=>(b(se()),e()),()=>{var m,g;se()?(m=e())==null||m.doubleClickZoom.enable():(g=e())==null||g.doubleClickZoom.disable()}),Ze(),He();var j=Ga();Qt("hashchange",la,y);var Se=u(j);U(Se,()=>e()&&G(),m=>{var g=Va(),T=F(g);U(T,W,he=>{var at=Fa(),We=F(at);Na(We,{get position(){return a(n)}});var nt=v(We,2);Ba(nt,{get position(){return a(n)},fitBoundsOptions:{maxZoom:12}});var Fe=v(nt,2);qa(Fe,{get position(){return a(n)}});var rt=v(Fe,2);Wa(rt,{get position(){return a(n)}}),k(he,at)});var Z=v(T,2);mt(Z,t,"default",{get map(){return e()},get loadedImages(){return r()},get allImagesLoaded(){return a(x)}},null),k(m,g)}),s(j),jt(j,m=>i(m),()=>i()),ua(j,m=>Ae(m)),A(()=>{ma(j,`${_()??""} svelte-p00lfq`),ga(j,"expand-map",!_())}),k(o,j),pe()}var Ka=M("<div><!></div>");function Xa(o,t){const h=fa(t);ye(t,!1);const e=Ue(),r=()=>oe(me,"$popupTarget",e),n=()=>oe(ee,"$map",e),x=()=>oe(Me,"$layer",e),l=()=>oe(le,"$layerEvent",e),i=H(),_=H();let L=c(t,"closeButton",8,void 0),C=c(t,"closeOnClickOutside",8,!0),E=c(t,"closeOnClickInside",8,!1),N=c(t,"closeOnMove",8,!1),D=c(t,"openOn",8,"click"),V=c(t,"openIfTopMost",8,!0),J=c(t,"focusAfterOpen",8,!0),ie=c(t,"anchor",8,void 0),xe=c(t,"offset",8,void 0),G=c(t,"popupClass",8,void 0),be=c(t,"maxWidth",8,void 0),Y=c(t,"lngLat",12,void 0),de=c(t,"html",8,void 0),B=c(t,"open",12,!1);const S=gt(),{map:ee,popupTarget:me,layerEvent:le,layer:Me,eventTopMost:se,markerClickManager:Ne}=Je(),Ie=["click","dblclick","contextmenu"];let O=H(),ke=H(!1),K=H();function De(){if(!a(O))return;let y=a(O).getElement();!y||y===a(K)||(I(K,y),D()==="hover"&&At(K,a(K).style.pointerEvents="none"),a(K).addEventListener("mouseenter",()=>{I(ke,!0)},{passive:!0}),a(K).addEventListener("mouseleave",()=>{I(ke,!1)},{passive:!0}),a(K).addEventListener("click",()=>{E()&&B(!1)},{passive:!0}))}qt(()=>{if(n())return n().on("click",ne),n().on("contextmenu",ne),Ne.add(_e),typeof r()=="string"&&(n().on("click",r(),z),n().on("dblclick",r(),z),n().on("contextmenu",r(),z),n().on("mousemove",r(),ge),n().on("mouseleave",r(),Ee),n().on("touchstart",r(),Ce),n().on("touchend",r(),ue)),()=>{var y,j;(y=n())!=null&&y.loaded()&&((j=a(O))==null||j.remove(),n().off("click",ne),n().off("contextmenu",ne),Ne.remove(_e),r()instanceof ve.Marker?r().getPopup()===a(O)&&r().setPopup(void 0):typeof r()=="string"&&(n().off("click",r(),z),n().off("dblclick",r(),z),n().off("contextmenu",r(),z),n().off("mousemove",r(),ge),n().off("mouseleave",r(),Ee),n().off("touchstart",r(),Ce),n().off("touchend",r(),ue)))}});function ce(y){return V()?!("marker"in y)&&!Da(y)&&se(y)!==x():!1}let W=H(null),Q=H("normal");function Re(y){"layerType"in y&&y.layerType==="deckgl"?(Y(y.coordinate),I(W,y.object?[y.object]:null)):(Y(y.lngLat),I(W,y.features??[]))}function z(y){y.type!==D()||ce(y)||(Re(y),setTimeout(()=>B(!0)))}let $=null;function Ce(y){$=y.point}function ue(y){if(!$||D()!=="hover")return;let j=$.dist(y.point);$=null,j<3&&(Y(y.lngLat),I(W,y.features??[]),a(O).isOpen()?I(Q,"justOpened"):(I(Q,"opening"),B(!0)))}function Ee(y){D()!=="hover"||$||a(Q)!=="normal"||(B(!1),I(W,null))}function ge(y){if(!(D()!=="hover"||$||a(Q)!=="normal")){if(ce(y)){B(!1),I(W,null);return}B(!0),I(W,y.features??[]),Y(y.lngLat)}}function ne(y){var Se;if(a(Q)==="justOpened"){I(Q,"normal");return}if(!C())return;let j=[a(K),r()instanceof ve.Marker?(Se=r())==null?void 0:Se.getElement():null];B()&&a(O).isOpen()&&!j.some(m=>m==null?void 0:m.contains(y.originalEvent.target))&&(y.type==="contextmenu"&&D()==="contextmenu"||y.type!=="contextmenu")&&B(!1)}function _e(y){C()&&B()&&a(O).isOpen()&&y.marker!==r()&&B(!1)}Xe(()=>{var y;n()&&((y=a(O))!=null&&y.isOpen())&&a(O).remove()});let te=H();q(()=>(b(L()),b(C()),b(E())),()=>{I(i,L()??(!C()&&!E()))}),q(()=>(a(O),a(i),b(N()),b(J()),b(be()),b(G()),b(ie()),b(xe())),()=>{a(O)||(I(O,new ve.Popup({closeButton:a(i),closeOnClick:!1,closeOnMove:N(),focusAfterOpen:J(),maxWidth:be(),className:G(),anchor:ie(),offset:xe()})),I(K,a(O).getElement()),a(O).on("open",()=>{B(!0),De(),S("open",a(O))}),a(O).on("close",()=>{B(!1),S("close",a(O))}),a(O).on("hover",()=>{S("hover",a(O))}))}),q(()=>(a(O),r(),b(D())),()=>{a(O)&&r()instanceof ve.Marker&&(D()==="click"?r().setPopup(a(O)):r().getPopup()===a(O)&&r().setPopup(void 0))}),q(()=>(b(D()),l()),()=>{var y;Ie.includes(D())&&((y=l())==null?void 0:y.type)===D()&&(z(l()),Te(le,null))}),q(()=>(b(D()),l()),()=>{var y,j;I(_,D()==="hover"&&(((y=l())==null?void 0:y.type)==="mousemove"||((j=l())==null?void 0:j.type)==="mouseenter"))}),q(()=>(b(D()),a(_),l(),a(ke)),()=>{D()==="hover"&&le&&(a(_)&&l()&&Re(l()),B((a(_)||a(ke))??!1))}),q(()=>(a(te),a(O),b(de())),()=>{a(te)?a(O).setDOMContent(a(te)):de()&&a(O).setHTML(de())}),q(()=>(b(Y()),a(O)),()=>{Y()&&a(O).setLngLat(Y())}),q(()=>(n(),a(O),b(B()),a(Q)),()=>{if(n()){let y=a(O).isOpen();B()&&!y?(a(O).addTo(n()),a(Q)==="opening"&&I(Q,"justOpened")):!B()&&y&&a(O).remove()}}),Ze(),He();var Ae=Pe(),we=F(Ae);U(we,()=>h.default,y=>{var j=Ka(),Se=u(j);U(Se,()=>{var m;return((m=a(W))==null?void 0:m.length)||r()instanceof ve.Marker},m=>{var g=Pe(),T=F(g);mt(T,t,"default",{get features(){return a(W)},get data(){var Z;return((Z=a(W))==null?void 0:Z[0])??null},get map(){return n()},close:()=>B(!1)},null),k(m,g)}),s(j),jt(j,m=>I(te,m),()=>a(te)),k(y,j)}),k(o,Ae),pe()}var tt=Uint8Array,zt=Uint16Array,Ja=Int32Array,Qa=new tt([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),$a=new tt([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Ut=function(o,t){for(var h=new zt(31),e=0;e<31;++e)h[e]=t+=1<<o[e-1];for(var r=new Ja(h[30]),e=1;e<30;++e)for(var n=h[e];n<h[e+1];++n)r[n]=n-h[e]<<5|e;return{b:h,r}},Zt=Ut(Qa,2),en=Zt.b,tn=Zt.r;en[28]=258,tn[258]=28;Ut($a,0);var an=new zt(32768);for(P=0;P<32768;++P)Oe=(P&43690)>>1|(P&21845)<<1,Oe=(Oe&52428)>>2|(Oe&13107)<<2,Oe=(Oe&61680)>>4|(Oe&3855)<<4,an[P]=((Oe&65280)>>8|(Oe&255)<<8)>>1;var Oe,P,ot=new tt(288);for(P=0;P<144;++P)ot[P]=8;var P;for(P=144;P<256;++P)ot[P]=9;var P;for(P=256;P<280;++P)ot[P]=7;var P;for(P=280;P<288;++P)ot[P]=8;var P,nn=new tt(32);for(P=0;P<32;++P)nn[P]=5;var P,rn=new tt(0),on=typeof TextDecoder<"u"&&new TextDecoder,dn=0;try{on.decode(rn,{stream:!0}),dn=1}catch{}var ln=M('<a target="_blank" rel="noopener noreferrer"> </a>');function sn(o,t){ye(t,!0);function h(i){return i.padStart(6,"0")}function e(i,_){if(!_)return"";switch(i){case"DOI":return ft.DOI+_;case"EDR":case"EDH":return ft[i]+h(_);case"URI":return _;default:return ft[i]+_}}const r=vt(()=>e(t.edition.type,t.edition._)),n=vt(()=>t.edition.type==="DOI"?`DOI: ${t.edition._} (${t.edition.when})`:`${t.edition.type}: ${t.edition._}`);var x=Pe(),l=F(x);U(l,()=>t.edition._,i=>{var _=ln(),L=u(_,!0);s(_),A(()=>{re(_,"href",a(r)),w(L,a(n))}),k(i,_)},i=>{var _=et();A(()=>w(_,`${t.edition.type??""}: -`)),k(i,_)}),k(o,x),pe()}var cn=M(", <a> </a>",1),un=M('<section id="translations" class="svelte-xd5ukq"></section>'),fn=M("<dd><a> </a></dd>"),vn=M("<dd> </dd>"),mn=M("<dd> </dd>"),gn=M("<dd> </dd>"),_n=M(" <!>",1),hn=M("<dd> </dd>"),yn=M("<dd> </dd>"),pn=M("<dd> </dd>"),xn=M("<dd> </dd>"),bn=M("<dd> <a> </a></dd>"),kn=M("<dd> </dd>"),Cn=M('<div class="popup"> </div>'),wn=M("<dt>Map</dt> <dd><!></dd>",1),On=M("<p> </p>"),Ln=M("<dl><dt>Place</dt> <dd> </dd> <dt>Repository</dt> <dd><a> </a><!></dd> <dt>Autopsy</dt> <dd> </dd> <dt>Map</dt> <dd>TODO: use the geo information in the museums dataset</dd></dl>"),Mn=M("<li><!></li>"),En=M("<li><!></li>"),Sn=M('<dt>Printed editions</dt> <dd><ul class="bibliography-list"></ul></dd>',1),Tn=M('<article><hgroup><h1 class="inscription-title svelte-xd5ukq"> </h1> <p> <a> </a><!></p> <p> <a target="inscription">View in current site</a></p></hgroup> <div class="sections svelte-xd5ukq"><figure id="facsimile-images" class="svelte-xd5ukq"><section id="image-viewer" style="height: 50vh; width: 100%;" class="svelte-xd5ukq"></section> <figcaption class="svelte-xd5ukq"> </figcaption></figure> <section id="edition" class="svelte-xd5ukq"><!></section> <section id="apparatus" class="svelte-xd5ukq"><!></section> <!> <section id="physical-description" class="svelte-xd5ukq"><h2>Physical description</h2> <section class="svelte-xd5ukq"><h3>Support</h3> <dl><dt>Description</dt> <dd> </dd> <dt>Object type</dt> <!> <dt>Material</dt> <dd><a> </a></dd> <dt>Condition</dt> <!> <dt>Dimensions</dt> <dd></dd></dl></section> <section class="svelte-xd5ukq"><h3>Inscription</h3> <dl><dt>Layout</dt> <dd> </dd> <dt>Text condition</dt> <!> <dt>Lettering</dt> <dd> </dd> <dt>Letter heights</dt> <!> <dt>Interlinear heights</dt> <!></dl></section></section> <section id="provenance" class="svelte-xd5ukq"><h2>Provenance</h2> <dl><dt>Place of origin</dt> <!> <dt>Provenance found</dt> <dd> </dd> <!></dl></section> <section id="current-location" class="svelte-xd5ukq"><h2>Current location</h2> <!></section> <section id="date" class="svelte-xd5ukq"><h2>Date</h2> <!> <dl><dt>Evidence</dt> <dd> </dd></dl></section> <section id="text-type" class="svelte-xd5ukq"><h2>Text type</h2> <p><a> </a></p></section> <section id="commentary" class="svelte-xd5ukq"><!></section> <section id="bibliography" class="svelte-xd5ukq"><h2>Bibliography</h2> <dl><dt>Digital editions</dt> <dd><ul></ul></dd> <!></dl></section> <section id="citation-and-status" class="svelte-xd5ukq"><h2>Citation and editorial status</h2> <dl><dt>Citation</dt> <dd> </dd></dl></section></div></article>');function Nn(o,t){ye(t,!0);let{slug:h,metadata:e,images:r,html:n}=t.data,x=sa(ca(r[0].desc));const l=n.divs.find(f=>f.id==="edition"),i=n.divs.find(f=>f.id==="apparatus"),_=n.divs.filter(f=>f.id==="translation"),L=n.divs.find(f=>f.id==="commentary");let C=r.map(f=>`${ha}${h}/${f.url}/info.json`),E;qt(async()=>{E=(await Xt(async()=>{const{default:d}=await import("../chunks/openseadragon.CtDNE41u.js").then(p=>p.o);return{default:d}},__vite__mapDeps([0,1,2,3,4]),import.meta.url)).default,E({id:"image-viewer",prefixUrl:`${va}/openseadragon/images/`,tileSources:C,sequenceMode:!0,showReferenceStrip:!0,preserveViewport:!0}).addHandler("page",function(d){const p=r[d.page];I(x,`${p.surfaceType}, ${p.desc}`)})});var N=Tn(),D=u(N),V=u(D),J=u(V);s(V);var ie=v(V,2),xe=u(ie),G=v(xe),be=u(G,!0);s(G);var Y=v(G);U(Y,()=>e.objectType,f=>{var d=cn(),p=v(F(d)),R=u(p,!0);s(p),A(()=>{re(p,"href",e.objectType.ref),w(R,e.objectType._)}),k(f,d)}),s(ie);var de=v(ie,2),B=u(de),S=v(B);s(de),s(D);var ee=v(D,2),me=u(ee),le=v(u(me),2),Me=u(le,!0);s(le),s(me);var se=v(me,2),Ne=u(se);$e(Ne,()=>l.html),s(se);var Ie=v(se,2),O=u(Ie);$e(O,()=>i.html),s(Ie);var ke=v(Ie,2);U(ke,()=>_.length,f=>{var d=un();Ge(d,21,()=>_,Ye,(p,R)=>{var X=Pe(),ae=F(X);$e(ae,()=>a(R).html),k(p,X)}),s(d),k(f,d)});var K=v(ke,2),De=v(u(K),2),ce=v(u(De),2),W=v(u(ce),2),Q=u(W,!0);s(W);var Re=v(W,4);U(Re,()=>e.objectType,f=>{var d=fn(),p=u(d),R=u(p,!0);s(p),s(d),A(()=>{re(p,"href",e.objectType.ref),w(R,e.objectType._)}),k(f,d)},f=>{var d=vn(),p=u(d,!0);s(d),A(()=>w(p,fe)),k(f,d)});var z=v(Re,4),$=u(z),Ce=u($,!0);s($),s(z);var ue=v(z,4);U(ue,()=>{var f;return(f=e.condition)==null?void 0:f.ana},f=>{var d=mn(),p=u(d,!0);A(()=>w(p,e.condition.ana.split(".").slice(1).join(", "))),s(d),k(f,d)},f=>{var d=gn(),p=u(d,!0);s(d),A(()=>w(p,e.condition._||fe)),k(f,d)});var Ee=v(ue,4);Ge(Ee,21,()=>e.dimensions,Ye,(f,d,p)=>{Pt();var R=_n(),X=F(R),ae=v(X);U(ae,()=>p<e.dimensions.length-1,je=>{var qe=et(", ");k(je,qe)}),A(()=>w(X,`${a(d).dimension??""}: ${a(d)._??""}
							${a(d).unit??""}`)),k(f,R)}),s(Ee),s(ce),s(De);var ge=v(De,2),ne=v(u(ge),2),_e=v(u(ne),2),te=u(_e,!0);s(_e);var Ae=v(_e,4);U(Ae,()=>e.layoutDesc.layout.damage.ana,f=>{var d=hn(),p=u(d,!0);A(()=>w(p,e.layoutDesc.layout.damage.ana.split(".").slice(1).join(", "))),s(d),k(f,d)},f=>{var d=yn(),p=u(d,!0);s(d),A(()=>w(p,e.layoutDesc.layout.damage._||fe)),k(f,d)});var we=v(Ae,4),y=u(we,!0);s(we);var j=v(we,4);Ge(j,17,()=>e.handNote.dimensions.filter(f=>(f==null?void 0:f.type)==="letterHeight"),Ye,(f,d)=>{var p=pn(),R=u(p);s(p),A(()=>w(R,`${a(d).l??""}: ${a(d).h??""}${a(d).unit??""}`)),k(f,p)});var Se=v(j,4);Ge(Se,17,()=>e.handNote.dimensions.filter(f=>(f==null?void 0:f.type)==="interlinear"),Ye,(f,d)=>{var p=xn(),R=u(p);s(p),A(()=>w(R,`${a(d).l??""}: ${a(d).h??""}${(a(d).h!=="not measured"?a(d).unit:"")??""}`)),k(f,p)}),s(ne),s(ge),s(K);var m=v(K,2),g=v(u(m),2),T=v(u(g),2);U(T,()=>e.places.length,f=>{var d=bn(),p=u(d),R=v(p),X=u(R,!0);s(R),s(d),A(()=>{w(p,`${(e.places[0].offset||"")??""} `),re(R,"href",e.places[0].ref),w(X,e.places[0]._)}),k(f,d)},f=>{var d=kn(),p=u(d,!0);s(d),A(()=>w(p,fe)),k(f,d)});var Z=v(T,4),he=u(Z,!0);s(Z);var at=v(Z,2);U(at,()=>{var f;return(f=e.provenanceFound)==null?void 0:f.geo},f=>{var d=wn();const p=vt(()=>[e.provenanceFound.geo[1],e.provenanceFound.geo[0]]);var R=v(F(d),2),X=u(R);Ya(X,{get center(){return a(p)},zoom:7,class:"map",standardControls:!0,get style(){return ya},children:(ae,je)=>{ja(ae,{get lngLat(){return a(p)},children:(qe,Qe)=>{Xa(qe,{offset:[0,-10],children:(Be,ze)=>{var Ve=Cn(),Gt=u(Ve,!0);s(Ve),A(()=>w(Gt,e.provenanceFound._)),k(Be,Ve)},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}}),s(R),k(f,d)}),s(g),s(m);var We=v(m,2),nt=v(u(We),2);U(nt,()=>e.provenanceLost,f=>{var d=On(),p=u(d,!0);s(d),A(()=>w(p,e.provenanceLost._)),k(f,d)},f=>{var d=Ln(),p=v(u(d),2),R=u(p);s(p);var X=v(p,4),ae=u(X),je=u(ae,!0);s(ae);var qe=v(ae);U(qe,()=>e.idno,ze=>{var Ve=et();A(()=>w(Ve,`,
							${e.idno._??""}`)),k(ze,Ve)}),s(X);var Qe=v(X,4),Be=u(Qe,!0);s(Qe),Pt(4),s(d),A(()=>{var ze;w(R,`${e.settlement??""}, ${e.country??""}`),re(ae,"href",e.repository.ref),w(je,e.repository._),w(Be,((ze=e.provenanceObserved)==null?void 0:ze._)||fe)}),k(f,d)}),s(We);var Fe=v(We,2),rt=v(u(Fe),2);_a(rt,{inscription:e});var yt=v(rt,2),pt=v(u(yt),2),Ht=u(pt,!0);s(pt),s(yt),s(Fe);var it=v(Fe,2),xt=v(u(it),2),dt=u(xt),Nt=u(dt,!0);s(dt),s(xt),s(it);var lt=v(it,2),Wt=u(lt);$e(Wt,()=>L.html),s(lt);var st=v(lt,2),bt=v(u(st),2),ct=v(u(bt),2),kt=u(ct);Ge(kt,21,()=>e.editions,Ye,(f,d)=>{var p=Mn(),R=u(p);sn(R,{get edition(){return a(d)}}),s(p),k(f,p)}),s(kt),s(ct);var Ft=v(ct,2);U(Ft,()=>{var f,d;return(d=(f=e.bibliographyEdition)==null?void 0:f.bibl)==null?void 0:d.length},f=>{var d=Sn(),p=v(F(d),2),R=u(p);Ge(R,21,()=>e.bibliographyEdition.bibl,Ye,(X,ae)=>{var je=Pe(),qe=F(je);U(qe,()=>a(ae),Qe=>{var Be=En(),ze=u(Be);Ea(ze,{get entry(){return a(ae)}}),s(Be),k(Qe,Be)}),k(X,je)}),s(R),s(p),k(f,d)}),s(bt),s(st);var Ct=v(st,2),wt=v(u(Ct),2),Ot=v(u(wt),2),Vt=u(Ot,!0);s(Ot),s(wt),s(Ct),s(ee),s(N),A(()=>{var f;w(J,`${e.file??""}: ${e.title??""}`),w(xe,`${e.textLang._??""}, `),re(G,"href",e.type.ref),w(be,e.type._),w(B,`${e.status??""}, `),re(S,"href",`${pa}inscription/${h??""}`),w(Me,a(x)),w(Q,e.support||fe),re($,"href",e.material.ref),w(Ce,e.material._),w(te,e.layoutDesc.layout.p||fe),w(y,e.handNote.lettering||fe),w(he,((f=e.provenanceFound)==null?void 0:f._)||fe),w(Ht,e.evidence||fe),re(dt,"href",e.type.ref),w(Nt,e.type._),w(Vt,e.citation||fe)}),k(o,N),pe()}export{Nn as component};
