const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["../chunks/openseadragon.CULnMEEs.js","../chunks/maplibre-gl.BlcabGBl.js","../chunks/runtime.BQotSvAO.js","../chunks/disclose-version.CNJLWmUd.js","../chunks/store.D90-691m.js","../chunks/utils.B5sIsHFd.js","../assets/maplibre-gl.CuCRB34y.css"])))=>i.map(i=>d[i]);
var ya=Object.defineProperty;var ba=(l,t,m)=>t in l?ya(l,t,{enumerable:!0,configurable:!0,writable:!0,value:m}):l[t]=m;var Ft=(l,t,m)=>ba(l,typeof t!="symbol"?t+"":t,m);import{_ as xa}from"../chunks/preload-helper.C1FmrZbK.js";import{d as Ut,f as Ca,c as be,a as x,b as Je,t as M}from"../chunks/disclose-version.CNJLWmUd.js";import{B as wa,F as Zt,P as Nt,C as ka,G as Wt,au as La,ay as Oa,aw as Ma,O as Ea,K as Pa,D as Sa,z as N,q as xe,w as d,x as r,t as R,y as v,v as Ce,g as a,k as rt,aE as Ta,aF as Qt,aG as z,aH as Ne,j as C,aI as W,s as P,aJ as Ia,aK as $t,I as bt,n as qt}from"../chunks/runtime.BQotSvAO.js";import{a as w,s as We,f as Be,b as se,g as Da}from"../chunks/store.D90-691m.js";import{l as Aa,s as Ra,i as B,p as f,b as ea,a as lt,c as ja}from"../chunks/props.7sWcRfGm.js";import{b as it,s as ie,d as Ba,f as za,e as Ue,B as Ha,i as Ze}from"../chunks/button.CPzrr0Zm.js";import{c as wt,a as Xe,o as ta}from"../chunks/index-client.BkwQQHTV.js";import{w as Ee,r as xt,b as Fa}from"../chunks/paths.BmBbsj_a.js";import{m as ve,s as Ua,t as Za,I as Na}from"../chunks/maplibre-gl.BlcabGBl.js";import{I as Wa,d as Ct,i as qa,m as Gt,E as fe,p as Ga}from"../chunks/Icon.DH-ZlyW3.js";import"../chunks/legacy.D7Z1dIIn.js";import{i as qe}from"../chunks/lifecycle.BUkS9xIk.js";function at(l,t,m,e,n){var o=l,b="",c;wa(()=>{if(b===(b=t()??"")){Zt&&Nt();return}c!==void 0&&(Sa(c),c=void 0),b!==""&&(c=ka(()=>{if(Zt){Wt.data;for(var i=Nt(),y=i;i!==null&&(i.nodeType!==8||i.data!=="");)y=i,i=La(i);if(i===null)throw Oa(),Ma;Ut(Wt,y),o=Ea(i);return}var O=b+"",k=Ca(O);Ut(Pa(k),k.lastChild),o.before(k)}))})}function Va(l,t){const m=Aa(t,["children","$$slots","$$events","$$legacy"]);Wa(l,Ra({name:"external-link"},()=>m,{iconNode:[["path",{d:"M15 3h6v6"}],["path",{d:"M10 14 21 3"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"}]],children:(n,o)=>{var b=be(),c=N(b);it(c,t,"default",{},null),x(n,b)},$$slots:{default:!0}}))}var Ka=M("<!><!>",1),Ya=M("<span> </span>"),Ja=M("<span> </span>"),Xa=M("at <a> </a>",1),Qa=M("at <span> </span>",1),$a=M("<a>Zotero</a>"),er=M("<a>FAIR</a>"),tr=M("<!> <!> <!> <!>",1);function ar(l,t){xe(t,!0);var m=tr(),e=N(m);B(e,()=>t.entry.citation,c=>{var i=Ka(),y=N(i);at(y,()=>t.entry.citation);var O=v(y);B(O,()=>t.entry.citedRange,k=>{var S=Je(",");x(k,S)},k=>{var S=Je(".");x(k,S)}),x(c,i)},c=>{var i=be(),y=N(i);B(y,()=>t.entry.type==="bulletin"||t.entry.type==="corpus",O=>{var k=Ya(),S=d(k);r(k),R(()=>w(S,`${t.entry.n??""} ${(t.entry.author?`${t.entry.author} (${t.entry.date})`:"")??""}`)),x(O,k)},O=>{var k=Ja(),S=d(k);r(k),R(()=>w(S,`${t.entry.author??""} (${t.entry.date??""})`)),x(O,k)},!0),x(c,i)});var n=v(e,2);B(n,()=>{var c;return typeof t.entry.citedRange=="object"&&((c=t.entry.citedRange)==null?void 0:c.ref)},c=>{var i=Xa(),y=v(N(i)),O=d(y,!0);r(y),R(()=>{ie(y,"href",t.entry.citedRange.ref.target),w(O,t.entry.citedRange.ref._)}),x(c,i)},c=>{var i=be(),y=N(i);B(y,()=>t.entry.citedRange,O=>{var k=Qa(),S=v(N(k)),q=d(S,!0);r(S),R(()=>w(q,t.entry.citedRange)),x(O,k)},null,!0),x(c,i)});var o=v(n,2);B(o,()=>{var c;return(c=t.entry.ptr)==null?void 0:c.target},c=>{var i=$a();R(()=>{var y;return ie(i,"href",(y=t.entry.ptr)==null?void 0:y.target)}),x(c,i)});var b=v(o,2);B(b,()=>{var c;return(c=t.entry.ref)==null?void 0:c.target},c=>{var i=er();R(()=>ie(i,"href",t.entry.ref.target)),x(c,i)}),x(l,m),Ce()}var rr=M('<a target="_blank" rel="noopener noreferrer"> </a>');function nr(l,t){xe(t,!0);function m(i){return i.padStart(6,"0")}function e(i,y){if(!y)return"";switch(i){case"DOI":return Ct.DOI+y;case"EDR":case"EDH":return Ct[i]+m(y);case"URI":return y;default:return Ct[i]+y}}const n=rt(()=>e(t.edition.type,t.edition._)),o=rt(()=>t.edition.type==="DOI"?`DOI: ${t.edition._} (${t.edition.when})`:`${t.edition.type}: ${t.edition._}`);var b=be(),c=N(b);B(c,()=>t.edition._,i=>{var y=rr(),O=d(y,!0);r(y),R(()=>{ie(y,"href",a(n)),w(O,a(o))}),x(i,y)},i=>{var y=Je();R(()=>w(y,`${t.edition.type??""}: -`)),x(i,y)}),x(l,b),Ce()}const kt=Symbol.for("svelte-maplibre");function Qe(){return Ta(kt)}function or(l){let t=new WeakMap;return m=>{var b;let e=t.get(m.originalEvent);if(e!==void 0)return e;let o=(b=m.target.queryRenderedFeatures(m.point).find(c=>{var i;return(i=l.get(c.layer.id))==null?void 0:i.interactive}))==null?void 0:b.layer.id;return t.set(m.originalEvent,o),o}}function lr(){let l=new Map;return Qt(kt,{map:Ee(null),source:xt(null),layer:xt(null),popupTarget:xt(null),cluster:Ee(),loadedImages:Ee(new Set),minzoom:Ee(0),maxzoom:Ee(24),layerEvent:Ee(null),layerInfo:l,eventTopMost:or(l),markerClickManager:new cr})}function Vt(l){return{subscribe:l.subscribe}}function ir({key:l,setPopupTarget:t=!1,setCluster:m=!1,setMouseEvent:e=!1}){let n=Qe(),o=Ee(null),b=Vt(o),c={...n,[l]:Vt(o)};if(t&&(c.popupTarget=b),e){let i=Ee(null);c.layerEvent=i,n.layerEvent=i}return m&&(c.cluster=Ee()),Qt(kt,c),{...n,self:o}}function sr(){return ir({key:"popupTarget",setPopupTarget:!0,setMouseEvent:!0})}function dr(l){return"layerType"in l&&l.layerType==="deckgl"}class cr{constructor(){Ft(this,"_handlers",new Set)}add(t){this._handlers.add(t)}remove(t){this._handlers.delete(t)}handleClick(t){for(const m of this._handlers)m(t)}}var aa=ur;function ur(l){var t,m,e;if(l){if(Array.isArray(l)){for(t=[],m=l.length,e=0;e<m;e++){var n=l[e];n!=null&&t.push(n)}return t}if(typeof l=="object"){t={};var o=Object.keys(l);for(m=o.length,e=0;e<m;e++){var b=o[e],c=l[b];c!=null&&(t[b]=c)}return t}}}function Kt(l,t){xe(t,!1);const m=We(),e=()=>se(V,"$marker",m),n=()=>se(D,"$map",m);let o=f(t,"marker",12,void 0),b=f(t,"lngLat",12),c=f(t,"class",8,void 0),i=f(t,"draggable",8,!1),y=f(t,"feature",8,null),O=f(t,"offset",8,void 0),k=f(t,"rotation",8,0),S=f(t,"opacity",8,1);const q=wt(),{map:D,layerEvent:$,self:V}=sr(),de=()=>G("dragstart"),he=()=>{we(),G("drag")},ee=()=>{we(),G("dragend")};Be(V,new ve.Marker(aa({draggable:i(),rotation:k(),className:c(),offset:O(),opacity:S().toString()})).setLngLat(b()).addTo(n())),o(e()),i()&&(e().on("dragstart",de),e().on("drag",he),e().on("dragend",ee)),Xe(()=>{var E;o(void 0),(E=e())==null||E.remove()});function we(){var Q;let E=(Q=e())==null?void 0:Q.getLngLat();E&&(Array.isArray(b())?b([E.lng,E.lat]):b()&&"lon"in b()?b({lon:E.lng,lat:E.lat}):b(E))}function G(E){var Se,ue;let Q=(Se=e())==null?void 0:Se.getLngLat();if(!Q)return;const Pe=[Q.lng,Q.lat];let ne={map:n(),marker:e(),lngLat:Pe,features:[{type:"Feature",properties:((ue=y())==null?void 0:ue.properties)??{},geometry:{type:"Point",coordinates:Pe}}]};Be($,{...ne,layerType:"marker",type:E}),q(E,ne)}z(()=>(e(),C(b())),()=>{var E;(E=e())==null||E.setLngLat(b())}),z(()=>(e(),C(O())),()=>{var E;(E=e())==null||E.setOffset(O()??[0,0])}),z(()=>(e(),C(k())),()=>{var E;(E=e())==null||E.setRotation(k())}),z(()=>(e(),C(S())),()=>{var E;(E=e())==null||E.setOpacity(S().toString())}),Ne(),qe();var ce=be(),F=N(ce);it(F,t,"default",{get marker(){return e()}},null),x(l,ce),Ce()}function fr(l,t){xe(t,!1);const m=We(),e=()=>se(n,"$map",m),{map:n}=Qe();let o=f(t,"position",8,"top-left"),b=f(t,"container",8,void 0),c=W(null);Xe(()=>{var i;(i=e())!=null&&i.loaded()&&a(c)&&e().removeControl(a(c))}),z(()=>(e(),a(c),C(b()),C(o())),()=>{if(e()&&!a(c)){let i;typeof b()=="string"?i=document.querySelector(b())??void 0:i=b(),P(c,new ve.FullscreenControl({container:i})),e().addControl(a(c),o())}}),Ne(),qe(),Ce()}function vr(l,t){xe(t,!1);const m=We(),e=()=>se(n,"$map",m),{map:n}=Qe();let o=f(t,"position",8,"top-left"),b=f(t,"positionOptions",8,void 0),c=f(t,"fitBoundsOptions",8,void 0),i=f(t,"trackUserLocation",8,!1),y=f(t,"showAccuracyCircle",8,!0),O=f(t,"showUserLocation",8,!0),k=f(t,"control",12,null);Xe(()=>{var S;(S=e())!=null&&S.loaded()&&k()&&e().removeControl(k())}),z(()=>(e(),C(k()),C(b()),C(c()),C(i()),C(y()),C(O()),C(o())),()=>{e()&&!k()&&(k(new ve.GeolocateControl({positionOptions:b(),fitBoundsOptions:c(),trackUserLocation:i(),showAccuracyCircle:y(),showUserLocation:O()})),e().addControl(k(),o()))}),Ne(),qe(),Ce()}function hr(l){let t=l.getCenter(),m=Math.round(l.getZoom()*100)/100,e=Math.ceil((m*Math.LN2+Math.log(512/360/.5))/Math.LN10),n=Math.pow(10,e),o=Math.round(t.lat*n)/n,b=Math.round(t.lng*n)/n,c=`${m}/${o}/${b}`,i=l.getBearing(),y=l.getPitch();return(i||y)&&(c+=`/${Math.round(i*10)/10}`),y&&(c+=`/${Math.round(y)}`),`#${c}`}function mr(l){return l.replace("#","").split("/").map(parseFloat)}var Ye=Lt;function Lt(l,t){return l===t||l!==l&&t!==t?!0:typeof l!=typeof t||{}.toString.call(l)!={}.toString.call(t)||l!==Object(l)||!l?!1:Array.isArray(l)?Yt(l,t):{}.toString.call(l)=="[object Set]"?Yt(Array.from(l),Array.from(t)):{}.toString.call(l)=="[object Object]"?_r(l,t):gr(l,t)}function gr(l,t){return l.toString()===t.toString()}function Yt(l,t){var m=l.length;if(m!=t.length)return!1;for(var e=0;e<m;e++)if(!Lt(l[e],t[e]))return!1;return!0}function _r(l,t){var m=Object.keys(l),e=m.length;if(e!=Object.keys(t).length)return!1;for(var n=0;n<e;n++){var o=m[n];if(!(t.hasOwnProperty(o)&&Lt(l[o],t[o])))return!1}return!0}function pr(l,t){xe(t,!1);const m=We(),e=()=>se(n,"$map",m),{map:n}=Qe();let o=f(t,"position",8,"top-left"),b=f(t,"showCompass",8,!0),c=f(t,"showZoom",8,!0),i=f(t,"visualizePitch",8,!1),y=W(null);Xe(()=>{var O;(O=e())!=null&&O.loaded()&&a(y)&&e().removeControl(a(y))}),z(()=>(e(),a(y),C(b()),C(c()),C(i()),C(o())),()=>{e()&&!a(y)&&(P(y,new ve.NavigationControl({showCompass:b(),showZoom:c(),visualizePitch:i()})),e().addControl(a(y),o()))}),Ne(),qe(),Ce()}function yr(l,t){xe(t,!1);const m=We(),e=()=>se(n,"$map",m),{map:n}=Qe();let o=f(t,"position",8,"bottom-left"),b=f(t,"maxWidth",8,void 0),c=f(t,"unit",8,"metric"),i=W(null);Xe(()=>{var y;(y=e())!=null&&y.loaded()&&a(i)&&e().removeControl(a(i))}),z(()=>(e(),a(i),C(b()),C(c()),C(o())),()=>{e()&&!a(i)&&(P(i,new ve.ScaleControl({maxWidth:b(),unit:c()})),e().addControl(a(i),o()))}),Ne(),qe(),Ce()}var br=M("<!> <!> <!> <!>",1),xr=M("<!> <!>",1),Cr=M('<div data-testid="map-container"><!></div>');function Jt(l,t){xe(t,!1);const m=We(),e=()=>se(ae,"$mapInstance",m),n=()=>se(ke,"$loadedImages",m),o=W(),b=W();let c=f(t,"map",12,null),i=f(t,"mapContainer",12,void 0),y=f(t,"class",8,void 0),O=f(t,"style",8),k=f(t,"diffStyleUpdates",8,!1),S=f(t,"center",12,void 0),q=f(t,"zoom",12,void 0),D=f(t,"pitch",12,0),$=f(t,"bearing",12,0),V=f(t,"bounds",12,void 0),de=f(t,"hash",8,!1),he=f(t,"updateHash",8,g=>{window.history.replaceState(window.history.state,"",g)}),ee=f(t,"loaded",12,!1),we=f(t,"minZoom",8,0),G=f(t,"maxZoom",8,22),ce=f(t,"minPitch",8,0),F=f(t,"maxPitch",8,60),E=f(t,"renderWorldCopies",8,void 0),Q=f(t,"dragPan",8,void 0),Pe=f(t,"dragRotate",8,void 0),ne=f(t,"pitchWithRotate",8,void 0),Se=f(t,"antialias",8,void 0),ue=f(t,"zoomOnDoubleClick",8,!0),Te=f(t,"locale",8,void 0),$e=f(t,"interactive",8,!0),L=f(t,"attributionControl",8,!0),me=f(t,"cooperativeGestures",8,!1),te=f(t,"preserveDrawingBuffer",8,!1),Ge=f(t,"maxBounds",8,void 0),oe=f(t,"images",24,()=>[]),K=f(t,"standardControls",8,!1),Y=f(t,"filterLayers",8,void 0),Ie=f(t,"transformRequest",8,void 0);const H=wt(),{map:ae,loadedImages:ke}=lr();let le=W(new Set);async function ze(g,h=!1){var T;if(e()&&!(!e().loaded()&&!h))if("url"in g){a(le).add(g.id);try{let Z=await e().loadImage(g.url);(T=e())==null||T.addImage(g.id,Z.data,g.options),n().add(g.id),Be(ke,n())}catch(Z){H("error",Z)}finally{a(le).delete(g.id)}}else e().addImage(g.id,g.data,g.options),n().add(g.id),Be(ke,n())}let ge=W(void 0),re=W(void 0),_e=W(void 0),J=W(void 0);function Ve(g){return _(),Be(ae,new ve.Map(aa({container:g,style:O(),locale:Te(),center:S(),zoom:q(),pitch:D(),bearing:$(),minZoom:we(),maxZoom:G(),minPitch:ce(),maxPitch:F(),renderWorldCopies:E(),dragPan:Q(),dragRotate:Pe(),pitchWithRotate:ne(),antialias:Se(),interactive:$e(),preserveDrawingBuffer:te(),maxBounds:Ge(),bounds:V(),attributionControl:L(),transformRequest:Ie(),cooperativeGestures:me()}))),e().on("load",h=>{h.target.getContainer().setAttribute("data-testid","map"),h.target.getCanvas().setAttribute("data-testid","map-canvas"),ee(!0),H("load",e())}),e().on("error",h=>H("error",{...h,map:e()})),e().on("movestart",h=>H("movestart",{...h,map:e()})),e().on("moveend",h=>{if(S(h.target.getCenter()),q(h.target.getZoom()),D(h.target.getPitch()),$(h.target.getBearing()),V(h.target.getBounds()),H("moveend",{...h,map:e()}),de()){let T=new URL(window.location.href.replace(/(#.+)?$/,hr(e())));he()(T)}}),e().on("click",h=>H("click",{...h,map:e()})),e().on("dblclick",h=>H("dblclick",{...h,map:e()})),e().on("contextmenu",h=>H("contextmenu",{...h,map:e()})),e().on("zoomstart",h=>H("zoomstart",{...h,map:e()})),e().on("zoom",h=>{H("zoom",{...h,map:e()})}),e().on("zoomend",h=>{H("zoomend",{...h,map:e()})}),e().on("style.load",()=>{if(e()){const h=e().getStyle();if(P(ge,h.layers.map(T=>T.id)),P(re,Object.keys(h.sources)),a(J))for(const[T,Z]of Object.entries(a(J)))e().addSource(T,Z);if(a(_e))for(const T of a(_e))e().addLayer(T);for(const T of oe())ze(T,!0)}}),e().on("styledata",h=>{if(e()&&Y()){const T=e().getStyle().layers;if(T)for(let Z of T)Y()(Z)||e().setLayoutProperty(Z.id,"visibility","none")}H("styledata",{...h,map:e()})}),{destroy(){var h;ee(!1),(h=e())==null||h.remove(),Be(ae,null)}}}let De=W(O());function _(){if(de()){let g=mr(window.location.hash);g.length>=3&&(q(g[0]),S([g[2],g[1]])),g.length==5&&($(g[3]),D(g[4]))}}z(()=>C(K()),()=>{P(o,typeof K()=="boolean"?void 0:K())}),z(()=>e(),()=>{c(e())}),z(()=>(e(),C(O()),a(De),a(ge),a(re),C(k())),()=>{if(e()&&!Ye(O(),a(De))){const g=e().getStyle();if(a(ge)&&P(_e,g.layers.filter(h=>!a(ge).includes(h.id))),a(re)){const h=Object.keys(g.sources).filter(T=>!a(re).includes(T));P(J,{});for(const T of h)$t(J,a(J)[T]=g.sources[T])}P(De,O()),e().setStyle(O(),{diff:k()}),Be(ke,new Set),P(le,new Set)}}),z(()=>(C(ee()),e(),C(oe()),n(),a(le)),()=>{var g;if(ee()&&((g=e())!=null&&g.loaded()))for(let h of oe())!n().has(h.id)&&!a(le).has(h.id)&&!e().hasImage(h.id)&&ze(h)}),z(()=>(C(oe()),n()),()=>{P(b,oe().every(g=>n().has(g.id)))}),z(()=>(e(),C(S()),C(q()),C($()),C(D())),()=>{var g,h,T,Z;if(e()){let pe={};S()!=null&&!Ye(S(),(g=e())==null?void 0:g.getCenter())&&(pe.center=S()),q()!=null&&!Ye(q(),(h=e())==null?void 0:h.getZoom())&&(pe.zoom=q()),$()!=null&&!Ye($(),(T=e())==null?void 0:T.getBearing())&&(pe.bearing=$()),D()!=null&&!Ye(D(),(Z=e())==null?void 0:Z.getPitch())&&(pe.pitch=D()),Object.keys(pe).length&&e().easeTo(pe)}}),z(()=>(C(V()),e()),()=>{var g,h;V()&&!Ye(V(),(g=e())==null?void 0:g.getBounds())&&((h=e())==null||h.fitBounds(V()))}),z(()=>(C(ue()),e()),()=>{var g,h;ue()?(g=e())==null||g.doubleClickZoom.enable():(h=e())==null||h.doubleClickZoom.disable()}),Ne(),qe();var j=Cr();Da("hashchange",Ia,_);var Ae=d(j);B(Ae,()=>e()&&ee(),g=>{var h=xr(),T=N(h);B(T,K,pe=>{var et=br(),Ke=N(et);pr(Ke,{get position(){return a(o)}});var ot=v(Ke,2);vr(ot,{get position(){return a(o)},fitBoundsOptions:{maxZoom:12}});var tt=v(ot,2);fr(tt,{get position(){return a(o)}});var dt=v(tt,2);yr(dt,{get position(){return a(o)}}),x(pe,et)});var Z=v(T,2);it(Z,t,"default",{get map(){return e()},get loadedImages(){return n()},get allImagesLoaded(){return a(b)}},null),x(g,h)}),r(j),ea(j,g=>i(g),()=>i()),Ba(j,g=>Ve(g)),R(()=>{Ua(j,`${y()??""} svelte-p00lfq`),Za(j,"expand-map",!y())}),x(l,j),Ce()}var wr=M("<div><!></div>");function Xt(l,t){const m=za(t);xe(t,!1);const e=We(),n=()=>se(Pe,"$popupTarget",e),o=()=>se(Q,"$map",e),b=()=>se(Se,"$layer",e),c=()=>se(ne,"$layerEvent",e),i=W(),y=W();let O=f(t,"closeButton",8,void 0),k=f(t,"closeOnClickOutside",8,!0),S=f(t,"closeOnClickInside",8,!1),q=f(t,"closeOnMove",8,!1),D=f(t,"openOn",8,"click"),$=f(t,"openIfTopMost",8,!0),V=f(t,"focusAfterOpen",8,!0),de=f(t,"anchor",8,void 0),he=f(t,"offset",8,void 0),ee=f(t,"popupClass",8,void 0),we=f(t,"maxWidth",8,void 0),G=f(t,"lngLat",12,void 0),ce=f(t,"html",8,void 0),F=f(t,"open",12,!1);const E=wt(),{map:Q,popupTarget:Pe,layerEvent:ne,layer:Se,eventTopMost:ue,markerClickManager:Te}=Qe(),$e=["click","dblclick","contextmenu"];let L=W(),me=W(!1),te=W();function Ge(){if(!a(L))return;let _=a(L).getElement();!_||_===a(te)||(P(te,_),D()==="hover"&&$t(te,a(te).style.pointerEvents="none"),a(te).addEventListener("mouseenter",()=>{P(me,!0)},{passive:!0}),a(te).addEventListener("mouseleave",()=>{P(me,!1)},{passive:!0}),a(te).addEventListener("click",()=>{S()&&F(!1)},{passive:!0}))}ta(()=>{if(o())return o().on("click",re),o().on("contextmenu",re),Te.add(_e),typeof n()=="string"&&(o().on("click",n(),H),o().on("dblclick",n(),H),o().on("contextmenu",n(),H),o().on("mousemove",n(),ge),o().on("mouseleave",n(),ze),o().on("touchstart",n(),ke),o().on("touchend",n(),le)),()=>{var _,j;(_=o())!=null&&_.loaded()&&((j=a(L))==null||j.remove(),o().off("click",re),o().off("contextmenu",re),Te.remove(_e),n()instanceof ve.Marker?n().getPopup()===a(L)&&n().setPopup(void 0):typeof n()=="string"&&(o().off("click",n(),H),o().off("dblclick",n(),H),o().off("contextmenu",n(),H),o().off("mousemove",n(),ge),o().off("mouseleave",n(),ze),o().off("touchstart",n(),ke),o().off("touchend",n(),le)))}});function oe(_){return $()?!("marker"in _)&&!dr(_)&&ue(_)!==b():!1}let K=W(null),Y=W("normal");function Ie(_){"layerType"in _&&_.layerType==="deckgl"?(G(_.coordinate),P(K,_.object?[_.object]:null)):(G(_.lngLat),P(K,_.features??[]))}function H(_){_.type!==D()||oe(_)||(Ie(_),setTimeout(()=>F(!0)))}let ae=null;function ke(_){ae=_.point}function le(_){if(!ae||D()!=="hover")return;let j=ae.dist(_.point);ae=null,j<3&&(G(_.lngLat),P(K,_.features??[]),a(L).isOpen()?P(Y,"justOpened"):(P(Y,"opening"),F(!0)))}function ze(_){D()!=="hover"||ae||a(Y)!=="normal"||(F(!1),P(K,null))}function ge(_){if(!(D()!=="hover"||ae||a(Y)!=="normal")){if(oe(_)){F(!1),P(K,null);return}F(!0),P(K,_.features??[]),G(_.lngLat)}}function re(_){var Ae;if(a(Y)==="justOpened"){P(Y,"normal");return}if(!k())return;let j=[a(te),n()instanceof ve.Marker?(Ae=n())==null?void 0:Ae.getElement():null];F()&&a(L).isOpen()&&!j.some(g=>g==null?void 0:g.contains(_.originalEvent.target))&&(_.type==="contextmenu"&&D()==="contextmenu"||_.type!=="contextmenu")&&F(!1)}function _e(_){k()&&F()&&a(L).isOpen()&&_.marker!==n()&&F(!1)}Xe(()=>{var _;o()&&((_=a(L))!=null&&_.isOpen())&&a(L).remove()});let J=W();z(()=>(C(O()),C(k()),C(S())),()=>{P(i,O()??(!k()&&!S()))}),z(()=>(a(L),a(i),C(q()),C(V()),C(we()),C(ee()),C(de()),C(he())),()=>{a(L)||(P(L,new ve.Popup({closeButton:a(i),closeOnClick:!1,closeOnMove:q(),focusAfterOpen:V(),maxWidth:we(),className:ee(),anchor:de(),offset:he()})),P(te,a(L).getElement()),a(L).on("open",()=>{F(!0),Ge(),E("open",a(L))}),a(L).on("close",()=>{F(!1),E("close",a(L))}),a(L).on("hover",()=>{E("hover",a(L))}))}),z(()=>(a(L),n(),C(D())),()=>{a(L)&&n()instanceof ve.Marker&&(D()==="click"?n().setPopup(a(L)):n().getPopup()===a(L)&&n().setPopup(void 0))}),z(()=>(C(D()),c()),()=>{var _;$e.includes(D())&&((_=c())==null?void 0:_.type)===D()&&(H(c()),Be(ne,null))}),z(()=>(C(D()),c()),()=>{var _,j;P(y,D()==="hover"&&(((_=c())==null?void 0:_.type)==="mousemove"||((j=c())==null?void 0:j.type)==="mouseenter"))}),z(()=>(C(D()),a(y),c(),a(me)),()=>{D()==="hover"&&ne&&(a(y)&&c()&&Ie(c()),F((a(y)||a(me))??!1))}),z(()=>(a(J),a(L),C(ce())),()=>{a(J)?a(L).setDOMContent(a(J)):ce()&&a(L).setHTML(ce())}),z(()=>(C(G()),a(L)),()=>{G()&&a(L).setLngLat(G())}),z(()=>(o(),a(L),C(F()),a(Y)),()=>{if(o()){let _=a(L).isOpen();F()&&!_?(a(L).addTo(o()),a(Y)==="opening"&&P(Y,"justOpened")):!F()&&_&&a(L).remove()}}),Ne(),qe();var Ve=be(),De=N(Ve);B(De,()=>m.default,_=>{var j=wr(),Ae=d(j);B(Ae,()=>{var g;return((g=a(K))==null?void 0:g.length)||n()instanceof ve.Marker},g=>{var h=be(),T=N(h);it(T,t,"default",{get features(){return a(K)},get data(){var Z;return((Z=a(K))==null?void 0:Z[0])??null},get map(){return o()},close:()=>F(!1)},null),x(g,h)}),r(j),ea(j,g=>P(J,g),()=>a(J)),x(_,j)}),x(l,Ve),Ce()}var nt=Uint8Array,ra=Uint16Array,kr=Int32Array,Lr=new nt([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Or=new nt([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),na=function(l,t){for(var m=new ra(31),e=0;e<31;++e)m[e]=t+=1<<l[e-1];for(var n=new kr(m[30]),e=1;e<30;++e)for(var o=m[e];o<m[e+1];++o)n[o]=o-m[e]<<5|e;return{b:m,r:n}},oa=na(Lr,2),Mr=oa.b,Er=oa.r;Mr[28]=258,Er[258]=28;na(Or,0);var Pr=new ra(32768);for(I=0;I<32768;++I)Me=(I&43690)>>1|(I&21845)<<1,Me=(Me&52428)>>2|(Me&13107)<<2,Me=(Me&61680)>>4|(Me&3855)<<4,Pr[I]=((Me&65280)>>8|(Me&255)<<8)>>1;var Me,I,st=new nt(288);for(I=0;I<144;++I)st[I]=8;var I;for(I=144;I<256;++I)st[I]=9;var I;for(I=256;I<280;++I)st[I]=7;var I;for(I=280;I<288;++I)st[I]=8;var I,Sr=new nt(32);for(I=0;I<32;++I)Sr[I]=5;var I,Tr=new nt(0),Ir=typeof TextDecoder<"u"&&new TextDecoder,Dr=0;try{Ir.decode(Tr,{stream:!0}),Dr=1}catch{}var Ar=M('<dd class="svelte-1h6ll55"><a class="svelte-1h6ll55"> </a></dd>'),Rr=M('<section id="translations" class="svelte-1h6ll55"></section>'),jr=M("<dd><a> </a></dd>"),Br=M("<dd> </dd>"),zr=M("<dd> </dd>"),Hr=M("<dd> </dd>"),Fr=M(" <!>",1),Ur=M("<dd> </dd>"),Zr=M("<dd> </dd>"),Nr=M("<dd> </dd>"),Wr=M("<dd> </dd>"),qr=M("<dd> <a> </a></dd>"),Gr=M("<dd> </dd>"),Vr=M('<div class="popup"> </div>'),Kr=M("<dt>Map</dt> <dd><!></dd>",1),Yr=M("<p> </p>"),Jr=M('<div class="popup"> </div>'),Xr=M("<dt>Map</dt> <dd><!></dd>",1),Qr=M("<dl><dt>Place</dt> <dd> </dd> <dt>Repository</dt> <dd><a> </a><!></dd> <dt>Autopsy</dt> <dd> </dd> <!></dl>"),$r=M("<li><!></li>"),en=M("<li><!></li>"),tn=M('<dt>Printed editions</dt> <dd><ul class="bibliography-list"></ul></dd>',1),an=M('<article class="svelte-1h6ll55"><section id="overview" class="svelte-1h6ll55"><div class="overview-header svelte-1h6ll55"><h1 class="inscription-title svelte-1h6ll55"> </h1></div> <figure id="facsimile-images" class="svelte-1h6ll55"><section id="image-viewer" style="height: 50vh; width: 100%;"></section> <figcaption class="svelte-1h6ll55"> </figcaption></figure> <dl class="svelte-1h6ll55"><dt class="svelte-1h6ll55">ID</dt> <dd class="svelte-1h6ll55"> </dd> <dt class="svelte-1h6ll55">Language</dt> <dd class="svelte-1h6ll55"> </dd> <dt class="svelte-1h6ll55">Text type</dt> <dd class="svelte-1h6ll55"><a class="svelte-1h6ll55"> </a></dd> <dt class="svelte-1h6ll55">Object type</dt> <!> <dt class="svelte-1h6ll55">Status</dt> <dd class="svelte-1h6ll55"> </dd> <dt class="svelte-1h6ll55">Links</dt> <dd class="svelte-1h6ll55"><a target="inscription" class="svelte-1h6ll55">View in current site <!></a></dd></dl></section> <section id="content" class="svelte-1h6ll55"><section id="edition" class="svelte-1h6ll55"><h2 class="svelte-1h6ll55">Edition</h2> <div class="tabs svelte-1h6ll55"></div> <div class="edition-content"><!></div></section> <section id="apparatus" class="svelte-1h6ll55"><!></section> <!> <section id="physical-description" class="svelte-1h6ll55"><h2 class="svelte-1h6ll55">Physical description</h2> <h3 class="svelte-1h6ll55">Support</h3> <dl><dt>Description</dt> <dd> </dd> <dt>Object type</dt> <!> <dt>Material</dt> <dd><a> </a></dd> <dt>Condition</dt> <!> <dt>Dimensions</dt> <dd></dd></dl> <h3 class="svelte-1h6ll55">Inscription</h3> <dl><dt>Layout</dt> <dd> </dd> <dt>Text condition</dt> <!> <dt>Lettering</dt> <dd> </dd> <dt>Letter heights</dt> <!> <dt>Interlinear heights</dt> <!></dl></section> <section id="provenance" class="svelte-1h6ll55"><h2 class="svelte-1h6ll55">Provenance</h2> <dl><dt>Place of origin</dt> <!> <dt>Provenance found</dt> <dd> </dd> <!></dl></section> <section id="current-location" class="svelte-1h6ll55"><h2 class="svelte-1h6ll55">Current location</h2> <!></section> <section id="date" class="svelte-1h6ll55"><h2 class="svelte-1h6ll55">Date</h2> <!>) <dl><dt>Evidence</dt> <dd> </dd></dl></section> <section id="text-type" class="svelte-1h6ll55"><h2 class="svelte-1h6ll55">Text type</h2> <p><a> </a></p></section> <section id="commentary" class="svelte-1h6ll55"><!></section> <section id="bibliography" class="svelte-1h6ll55"><h2 class="svelte-1h6ll55">Bibliography</h2> <dl><dt>Digital editions</dt> <dd><ul></ul></dd> <!></dl></section> <section id="citation-and-status" class="svelte-1h6ll55"><h2 class="svelte-1h6ll55">Citation and editorial status</h2> <dl><dt>Citation</dt> <dd> </dd></dl></section></section></article>');function bn(l,t){xe(t,!0);let{slug:m,metadata:e,images:n,html:o}=t.data,b=bt(lt(n[0].desc));const c=o.divs.find(u=>u.id==="editions");let i=bt(lt([]));const y=o.divs.find(u=>u.id==="apparatus"),O=o.divs.filter(u=>u.id==="translation"),k=o.divs.find(u=>u.id==="commentary");let S=n.map(u=>`${qa}${m}/${u.url}/info.json`),q,D=bt(0);ta(async()=>{q=(await xa(async()=>{const{default:s}=await import("../chunks/openseadragon.CULnMEEs.js").then(p=>p.o);return{default:s}},__vite__mapDeps([0,1,2,3,4,5,6]),import.meta.url)).default,q({id:"image-viewer",prefixUrl:`${Fa}/openseadragon/images/`,tileSources:S,sequenceMode:!0,showReferenceStrip:!0,preserveViewport:!0}).addHandler("page",function(s){const p=n[s.page];P(b,`${p.surfaceType}, ${p.desc}`)}),c&&(P(i,lt($(c.html))),P(D,0))});function $(u){if(typeof window>"u")return[];const p=new DOMParser().parseFromString(u,"text/html");return Array.from(p.querySelectorAll('[id^="edition-"]')).map(U=>({id:U.id,type:U.id.replace("edition-",""),html:U.outerHTML}))}var V=an(),de=d(V),he=d(de),ee=d(he),we=d(ee);r(ee),r(he);var G=v(he,2),ce=v(d(G),2),F=d(ce,!0);r(ce),r(G);var E=v(G,2),Q=v(d(E),2),Pe=d(Q,!0);r(Q);var ne=v(Q,4),Se=d(ne,!0);r(ne);var ue=v(ne,4),Te=d(ue),$e=d(Te,!0);r(Te),r(ue);var L=v(ue,4);B(L,()=>e.objectType,u=>{var s=Ar(),p=d(s),A=d(p,!0);r(p),r(s),R(()=>{ie(p,"href",e.objectType.ref),w(A,e.objectType._)}),x(u,s)});var me=v(L,4),te=d(me,!0);r(me);var Ge=v(me,4),oe=d(Ge),K=v(d(oe));Va(K,{}),r(oe),r(Ge),r(E),r(de);var Y=v(de,2),Ie=d(Y),H=v(d(Ie),2);Ue(H,21,()=>a(i),Ze,(u,s,p)=>{var A=be(),U=N(A),X=rt(()=>a(D)===p?"active":"");ja(U,()=>Ha,(Le,Oe)=>{Oe(Le,{get class(){return a(X)},onclick:()=>P(D,lt(p)),children:(Re,je)=>{qt();var He=Je();R(()=>w(He,a(s).type)),x(Re,He)},$$slots:{default:!0}})}),x(u,A)}),r(H);var ae=v(H,2),ke=d(ae);at(ke,()=>{var u;return((u=a(i)[a(D)])==null?void 0:u.html)||""}),r(ae),r(Ie);var le=v(Ie,2),ze=d(le);at(ze,()=>y.html),r(le);var ge=v(le,2);B(ge,()=>O.length,u=>{var s=Rr();Ue(s,21,()=>O,Ze,(p,A)=>{var U=be(),X=N(U);at(X,()=>a(A).html),x(p,U)}),r(s),x(u,s)});var re=v(ge,2),_e=v(d(re),4),J=v(d(_e),2),Ve=d(J,!0);r(J);var De=v(J,4);B(De,()=>e.objectType,u=>{var s=jr(),p=d(s),A=d(p,!0);r(p),r(s),R(()=>{ie(p,"href",e.objectType.ref),w(A,e.objectType._)}),x(u,s)},u=>{var s=Br(),p=d(s,!0);r(s),R(()=>w(p,fe)),x(u,s)});var _=v(De,4),j=d(_),Ae=d(j,!0);r(j),r(_);var g=v(_,4);B(g,()=>{var u;return(u=e.condition)==null?void 0:u.ana},u=>{var s=zr(),p=d(s,!0);R(()=>w(p,e.condition.ana.split(".").slice(1).join(", "))),r(s),x(u,s)},u=>{var s=Hr(),p=d(s,!0);r(s),R(()=>w(p,e.condition._||fe)),x(u,s)});var h=v(g,4);Ue(h,21,()=>e.dimensions,Ze,(u,s,p)=>{qt();var A=Fr(),U=N(A),X=v(U);B(X,()=>p<e.dimensions.length-1,Le=>{var Oe=Je(",Â ");x(Le,Oe)}),R(()=>w(U,`${a(s).dimension??""}: ${a(s)._??""}
						${a(s).unit??""}`)),x(u,A)}),r(h),r(_e);var T=v(_e,4),Z=v(d(T),2),pe=d(Z,!0);r(Z);var et=v(Z,4);B(et,()=>e.layoutDesc.layout.damage.ana,u=>{var s=Ur(),p=d(s,!0);R(()=>w(p,e.layoutDesc.layout.damage.ana.split(".").slice(1).join(", "))),r(s),x(u,s)},u=>{var s=Zr(),p=d(s,!0);r(s),R(()=>w(p,e.layoutDesc.layout.damage._||fe)),x(u,s)});var Ke=v(et,4),ot=d(Ke,!0);r(Ke);var tt=v(Ke,4);Ue(tt,17,()=>e.handNote.dimensions.filter(u=>(u==null?void 0:u.type)==="letterHeight"),Ze,(u,s)=>{var p=Nr(),A=d(p);r(p),R(()=>w(A,`${a(s).l??""}: ${a(s).h??""}${a(s).unit??""}`)),x(u,p)});var dt=v(tt,4);Ue(dt,17,()=>e.handNote.dimensions.filter(u=>(u==null?void 0:u.type)==="interlinear"),Ze,(u,s)=>{var p=Wr(),A=d(p);r(p),R(()=>w(A,`${a(s).l??""}: ${a(s).h??""}${(a(s).h!=="not measured"?a(s).unit:"")??""}`)),x(u,p)}),r(T),r(re);var ct=v(re,2),Ot=v(d(ct),2),Mt=v(d(Ot),2);B(Mt,()=>e.places.length,u=>{var s=qr(),p=d(s),A=v(p),U=d(A,!0);r(A),r(s),R(()=>{w(p,`${(e.places[0].offset||"")??""} `),ie(A,"href",e.places[0].ref),w(U,e.places[0]._)}),x(u,s)},u=>{var s=Gr(),p=d(s,!0);r(s),R(()=>w(p,fe)),x(u,s)});var ut=v(Mt,4),la=d(ut,!0);r(ut);var ia=v(ut,2);B(ia,()=>{var u;return(u=e.provenanceFound)==null?void 0:u.geo},u=>{var s=Kr();const p=rt(()=>[e.provenanceFound.geo[1],e.provenanceFound.geo[0]]);var A=v(N(s),2),U=d(A);Jt(U,{get center(){return a(p)},zoom:7,class:"map",standardControls:!0,get style(){return Gt},children:(X,Le)=>{Kt(X,{get lngLat(){return a(p)},children:(Oe,Re)=>{Xt(Oe,{offset:[0,-10],children:(je,He)=>{var ye=Vr(),Fe=d(ye,!0);r(ye),R(()=>w(Fe,e.provenanceFound._)),x(je,ye)},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}}),r(A),x(u,s)}),r(Ot),r(ct);var ft=v(ct,2),sa=v(d(ft),2);B(sa,()=>e.provenanceLost,u=>{var s=Yr(),p=d(s,!0);r(s),R(()=>w(p,e.provenanceLost._)),x(u,s)},u=>{var s=Qr(),p=v(d(s),2),A=d(p);r(p);var U=v(p,4),X=d(U),Le=d(X,!0);r(X);var Oe=v(X);B(Oe,()=>e.idno,ye=>{var Fe=Je();R(()=>w(Fe,`,
							${e.idno._??""}`)),x(ye,Fe)}),r(U);var Re=v(U,4),je=d(Re,!0);r(Re);var He=v(Re,2);B(He,()=>e.repository.museum.location.geo,ye=>{var Fe=Xr();const zt=rt(()=>[e.repository.museum.location.geo.lon,e.repository.museum.location.geo.lat]);var Ht=v(N(Fe),2),ha=d(Ht);Jt(ha,{get center(){return a(zt)},zoom:7,class:"map",standardControls:!0,get style(){return Gt},children:(ma,rn)=>{Kt(ma,{get lngLat(){return a(zt)},children:(ga,nn)=>{Xt(ga,{offset:[0,-10],children:(_a,on)=>{var yt=Jr(),pa=d(yt,!0);r(yt),R(()=>w(pa,e.repository.museum.name)),x(_a,yt)},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}}),r(Ht),x(ye,Fe)}),r(s),R(()=>{var ye;w(A,`${e.settlement??""}, ${e.country??""}`),ie(X,"href",e.repository.ref),w(Le,e.repository._),w(je,((ye=e.provenanceObserved)==null?void 0:ye._)||fe)}),x(u,s)}),r(ft);var vt=v(ft,2),Et=v(d(vt)),Pt=v(Et);Na(Pt,{get date(){return e.date}});var St=v(Pt,2),Tt=v(d(St),2),da=d(Tt,!0);r(Tt),r(St),r(vt);var ht=v(vt,2),It=v(d(ht),2),mt=d(It),ca=d(mt,!0);r(mt),r(It),r(ht);var gt=v(ht,2),ua=d(gt);at(ua,()=>k.html),r(gt);var _t=v(gt,2),Dt=v(d(_t),2),pt=v(d(Dt),2),At=d(pt);Ue(At,21,()=>e.editions,Ze,(u,s)=>{var p=$r(),A=d(p);nr(A,{get edition(){return a(s)}}),r(p),x(u,p)}),r(At),r(pt);var fa=v(pt,2);B(fa,()=>{var u,s;return(s=(u=e.bibliographyEdition)==null?void 0:u.bibl)==null?void 0:s.length},u=>{var s=tn(),p=v(N(s),2),A=d(p);Ue(A,21,()=>e.bibliographyEdition.bibl,Ze,(U,X)=>{var Le=be(),Oe=N(Le);B(Oe,()=>a(X),Re=>{var je=en(),He=d(je);ar(He,{get entry(){return a(X)}}),r(je),x(Re,je)}),x(U,Le)}),r(A),r(p),x(u,s)}),r(Dt),r(_t);var Rt=v(_t,2),jt=v(d(Rt),2),Bt=v(d(jt),2),va=d(Bt,!0);r(Bt),r(jt),r(Rt),r(Y),r(V),R(()=>{var u;w(we,`${e.file??""}: ${e.title??""}`),w(F,a(b)),w(Pe,e.file),w(Se,e.textLang._),ie(Te,"href",e.type.ref),w($e,e.type._),w(te,e.status),ie(oe,"href",`${Ga}inscription/${m??""}`),w(Ve,e.support||fe),ie(j,"href",e.material.ref),w(Ae,e.material._),w(pe,e.layoutDesc.layout.p||fe),w(ot,e.handNote.lettering||fe),w(la,((u=e.provenanceFound)==null?void 0:u._)||fe),w(Et,` ${e.date._??""} (`),w(da,e.date.evidence||fe),ie(mt,"href",e.type.ref),w(ca,e.type._),w(va,e.citation||fe)}),x(l,V),Ce()}export{bn as component};
