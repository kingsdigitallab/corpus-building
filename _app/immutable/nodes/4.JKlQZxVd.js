const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["../chunks/openseadragon.DS3KAUka.js","../chunks/maplibre-gl.BSwFECQO.js","../chunks/utils.DE1e-iYh.js","../chunks/disclose-version.DNuuheQc.js","../assets/maplibre-gl.CuCRB34y.css"])))=>i.map(i=>d[i]);
var Ut=Object.defineProperty;var Gt=(r,t,u)=>t in r?Ut(r,t,{enumerable:!0,configurable:!0,writable:!0,value:u}):r[t]=u;var wt=(r,t,u)=>Gt(r,typeof t!="symbol"?t+"":t,u);import{_ as Vt}from"../chunks/preload-helper.C1FmrZbK.js";import{p as xt,q as Kt,s as qe,r as ze,o as Ke,a as A,c as oe,v as Yt,t as W,e as kt,b as z}from"../chunks/disclose-version.DNuuheQc.js";import{b as Jt,h as Lt,c as Ot,a as Qt,d as Mt,a8 as Xt,aH as $t,aG as ea,O as ta,a2 as aa,a1 as na,aK as ra,aL as St,y as Pe,aM as T,aN as Ie,F as de,A as Te,J as p,g as a,aO as B,s as O,aP as oa,B as v,D as f,C as c,z as le,aQ as Et,ay as ia,G as zt,K as sa}from"../chunks/utils.DE1e-iYh.js";import{p as i,i as re,a as la}from"../chunks/props.MuTu1CGq.js";import{e as Ue,i as Ge,s as Me}from"../chunks/attributes.DEFeRuxD.js";import{c as dt,a as Ze,o as qt}from"../chunks/index-client.YRCLTaCo.js";import{b as da}from"../chunks/paths.BWC0Diuj.js";import{m as ce,s as ca,t as fa,I as ua}from"../chunks/maplibre-gl.BSwFECQO.js";import{s as ct,a as va,b as ma,i as ga,p as pa,E as ha}from"../chunks/config.C11SEYnn.js";import{i as Ae}from"../chunks/legacy.CvZse-fJ.js";import{w as we,r as lt}from"../chunks/index.Bkz9y6Dn.js";import{b as It}from"../chunks/this.qg2SipPB.js";function Ve(r,t,u,e,o){var n=r,h="",m;Jt(()=>{if(h===(h=t()??"")){Lt&&Ot();return}m!==void 0&&(na(m),m=void 0),h!==""&&(m=Qt(()=>{if(Lt){Mt.data;for(var g=Ot(),x=g;g!==null&&(g.nodeType!==8||g.data!=="");)x=g,g=Xt(g);if(g===null)throw $t(),ea;xt(Mt,x),n=ta(g);return}var q=h+"",P=Kt(q);xt(aa(P),P.lastChild),n.before(P)}))})}const ft=Symbol.for("svelte-maplibre");function Fe(){return ra(ft)}function _a(r){let t=new WeakMap;return u=>{var h;let e=t.get(u.originalEvent);if(e!==void 0)return e;let n=(h=u.target.queryRenderedFeatures(u.point).find(m=>{var g;return(g=r.get(m.layer.id))==null?void 0:g.interactive}))==null?void 0:h.layer.id;return t.set(u.originalEvent,n),n}}function ya(){let r=new Map;return St(ft,{map:we(null),source:lt(null),layer:lt(null),popupTarget:lt(null),cluster:we(),loadedImages:we(new Set),minzoom:we(0),maxzoom:we(24),layerEvent:we(null),layerInfo:r,eventTopMost:_a(r),markerClickManager:new xa})}function Pt(r){return{subscribe:r.subscribe}}function ba({key:r,setPopupTarget:t=!1,setCluster:u=!1,setMouseEvent:e=!1}){let o=Fe(),n=we(null),h=Pt(n),m={...o,[r]:Pt(n)};if(t&&(m.popupTarget=h),e){let g=we(null);m.layerEvent=g,o.layerEvent=g}return u&&(m.cluster=we()),St(ft,m),{...o,self:n}}function Ca(){return ba({key:"popupTarget",setPopupTarget:!0,setMouseEvent:!0})}function wa(r){return"layerType"in r&&r.layerType==="deckgl"}class xa{constructor(){wt(this,"_handlers",new Set)}add(t){this._handlers.add(t)}remove(t){this._handlers.delete(t)}handleClick(t){for(const u of this._handlers)u(t)}}var At=ka;function ka(r){var t,u,e;if(r){if(Array.isArray(r)){for(t=[],u=r.length,e=0;e<u;e++){var o=r[e];o!=null&&t.push(o)}return t}if(typeof r=="object"){t={};var n=Object.keys(r);for(u=n.length,e=0;e<u;e++){var h=n[e],m=r[h];m!=null&&(t[h]=m)}return t}}}function La(r,t){Pe(t,!1);const u=qe(),e=()=>oe(Z,"$marker",u),o=()=>oe(M,"$map",u);let n=i(t,"marker",12,void 0),h=i(t,"lngLat",12),m=i(t,"class",8,void 0),g=i(t,"draggable",8,!1),x=i(t,"feature",8,null),q=i(t,"offset",8,void 0),P=i(t,"rotation",8,0),j=i(t,"opacity",8,1);const U=dt(),{map:M,layerEvent:G,self:Z}=Ca(),pe=()=>V("dragstart"),fe=()=>{X(),V("drag")},J=()=>{X(),V("dragend")};ze(Z,new ce.Marker(At({draggable:g(),rotation:P(),className:m(),offset:q(),opacity:j().toString()})).setLngLat(h()).addTo(o())),n(e()),g()&&(e().on("dragstart",pe),e().on("drag",fe),e().on("dragend",J)),Ze(()=>{var w;n(void 0),(w=e())==null||w.remove()});function X(){var $;let w=($=e())==null?void 0:$.getLngLat();w&&(Array.isArray(h())?h([w.lng,w.lat]):h()&&"lon"in h()?h({lon:w.lng,lat:w.lat}):h(w))}function V(w){var _e,ye;let $=(_e=e())==null?void 0:_e.getLngLat();if(!$)return;const he=[$.lng,$.lat];let ee={map:o(),marker:e(),lngLat:he,features:[{type:"Feature",properties:((ye=x())==null?void 0:ye.properties)??{},geometry:{type:"Point",coordinates:he}}]};ze(G,{...ee,layerType:"marker",type:w}),U(w,ee)}T(()=>(e(),p(h())),()=>{var w;(w=e())==null||w.setLngLat(h())}),T(()=>(e(),p(q())),()=>{var w;(w=e())==null||w.setOffset(q()??[0,0])}),T(()=>(e(),p(P())),()=>{var w;(w=e())==null||w.setRotation(P())}),T(()=>(e(),p(j())),()=>{var w;(w=e())==null||w.setOpacity(j().toString())}),Ie(),Ae();var ue=Ke(),S=de(ue);ct(S,t,"default",{get marker(){return e()}},null),A(r,ue),Te()}function Oa(r,t){Pe(t,!1);const u=qe(),e=()=>oe(o,"$map",u),{map:o}=Fe();let n=i(t,"position",8,"top-left"),h=i(t,"container",8,void 0),m=B(null);Ze(()=>{var g;(g=e())!=null&&g.loaded()&&a(m)&&e().removeControl(a(m))}),T(()=>(e(),a(m),p(h()),p(n())),()=>{if(e()&&!a(m)){let g;typeof h()=="string"?g=document.querySelector(h())??void 0:g=h(),O(m,new ce.FullscreenControl({container:g})),e().addControl(a(m),n())}}),Ie(),Ae(),Te()}function Ma(r,t){Pe(t,!1);const u=qe(),e=()=>oe(o,"$map",u),{map:o}=Fe();let n=i(t,"position",8,"top-left"),h=i(t,"positionOptions",8,void 0),m=i(t,"fitBoundsOptions",8,void 0),g=i(t,"trackUserLocation",8,!1),x=i(t,"showAccuracyCircle",8,!0),q=i(t,"showUserLocation",8,!0),P=i(t,"control",12,null);Ze(()=>{var j;(j=e())!=null&&j.loaded()&&P()&&e().removeControl(P())}),T(()=>(e(),p(P()),p(h()),p(m()),p(g()),p(x()),p(q()),p(n())),()=>{e()&&!P()&&(P(new ce.GeolocateControl({positionOptions:h(),fitBoundsOptions:m(),trackUserLocation:g(),showAccuracyCircle:x(),showUserLocation:q()})),e().addControl(P(),n()))}),Ie(),Ae(),Te()}function za(r){let t=r.getCenter(),u=Math.round(r.getZoom()*100)/100,e=Math.ceil((u*Math.LN2+Math.log(512/360/.5))/Math.LN10),o=Math.pow(10,e),n=Math.round(t.lat*o)/o,h=Math.round(t.lng*o)/o,m=`${u}/${n}/${h}`,g=r.getBearing(),x=r.getPitch();return(g||x)&&(m+=`/${Math.round(g*10)/10}`),x&&(m+=`/${Math.round(x)}`),`#${m}`}function Pa(r){return r.replace("#","").split("/").map(parseFloat)}var He=ut;function ut(r,t){return r===t||r!==r&&t!==t?!0:typeof r!=typeof t||{}.toString.call(r)!={}.toString.call(t)||r!==Object(r)||!r?!1:Array.isArray(r)?Tt(r,t):{}.toString.call(r)=="[object Set]"?Tt(Array.from(r),Array.from(t)):{}.toString.call(r)=="[object Object]"?Sa(r,t):Ta(r,t)}function Ta(r,t){return r.toString()===t.toString()}function Tt(r,t){var u=r.length;if(u!=t.length)return!1;for(var e=0;e<u;e++)if(!ut(r[e],t[e]))return!1;return!0}function Sa(r,t){var u=Object.keys(r),e=u.length;if(e!=Object.keys(t).length)return!1;for(var o=0;o<e;o++){var n=u[o];if(!(t.hasOwnProperty(n)&&ut(r[n],t[n])))return!1}return!0}function Ea(r,t){Pe(t,!1);const u=qe(),e=()=>oe(o,"$map",u),{map:o}=Fe();let n=i(t,"position",8,"top-left"),h=i(t,"showCompass",8,!0),m=i(t,"showZoom",8,!0),g=i(t,"visualizePitch",8,!1),x=B(null);Ze(()=>{var q;(q=e())!=null&&q.loaded()&&a(x)&&e().removeControl(a(x))}),T(()=>(e(),a(x),p(h()),p(m()),p(g()),p(n())),()=>{e()&&!a(x)&&(O(x,new ce.NavigationControl({showCompass:h(),showZoom:m(),visualizePitch:g()})),e().addControl(a(x),n()))}),Ie(),Ae(),Te()}function qa(r,t){Pe(t,!1);const u=qe(),e=()=>oe(o,"$map",u),{map:o}=Fe();let n=i(t,"position",8,"bottom-left"),h=i(t,"maxWidth",8,void 0),m=i(t,"unit",8,"metric"),g=B(null);Ze(()=>{var x;(x=e())!=null&&x.loaded()&&a(g)&&e().removeControl(a(g))}),T(()=>(e(),a(g),p(h()),p(m()),p(n())),()=>{e()&&!a(g)&&(O(g,new ce.ScaleControl({maxWidth:h(),unit:m()})),e().addControl(a(g),n()))}),Ie(),Ae(),Te()}var Ia=W("<!> <!> <!> <!>",1),Aa=W("<!> <!>",1),Da=W('<div data-testid="map-container"><!></div>');function ja(r,t){Pe(t,!1);const u=qe(),e=()=>oe(Y,"$mapInstance",u),o=()=>oe(ie,"$loadedImages",u),n=B(),h=B();let m=i(t,"map",12,null),g=i(t,"mapContainer",12,void 0),x=i(t,"class",8,void 0),q=i(t,"style",8),P=i(t,"diffStyleUpdates",8,!1),j=i(t,"center",12,void 0),U=i(t,"zoom",12,void 0),M=i(t,"pitch",12,0),G=i(t,"bearing",12,0),Z=i(t,"bounds",12,void 0),pe=i(t,"hash",8,!1),fe=i(t,"updateHash",8,d=>{window.history.replaceState(window.history.state,"",d)}),J=i(t,"loaded",12,!1),X=i(t,"minZoom",8,0),V=i(t,"maxZoom",8,22),ue=i(t,"minPitch",8,0),S=i(t,"maxPitch",8,60),w=i(t,"renderWorldCopies",8,void 0),$=i(t,"dragPan",8,void 0),he=i(t,"dragRotate",8,void 0),ee=i(t,"pitchWithRotate",8,void 0),_e=i(t,"antialias",8,void 0),ye=i(t,"zoomOnDoubleClick",8,!0),xe=i(t,"locale",8,void 0),Ne=i(t,"interactive",8,!0),y=i(t,"attributionControl",8,!0),ke=i(t,"cooperativeGestures",8,!1),K=i(t,"preserveDrawingBuffer",8,!1),Se=i(t,"maxBounds",8,void 0),te=i(t,"images",24,()=>[]),H=i(t,"standardControls",8,!1),F=i(t,"filterLayers",8,void 0),De=i(t,"transformRequest",8,void 0);const I=dt(),{map:Y,loadedImages:ie}=ya();let ve=B(new Set);async function Le(d,s=!1){var k;if(e()&&!(!e().loaded()&&!s))if("url"in d){a(ve).add(d.id);try{let R=await e().loadImage(d.url);(k=e())==null||k.addImage(d.id,R.data,d.options),o().add(d.id),ze(ie,o())}catch(R){I("error",R)}finally{a(ve).delete(d.id)}}else e().addImage(d.id,d.data,d.options),o().add(d.id),ze(ie,o())}let me=B(void 0),ae=B(void 0),ge=B(void 0),Q=B(void 0);function Oe(d){return l(),ze(Y,new ce.Map(At({container:d,style:q(),locale:xe(),center:j(),zoom:U(),pitch:M(),bearing:G(),minZoom:X(),maxZoom:V(),minPitch:ue(),maxPitch:S(),renderWorldCopies:w(),dragPan:$(),dragRotate:he(),pitchWithRotate:ee(),antialias:_e(),interactive:Ne(),preserveDrawingBuffer:K(),maxBounds:Se(),bounds:Z(),attributionControl:y(),transformRequest:De(),cooperativeGestures:ke()}))),e().on("load",s=>{s.target.getContainer().setAttribute("data-testid","map"),s.target.getCanvas().setAttribute("data-testid","map-canvas"),J(!0),I("load",e())}),e().on("error",s=>I("error",{...s,map:e()})),e().on("movestart",s=>I("movestart",{...s,map:e()})),e().on("moveend",s=>{if(j(s.target.getCenter()),U(s.target.getZoom()),M(s.target.getPitch()),G(s.target.getBearing()),Z(s.target.getBounds()),I("moveend",{...s,map:e()}),pe()){let k=new URL(window.location.href.replace(/(#.+)?$/,za(e())));fe()(k)}}),e().on("click",s=>I("click",{...s,map:e()})),e().on("dblclick",s=>I("dblclick",{...s,map:e()})),e().on("contextmenu",s=>I("contextmenu",{...s,map:e()})),e().on("zoomstart",s=>I("zoomstart",{...s,map:e()})),e().on("zoom",s=>{I("zoom",{...s,map:e()})}),e().on("zoomend",s=>{I("zoomend",{...s,map:e()})}),e().on("style.load",()=>{if(e()){const s=e().getStyle();if(O(me,s.layers.map(k=>k.id)),O(ae,Object.keys(s.sources)),a(Q))for(const[k,R]of Object.entries(a(Q)))e().addSource(k,R);if(a(ge))for(const k of a(ge))e().addLayer(k);for(const k of te())Le(k,!0)}}),e().on("styledata",s=>{if(e()&&F()){const k=e().getStyle().layers;if(k)for(let R of k)F()(R)||e().setLayoutProperty(R.id,"visibility","none")}I("styledata",{...s,map:e()})}),{destroy(){var s;J(!1),(s=e())==null||s.remove(),ze(Y,null)}}}let Ee=B(q());function l(){if(pe()){let d=Pa(window.location.hash);d.length>=3&&(U(d[0]),j([d[2],d[1]])),d.length==5&&(G(d[3]),M(d[4]))}}T(()=>p(H()),()=>{O(n,typeof H()=="boolean"?void 0:H())}),T(()=>e(),()=>{m(e())}),T(()=>(e(),p(q()),a(Ee),a(me),a(ae),p(P())),()=>{if(e()&&!He(q(),a(Ee))){const d=e().getStyle();if(a(me)&&O(ge,d.layers.filter(s=>!a(me).includes(s.id))),a(ae)){const s=Object.keys(d.sources).filter(k=>!a(ae).includes(k));O(Q,{});for(const k of s)Et(Q,a(Q)[k]=d.sources[k])}O(Ee,q()),e().setStyle(q(),{diff:P()}),ze(ie,new Set),O(ve,new Set)}}),T(()=>(p(J()),e(),p(te()),o(),a(ve)),()=>{var d;if(J()&&((d=e())!=null&&d.loaded()))for(let s of te())!o().has(s.id)&&!a(ve).has(s.id)&&!e().hasImage(s.id)&&Le(s)}),T(()=>(p(te()),o()),()=>{O(h,te().every(d=>o().has(d.id)))}),T(()=>(e(),p(j()),p(U()),p(G()),p(M())),()=>{var d,s,k,R;if(e()){let se={};j()!=null&&!He(j(),(d=e())==null?void 0:d.getCenter())&&(se.center=j()),U()!=null&&!He(U(),(s=e())==null?void 0:s.getZoom())&&(se.zoom=U()),G()!=null&&!He(G(),(k=e())==null?void 0:k.getBearing())&&(se.bearing=G()),M()!=null&&!He(M(),(R=e())==null?void 0:R.getPitch())&&(se.pitch=M()),Object.keys(se).length&&e().easeTo(se)}}),T(()=>(p(Z()),e()),()=>{var d,s;Z()&&!He(Z(),(d=e())==null?void 0:d.getBounds())&&((s=e())==null||s.fitBounds(Z()))}),T(()=>(p(ye()),e()),()=>{var d,s;ye()?(d=e())==null||d.doubleClickZoom.enable():(s=e())==null||s.doubleClickZoom.disable()}),Ie(),Ae();var E=Da();Yt("hashchange",oa,l);var be=v(E);re(be,()=>e()&&J(),d=>{var s=Aa(),k=de(s);re(k,H,se=>{var je=Ia(),Je=de(je);Ea(Je,{get position(){return a(n)}});var Re=f(Je,2);Ma(Re,{get position(){return a(n)},fitBoundsOptions:{maxZoom:12}});var Qe=f(Re,2);Oa(Qe,{get position(){return a(n)}});var et=f(Qe,2);qa(et,{get position(){return a(n)}}),A(se,je)});var R=f(k,2);ct(R,t,"default",{get map(){return e()},get loadedImages(){return o()},get allImagesLoaded(){return a(h)}},null),A(d,s)}),c(E),It(E,d=>g(d),()=>g()),va(E,d=>Oe(d)),le(()=>{ca(E,`${x()??""} svelte-p00lfq`),fa(E,"expand-map",!x())}),A(r,E),Te()}var Ra=W("<div><!></div>");function Ba(r,t){const u=ma(t);Pe(t,!1);const e=qe(),o=()=>oe(he,"$popupTarget",e),n=()=>oe($,"$map",e),h=()=>oe(_e,"$layer",e),m=()=>oe(ee,"$layerEvent",e),g=B(),x=B();let q=i(t,"closeButton",8,void 0),P=i(t,"closeOnClickOutside",8,!0),j=i(t,"closeOnClickInside",8,!1),U=i(t,"closeOnMove",8,!1),M=i(t,"openOn",8,"click"),G=i(t,"openIfTopMost",8,!0),Z=i(t,"focusAfterOpen",8,!0),pe=i(t,"anchor",8,void 0),fe=i(t,"offset",8,void 0),J=i(t,"popupClass",8,void 0),X=i(t,"maxWidth",8,void 0),V=i(t,"lngLat",12,void 0),ue=i(t,"html",8,void 0),S=i(t,"open",12,!1);const w=dt(),{map:$,popupTarget:he,layerEvent:ee,layer:_e,eventTopMost:ye,markerClickManager:xe}=Fe(),Ne=["click","dblclick","contextmenu"];let y=B(),ke=B(!1),K=B();function Se(){if(!a(y))return;let l=a(y).getElement();!l||l===a(K)||(O(K,l),M()==="hover"&&Et(K,a(K).style.pointerEvents="none"),a(K).addEventListener("mouseenter",()=>{O(ke,!0)},{passive:!0}),a(K).addEventListener("mouseleave",()=>{O(ke,!1)},{passive:!0}),a(K).addEventListener("click",()=>{j()&&S(!1)},{passive:!0}))}qt(()=>{if(n())return n().on("click",ae),n().on("contextmenu",ae),xe.add(ge),typeof o()=="string"&&(n().on("click",o(),I),n().on("dblclick",o(),I),n().on("contextmenu",o(),I),n().on("mousemove",o(),me),n().on("mouseleave",o(),Le),n().on("touchstart",o(),ie),n().on("touchend",o(),ve)),()=>{var l,E;(l=n())!=null&&l.loaded()&&((E=a(y))==null||E.remove(),n().off("click",ae),n().off("contextmenu",ae),xe.remove(ge),o()instanceof ce.Marker?o().getPopup()===a(y)&&o().setPopup(void 0):typeof o()=="string"&&(n().off("click",o(),I),n().off("dblclick",o(),I),n().off("contextmenu",o(),I),n().off("mousemove",o(),me),n().off("mouseleave",o(),Le),n().off("touchstart",o(),ie),n().off("touchend",o(),ve)))}});function te(l){return G()?!("marker"in l)&&!wa(l)&&ye(l)!==h():!1}let H=B(null),F=B("normal");function De(l){"layerType"in l&&l.layerType==="deckgl"?(V(l.coordinate),O(H,l.object?[l.object]:null)):(V(l.lngLat),O(H,l.features??[]))}function I(l){l.type!==M()||te(l)||(De(l),setTimeout(()=>S(!0)))}let Y=null;function ie(l){Y=l.point}function ve(l){if(!Y||M()!=="hover")return;let E=Y.dist(l.point);Y=null,E<3&&(V(l.lngLat),O(H,l.features??[]),a(y).isOpen()?O(F,"justOpened"):(O(F,"opening"),S(!0)))}function Le(l){M()!=="hover"||Y||a(F)!=="normal"||(S(!1),O(H,null))}function me(l){if(!(M()!=="hover"||Y||a(F)!=="normal")){if(te(l)){S(!1),O(H,null);return}S(!0),O(H,l.features??[]),V(l.lngLat)}}function ae(l){var be;if(a(F)==="justOpened"){O(F,"normal");return}if(!P())return;let E=[a(K),o()instanceof ce.Marker?(be=o())==null?void 0:be.getElement():null];S()&&a(y).isOpen()&&!E.some(d=>d==null?void 0:d.contains(l.originalEvent.target))&&(l.type==="contextmenu"&&M()==="contextmenu"||l.type!=="contextmenu")&&S(!1)}function ge(l){P()&&S()&&a(y).isOpen()&&l.marker!==o()&&S(!1)}Ze(()=>{var l;n()&&((l=a(y))!=null&&l.isOpen())&&a(y).remove()});let Q=B();T(()=>(p(q()),p(P()),p(j())),()=>{O(g,q()??(!P()&&!j()))}),T(()=>(a(y),a(g),p(U()),p(Z()),p(X()),p(J()),p(pe()),p(fe())),()=>{a(y)||(O(y,new ce.Popup({closeButton:a(g),closeOnClick:!1,closeOnMove:U(),focusAfterOpen:Z(),maxWidth:X(),className:J(),anchor:pe(),offset:fe()})),O(K,a(y).getElement()),a(y).on("open",()=>{S(!0),Se(),w("open",a(y))}),a(y).on("close",()=>{S(!1),w("close",a(y))}),a(y).on("hover",()=>{w("hover",a(y))}))}),T(()=>(a(y),o(),p(M())),()=>{a(y)&&o()instanceof ce.Marker&&(M()==="click"?o().setPopup(a(y)):o().getPopup()===a(y)&&o().setPopup(void 0))}),T(()=>(p(M()),m()),()=>{var l;Ne.includes(M())&&((l=m())==null?void 0:l.type)===M()&&(I(m()),ze(ee,null))}),T(()=>(p(M()),m()),()=>{var l,E;O(x,M()==="hover"&&(((l=m())==null?void 0:l.type)==="mousemove"||((E=m())==null?void 0:E.type)==="mouseenter"))}),T(()=>(p(M()),a(x),m(),a(ke)),()=>{M()==="hover"&&ee&&(a(x)&&m()&&De(m()),S((a(x)||a(ke))??!1))}),T(()=>(a(Q),a(y),p(ue())),()=>{a(Q)?a(y).setDOMContent(a(Q)):ue()&&a(y).setHTML(ue())}),T(()=>(p(V()),a(y)),()=>{V()&&a(y).setLngLat(V())}),T(()=>(n(),a(y),p(S()),a(F)),()=>{if(n()){let l=a(y).isOpen();S()&&!l?(a(y).addTo(n()),a(F)==="opening"&&O(F,"justOpened")):!S()&&l&&a(y).remove()}}),Ie(),Ae();var Oe=Ke(),Ee=de(Oe);re(Ee,()=>u.default,l=>{var E=Ra(),be=v(E);re(be,()=>{var d;return((d=a(H))==null?void 0:d.length)||o()instanceof ce.Marker},d=>{var s=Ke(),k=de(s);ct(k,t,"default",{get features(){return a(H)},get data(){var R;return((R=a(H))==null?void 0:R[0])??null},get map(){return n()},close:()=>S(!1)},null),A(d,s)}),c(E),It(E,d=>O(Q,d),()=>a(Q)),A(l,E)}),A(r,Oe),Te()}var Ye=Uint8Array,Dt=Uint16Array,Ha=Int32Array,Za=new Ye([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Fa=new Ye([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),jt=function(r,t){for(var u=new Dt(31),e=0;e<31;++e)u[e]=t+=1<<r[e-1];for(var o=new Ha(u[30]),e=1;e<30;++e)for(var n=u[e];n<u[e+1];++n)o[n]=n-u[e]<<5|e;return{b:u,r:o}},Rt=jt(Za,2),Na=Rt.b,Wa=Rt.r;Na[28]=258,Wa[258]=28;jt(Fa,0);var Ua=new Dt(32768);for(L=0;L<32768;++L)Ce=(L&43690)>>1|(L&21845)<<1,Ce=(Ce&52428)>>2|(Ce&13107)<<2,Ce=(Ce&61680)>>4|(Ce&3855)<<4,Ua[L]=((Ce&65280)>>8|(Ce&255)<<8)>>1;var Ce,L,$e=new Ye(288);for(L=0;L<144;++L)$e[L]=8;var L;for(L=144;L<256;++L)$e[L]=9;var L;for(L=256;L<280;++L)$e[L]=7;var L;for(L=280;L<288;++L)$e[L]=8;var L,Ga=new Ye(32);for(L=0;L<32;++L)Ga[L]=5;var L,Va=new Ye(0),Ka=typeof TextDecoder<"u"&&new TextDecoder,Ya=0;try{Ka.decode(Va,{stream:!0}),Ya=1}catch{}var Ja=W(", <a> </a>",1),Qa=W('<section id="translations" class="svelte-1iq2znn"></section>'),Xa=W("<dt>Object type</dt> <dd><a> </a></dd>",1),$a=W(" <!>",1),en=W("<dd> </dd>"),tn=W("<dd> </dd>"),an=W('<div class="marker"> </div>'),nn=W("<dt>Map</dt> <dd><!></dd>",1),rn=W("<p> </p>"),on=W("<dl><dt>Place</dt> <dd> </dd> <dt>Repository</dt> <dd><a> </a><!></dd> <dt>Autopsy</dt> <dd> </dd> <dt>Map</dt> <dd>TODO: use the geo information in the museums dataset</dd></dl>"),sn=W('<section id="bibliography" class="svelte-1iq2znn"></section>'),ln=W('<article><hgroup><h1 class="inscription-title svelte-1iq2znn"> </h1> <p> <a> </a><!></p> <p> <a target="inscription">View in current site</a></p></hgroup> <div class="sections svelte-1iq2znn"><figure id="facsimile-images" class="svelte-1iq2znn"><section id="image-viewer" style="height: 50vh; width: 100%;" class="svelte-1iq2znn"></section> <figcaption class="svelte-1iq2znn"> </figcaption></figure> <section id="edition" class="svelte-1iq2znn"><!></section> <section id="apparatus" class="svelte-1iq2znn"><!></section> <!> <section id="physical-description" class="svelte-1iq2znn"><h2 class="svelte-1iq2znn">Physical description</h2> <section class="svelte-1iq2znn"><h3 class="svelte-1iq2znn">Support</h3> <dl><dt>Description</dt> <dd> </dd> <!> <dt>Material</dt> <dd><a> </a></dd> <dt>Condition</dt> <dd>TODO: add condition</dd> <dt>Dimensions</dt> <dd></dd></dl></section> <section class="svelte-1iq2znn"><h3 class="svelte-1iq2znn">Inscription</h3> <dl><dt>Layout</dt> <dd> </dd> <dt>Text condition</dt> <dd> </dd> <dt>Lettering</dt> <dd> </dd> <dt>Letter heights</dt> <!> <dt>Interlinear heights</dt> <!></dl></section></section> <section id="provenance" class="svelte-1iq2znn"><h2 class="svelte-1iq2znn">Provenance</h2> <dl><dt>Place of origin</dt> <dd> <a> </a></dd> <dt>Provenance found</dt> <dd> </dd> <!></dl></section> <section id="current-location" class="svelte-1iq2znn"><h2 class="svelte-1iq2znn">Current location</h2> <!></section> <section id="date" class="svelte-1iq2znn"><h2 class="svelte-1iq2znn">Date</h2> <!> <dl><dt>Evidence</dt> <dd> </dd></dl></section> <section id="text-type" class="svelte-1iq2znn"><h2 class="svelte-1iq2znn">Text type</h2> <p><a> </a></p></section> <section id="commentary" class="svelte-1iq2znn"><!></section> <!> <section id="citation-and-status" class="svelte-1iq2znn"><h2 class="svelte-1iq2znn">Citation and editorial status</h2> <dl><dt>Citation</dt> <dd> </dd></dl></section></div></article>');function wn(r,t){Pe(t,!0);let{slug:u,metadata:e,images:o,html:n}=t.data,h=ia(la(o[0].desc));const m=n.divs.find(b=>b.id==="edition"),g=n.divs.find(b=>b.id==="apparatus"),x=n.divs.filter(b=>b.id==="translation"),q=n.divs.find(b=>b.id==="commentary"),P=n.divs.filter(b=>b.id==="bibliography");let j=o.map(b=>`${ga}${u}/${b.url}/info.json`),U;qt(async()=>{U=(await Vt(async()=>{const{default:_}=await import("../chunks/openseadragon.DS3KAUka.js").then(C=>C.o);return{default:_}},__vite__mapDeps([0,1,2,3,4]),import.meta.url)).default,U({id:"image-viewer",prefixUrl:`${da}/openseadragon/images/`,tileSources:j,sequenceMode:!0,showReferenceStrip:!0,preserveViewport:!0}).addHandler("page",function(_){const C=o[_.page];O(h,`${C.surfaceType}, ${C.desc}`)})});var M=ln(),G=v(M),Z=v(G),pe=v(Z);c(Z);var fe=f(Z,2),J=v(fe),X=f(J),V=v(X,!0);c(X);var ue=f(X);re(ue,()=>e.objectType,b=>{var _=Ja(),C=f(de(_)),D=v(C,!0);c(C),le(()=>{Me(C,"href",e.objectType.ref),z(D,e.objectType._)}),A(b,_)}),c(fe);var S=f(fe,2),w=v(S),$=f(w);c(S),c(G);var he=f(G,2),ee=v(he),_e=f(v(ee),2),ye=v(_e,!0);c(_e),c(ee);var xe=f(ee,2),Ne=v(xe);Ve(Ne,()=>m.html),c(xe);var y=f(xe,2),ke=v(y);Ve(ke,()=>g.html),c(y);var K=f(y,2);re(K,()=>x.length,b=>{var _=Qa();Ue(_,21,()=>x,Ge,(C,D)=>{var N=Ke(),ne=de(N);Ve(ne,()=>a(D).html),A(C,N)}),c(_),A(b,_)});var Se=f(K,2),te=f(v(Se),2),H=f(v(te),2),F=f(v(H),2),De=v(F,!0);c(F);var I=f(F,2);re(I,()=>e.objectType,b=>{var _=Xa(),C=f(de(_),2),D=v(C),N=v(D,!0);c(D),c(C),le(()=>{Me(D,"href",e.objectType.ref),z(N,e.objectType._)}),A(b,_)});var Y=f(I,4),ie=v(Y),ve=v(ie,!0);c(ie),c(Y);var Le=f(Y,8);Ue(Le,21,()=>e.dimensions,Ge,(b,_,C)=>{zt();var D=$a(),N=de(D),ne=f(N);re(ne,()=>C<e.dimensions.length-1,Xe=>{var We=kt(",Â ");A(Xe,We)}),le(()=>z(N,`${a(_).dimension??""}: ${a(_)._??""}
							${a(_).unit??""}`)),A(b,D)}),c(Le),c(H),c(te);var me=f(te,2),ae=f(v(me),2),ge=f(v(ae),2),Q=v(ge,!0);c(ge);var Oe=f(ge,4),Ee=v(Oe,!0);c(Oe);var l=f(Oe,4),E=v(l,!0);c(l);var be=f(l,4);Ue(be,17,()=>e.handNote.dimensions.filter(b=>b.type==="letterHeight"),Ge,(b,_)=>{var C=en(),D=v(C);c(C),le(()=>z(D,`${a(_).l??""}: ${a(_).h??""}${a(_).unit??""}`)),A(b,C)});var d=f(be,4);Ue(d,17,()=>e.handNote.dimensions.filter(b=>b.type==="interlinear"),Ge,(b,_)=>{var C=tn(),D=v(C);c(C),le(()=>z(D,`${a(_).l??""}: ${a(_).h??""}${(a(_).h!=="not measured"?a(_).unit:"")??""}`)),A(b,C)}),c(ae),c(me),c(Se);var s=f(Se,2),k=f(v(s),2),R=f(v(k),2),se=v(R),je=f(se),Je=v(je,!0);c(je),c(R);var Re=f(R,4),Qe=v(Re,!0);c(Re);var et=f(Re,2);re(et,()=>e.provenanceFound.geo,b=>{var _=nn();const C=sa(()=>[e.provenanceFound.geo[1],e.provenanceFound.geo[0]]);var D=f(de(_),2),N=v(D);ja(N,{get center(){return a(C)},zoom:7,class:"map",standardControls:!0,style:"https://api.maptiler.com/maps/positron/style.json?key=brTBbnRxuiKp6PgjwFPr",children:(ne,Xe)=>{La(ne,{get lngLat(){return a(C)},children:(We,it)=>{Ba(We,{offset:[0,-10],children:(st,Ct)=>{var Be=an(),Wt=v(Be,!0);c(Be),le(()=>z(Wt,e.provenanceFound._)),A(st,Be)},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}}),c(D),A(b,_)}),c(k),c(s);var tt=f(s,2),Bt=f(v(tt),2);re(Bt,()=>e.provenanceLost,b=>{var _=rn(),C=v(_,!0);c(_),le(()=>z(C,e.provenanceLost._)),A(b,_)},b=>{var _=on(),C=f(v(_),2),D=v(C);c(C);var N=f(C,4),ne=v(N),Xe=v(ne,!0);c(ne);var We=f(ne);re(We,()=>e.idno,Ct=>{var Be=kt();le(()=>z(Be,`,
							${e.idno._??""}`)),A(Ct,Be)}),c(N);var it=f(N,4),st=v(it,!0);c(it),zt(4),c(_),le(()=>{z(D,`${e.settlement??""}, ${e.country??""}`),Me(ne,"href",e.repository.ref),z(Xe,e.repository._),z(st,e.provenanceObserved._)}),A(b,_)}),c(tt);var at=f(tt,2),vt=f(v(at),2);ua(vt,{inscription:e});var mt=f(vt,2),gt=f(v(mt),2),Ht=v(gt,!0);c(gt),c(mt),c(at);var nt=f(at,2),pt=f(v(nt),2),rt=v(pt),Zt=v(rt,!0);c(rt),c(pt),c(nt);var ot=f(nt,2),Ft=v(ot);Ve(Ft,()=>q.html),c(ot);var ht=f(ot,2);re(ht,()=>P.length,b=>{var _=sn();Ue(_,21,()=>P,Ge,(C,D)=>{var N=Ke(),ne=de(N);Ve(ne,()=>a(D).html),A(C,N)}),c(_),A(b,_)});var _t=f(ht,2),yt=f(v(_t),2),bt=f(v(yt),2),Nt=v(bt,!0);c(bt),c(yt),c(_t),c(he),c(M),le(()=>{z(pe,`${e.file??""}: ${e.title??""}`),z(J,`${e.textLang._??""}, `),Me(X,"href",e.type.ref),z(V,e.type._),z(w,`${e.status??""}, `),Me($,"href",`${pa}inscription/${u??""}`),z(ye,a(h)),z(De,e.support),Me(ie,"href",e.material.ref),z(ve,e.material._),z(Q,e.layoutDesc.layout.p),z(Ee,e.layoutDesc.layout.damage||ha),z(E,e.handNote.lettering),z(se,`${(e.places[0].offset||"")??""} `),Me(je,"href",e.places[0].ref),z(Je,e.places[0]._),z(Qe,e.provenanceFound._),z(Ht,e.evidence),Me(rt,"href",e.type.ref),z(Zt,e.type._),z(Nt,e.citation)}),A(r,M),Te()}export{wn as component};
