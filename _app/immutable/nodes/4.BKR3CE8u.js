const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["../chunks/openseadragon.DS3KAUka.js","../chunks/maplibre-gl.BSwFECQO.js","../chunks/utils.DE1e-iYh.js","../chunks/disclose-version.DNuuheQc.js","../assets/maplibre-gl.CuCRB34y.css"])))=>i.map(i=>d[i]);
var Ut=Object.defineProperty;var Gt=(r,t,u)=>t in r?Ut(r,t,{enumerable:!0,configurable:!0,writable:!0,value:u}):r[t]=u;var kt=(r,t,u)=>Gt(r,typeof t!="symbol"?t+"":t,u);import{_ as Vt}from"../chunks/preload-helper.C1FmrZbK.js";import{p as Ct,q as Kt,s as Ae,r as Pe,o as Ke,a as D,c as oe,v as Yt,t as W,e as wt,b as P}from"../chunks/disclose-version.DNuuheQc.js";import{b as Jt,h as Lt,c as Ot,a as Qt,d as Mt,a8 as Xt,aH as $t,aG as ea,O as ta,a2 as aa,a1 as na,aK as ra,aL as Et,y as Te,aM as S,aN as qe,F as de,A as Se,J as g,g as a,aO as z,s as O,aP as oa,B as v,D as f,C as c,z as le,aQ as It,ay as ia,G as Pt,K as sa}from"../chunks/utils.DE1e-iYh.js";import{p as i,i as re,a as la}from"../chunks/props.MuTu1CGq.js";import{e as Ue,i as Ge,s as Me}from"../chunks/attributes.DEFeRuxD.js";import{c as dt,a as Ze,o as At}from"../chunks/index-client.YRCLTaCo.js";import{b as da}from"../chunks/paths.9nY8Jtpo.js";import{m as ce,s as ca,t as fa,I as ua}from"../chunks/maplibre-gl.BSwFECQO.js";import{s as ct,a as va,b as ma,i as pa,p as ga,E as ha}from"../chunks/config.C11SEYnn.js";import{i as De}from"../chunks/legacy.CvZse-fJ.js";import{w as ke,r as lt}from"../chunks/index.Bkz9y6Dn.js";import{b as qt}from"../chunks/this.qg2SipPB.js";function Ve(r,t,u,e,o){var n=r,h="",m;Jt(()=>{if(h===(h=t()??"")){Lt&&Ot();return}m!==void 0&&(na(m),m=void 0),h!==""&&(m=Qt(()=>{if(Lt){Mt.data;for(var p=Ot(),C=p;p!==null&&(p.nodeType!==8||p.data!=="");)C=p,p=Xt(p);if(p===null)throw $t(),ea;Ct(Mt,C),n=ta(p);return}var A=h+"",T=Kt(A);Ct(aa(T),T.lastChild),n.before(T)}))})}const ft=Symbol.for("svelte-maplibre");function Fe(){return ra(ft)}function _a(r){let t=new WeakMap;return u=>{var h;let e=t.get(u.originalEvent);if(e!==void 0)return e;let n=(h=u.target.queryRenderedFeatures(u.point).find(m=>{var p;return(p=r.get(m.layer.id))==null?void 0:p.interactive}))==null?void 0:h.layer.id;return t.set(u.originalEvent,n),n}}function ya(){let r=new Map;return Et(ft,{map:ke(null),source:lt(null),layer:lt(null),popupTarget:lt(null),cluster:ke(),loadedImages:ke(new Set),minzoom:ke(0),maxzoom:ke(24),layerEvent:ke(null),layerInfo:r,eventTopMost:_a(r),markerClickManager:new Ca})}function Tt(r){return{subscribe:r.subscribe}}function ba({key:r,setPopupTarget:t=!1,setCluster:u=!1,setMouseEvent:e=!1}){let o=Fe(),n=ke(null),h=Tt(n),m={...o,[r]:Tt(n)};if(t&&(m.popupTarget=h),e){let p=ke(null);m.layerEvent=p,o.layerEvent=p}return u&&(m.cluster=ke()),Et(ft,m),{...o,self:n}}function xa(){return ba({key:"popupTarget",setPopupTarget:!0,setMouseEvent:!0})}function ka(r){return"layerType"in r&&r.layerType==="deckgl"}class Ca{constructor(){kt(this,"_handlers",new Set)}add(t){this._handlers.add(t)}remove(t){this._handlers.delete(t)}handleClick(t){for(const u of this._handlers)u(t)}}var Dt=wa;function wa(r){var t,u,e;if(r){if(Array.isArray(r)){for(t=[],u=r.length,e=0;e<u;e++){var o=r[e];o!=null&&t.push(o)}return t}if(typeof r=="object"){t={};var n=Object.keys(r);for(u=n.length,e=0;e<u;e++){var h=n[e],m=r[h];m!=null&&(t[h]=m)}return t}}}function La(r,t){Te(t,!1);const u=Ae(),e=()=>oe(Z,"$marker",u),o=()=>oe(M,"$map",u);let n=i(t,"marker",12,void 0),h=i(t,"lngLat",12),m=i(t,"class",8,void 0),p=i(t,"draggable",8,!1),C=i(t,"feature",8,null),A=i(t,"offset",8,void 0),T=i(t,"rotation",8,0),R=i(t,"opacity",8,1);const U=dt(),{map:M,layerEvent:G,self:Z}=xa(),ge=()=>V("dragstart"),fe=()=>{X(),V("drag")},J=()=>{X(),V("dragend")};Pe(Z,new ce.Marker(Dt({draggable:p(),rotation:T(),className:m(),offset:A(),opacity:R().toString()})).setLngLat(h()).addTo(o())),n(e()),p()&&(e().on("dragstart",ge),e().on("drag",fe),e().on("dragend",J)),Ze(()=>{var k;n(void 0),(k=e())==null||k.remove()});function X(){var $;let k=($=e())==null?void 0:$.getLngLat();k&&(Array.isArray(h())?h([k.lng,k.lat]):h()&&"lon"in h()?h({lon:k.lng,lat:k.lat}):h(k))}function V(k){var _e,ye;let $=(_e=e())==null?void 0:_e.getLngLat();if(!$)return;const he=[$.lng,$.lat];let ee={map:o(),marker:e(),lngLat:he,features:[{type:"Feature",properties:((ye=C())==null?void 0:ye.properties)??{},geometry:{type:"Point",coordinates:he}}]};Pe(G,{...ee,layerType:"marker",type:k}),U(k,ee)}S(()=>(e(),g(h())),()=>{var k;(k=e())==null||k.setLngLat(h())}),S(()=>(e(),g(A())),()=>{var k;(k=e())==null||k.setOffset(A()??[0,0])}),S(()=>(e(),g(T())),()=>{var k;(k=e())==null||k.setRotation(T())}),S(()=>(e(),g(R())),()=>{var k;(k=e())==null||k.setOpacity(R().toString())}),qe(),De();var ue=Ke(),E=de(ue);ct(E,t,"default",{get marker(){return e()}},null),D(r,ue),Se()}function Oa(r,t){Te(t,!1);const u=Ae(),e=()=>oe(o,"$map",u),{map:o}=Fe();let n=i(t,"position",8,"top-left"),h=i(t,"container",8,void 0),m=z(null);Ze(()=>{var p;(p=e())!=null&&p.loaded()&&a(m)&&e().removeControl(a(m))}),S(()=>(e(),a(m),g(h()),g(n())),()=>{if(e()&&!a(m)){let p;typeof h()=="string"?p=document.querySelector(h())??void 0:p=h(),O(m,new ce.FullscreenControl({container:p})),e().addControl(a(m),n())}}),qe(),De(),Se()}function Ma(r,t){Te(t,!1);const u=Ae(),e=()=>oe(o,"$map",u),{map:o}=Fe();let n=i(t,"position",8,"top-left"),h=i(t,"positionOptions",8,void 0),m=i(t,"fitBoundsOptions",8,void 0),p=i(t,"trackUserLocation",8,!1),C=i(t,"showAccuracyCircle",8,!0),A=i(t,"showUserLocation",8,!0),T=i(t,"control",12,null);Ze(()=>{var R;(R=e())!=null&&R.loaded()&&T()&&e().removeControl(T())}),S(()=>(e(),g(T()),g(h()),g(m()),g(p()),g(C()),g(A()),g(n())),()=>{e()&&!T()&&(T(new ce.GeolocateControl({positionOptions:h(),fitBoundsOptions:m(),trackUserLocation:p(),showAccuracyCircle:C(),showUserLocation:A()})),e().addControl(T(),n()))}),qe(),De(),Se()}function Pa(r){let t=r.getCenter(),u=Math.round(r.getZoom()*100)/100,e=Math.ceil((u*Math.LN2+Math.log(512/360/.5))/Math.LN10),o=Math.pow(10,e),n=Math.round(t.lat*o)/o,h=Math.round(t.lng*o)/o,m=`${u}/${n}/${h}`,p=r.getBearing(),C=r.getPitch();return(p||C)&&(m+=`/${Math.round(p*10)/10}`),C&&(m+=`/${Math.round(C)}`),`#${m}`}function Ta(r){return r.replace("#","").split("/").map(parseFloat)}var He=ut;function ut(r,t){return r===t||r!==r&&t!==t?!0:typeof r!=typeof t||{}.toString.call(r)!={}.toString.call(t)||r!==Object(r)||!r?!1:Array.isArray(r)?St(r,t):{}.toString.call(r)=="[object Set]"?St(Array.from(r),Array.from(t)):{}.toString.call(r)=="[object Object]"?Ea(r,t):Sa(r,t)}function Sa(r,t){return r.toString()===t.toString()}function St(r,t){var u=r.length;if(u!=t.length)return!1;for(var e=0;e<u;e++)if(!ut(r[e],t[e]))return!1;return!0}function Ea(r,t){var u=Object.keys(r),e=u.length;if(e!=Object.keys(t).length)return!1;for(var o=0;o<e;o++){var n=u[o];if(!(t.hasOwnProperty(n)&&ut(r[n],t[n])))return!1}return!0}function Ia(r,t){Te(t,!1);const u=Ae(),e=()=>oe(o,"$map",u),{map:o}=Fe();let n=i(t,"position",8,"top-left"),h=i(t,"showCompass",8,!0),m=i(t,"showZoom",8,!0),p=i(t,"visualizePitch",8,!1),C=z(null);Ze(()=>{var A;(A=e())!=null&&A.loaded()&&a(C)&&e().removeControl(a(C))}),S(()=>(e(),a(C),g(h()),g(m()),g(p()),g(n())),()=>{e()&&!a(C)&&(O(C,new ce.NavigationControl({showCompass:h(),showZoom:m(),visualizePitch:p()})),e().addControl(a(C),n()))}),qe(),De(),Se()}function Aa(r,t){Te(t,!1);const u=Ae(),e=()=>oe(o,"$map",u),{map:o}=Fe();let n=i(t,"position",8,"bottom-left"),h=i(t,"maxWidth",8,void 0),m=i(t,"unit",8,"metric"),p=z(null);Ze(()=>{var C;(C=e())!=null&&C.loaded()&&a(p)&&e().removeControl(a(p))}),S(()=>(e(),a(p),g(h()),g(m()),g(n())),()=>{e()&&!a(p)&&(O(p,new ce.ScaleControl({maxWidth:h(),unit:m()})),e().addControl(a(p),n()))}),qe(),De(),Se()}var qa=W("<!> <!> <!> <!>",1),Da=W("<!> <!>",1),ja=W('<div data-testid="map-container"><!></div>');function Ra(r,t){Te(t,!1);const u=Ae(),e=()=>oe(Y,"$mapInstance",u),o=()=>oe(ie,"$loadedImages",u),n=z(),h=z();let m=i(t,"map",12,null),p=i(t,"mapContainer",12,void 0),C=i(t,"class",8,void 0),A=i(t,"style",8),T=i(t,"diffStyleUpdates",8,!1),R=i(t,"center",12,void 0),U=i(t,"zoom",12,void 0),M=i(t,"pitch",12,0),G=i(t,"bearing",12,0),Z=i(t,"bounds",12,void 0),ge=i(t,"hash",8,!1),fe=i(t,"updateHash",8,d=>{window.history.replaceState(window.history.state,"",d)}),J=i(t,"loaded",12,!1),X=i(t,"minZoom",8,0),V=i(t,"maxZoom",8,22),ue=i(t,"minPitch",8,0),E=i(t,"maxPitch",8,60),k=i(t,"renderWorldCopies",8,void 0),$=i(t,"dragPan",8,void 0),he=i(t,"dragRotate",8,void 0),ee=i(t,"pitchWithRotate",8,void 0),_e=i(t,"antialias",8,void 0),ye=i(t,"zoomOnDoubleClick",8,!0),Ce=i(t,"locale",8,void 0),Ne=i(t,"interactive",8,!0),y=i(t,"attributionControl",8,!0),we=i(t,"cooperativeGestures",8,!1),K=i(t,"preserveDrawingBuffer",8,!1),Ee=i(t,"maxBounds",8,void 0),te=i(t,"images",24,()=>[]),H=i(t,"standardControls",8,!1),F=i(t,"filterLayers",8,void 0),je=i(t,"transformRequest",8,void 0);const q=dt(),{map:Y,loadedImages:ie}=ya();let ve=z(new Set);async function Le(d,s=!1){var w;if(e()&&!(!e().loaded()&&!s))if("url"in d){a(ve).add(d.id);try{let B=await e().loadImage(d.url);(w=e())==null||w.addImage(d.id,B.data,d.options),o().add(d.id),Pe(ie,o())}catch(B){q("error",B)}finally{a(ve).delete(d.id)}}else e().addImage(d.id,d.data,d.options),o().add(d.id),Pe(ie,o())}let me=z(void 0),ae=z(void 0),pe=z(void 0),Q=z(void 0);function Oe(d){return l(),Pe(Y,new ce.Map(Dt({container:d,style:A(),locale:Ce(),center:R(),zoom:U(),pitch:M(),bearing:G(),minZoom:X(),maxZoom:V(),minPitch:ue(),maxPitch:E(),renderWorldCopies:k(),dragPan:$(),dragRotate:he(),pitchWithRotate:ee(),antialias:_e(),interactive:Ne(),preserveDrawingBuffer:K(),maxBounds:Ee(),bounds:Z(),attributionControl:y(),transformRequest:je(),cooperativeGestures:we()}))),e().on("load",s=>{s.target.getContainer().setAttribute("data-testid","map"),s.target.getCanvas().setAttribute("data-testid","map-canvas"),J(!0),q("load",e())}),e().on("error",s=>q("error",{...s,map:e()})),e().on("movestart",s=>q("movestart",{...s,map:e()})),e().on("moveend",s=>{if(R(s.target.getCenter()),U(s.target.getZoom()),M(s.target.getPitch()),G(s.target.getBearing()),Z(s.target.getBounds()),q("moveend",{...s,map:e()}),ge()){let w=new URL(window.location.href.replace(/(#.+)?$/,Pa(e())));fe()(w)}}),e().on("click",s=>q("click",{...s,map:e()})),e().on("dblclick",s=>q("dblclick",{...s,map:e()})),e().on("contextmenu",s=>q("contextmenu",{...s,map:e()})),e().on("zoomstart",s=>q("zoomstart",{...s,map:e()})),e().on("zoom",s=>{q("zoom",{...s,map:e()})}),e().on("zoomend",s=>{q("zoomend",{...s,map:e()})}),e().on("style.load",()=>{if(e()){const s=e().getStyle();if(O(me,s.layers.map(w=>w.id)),O(ae,Object.keys(s.sources)),a(Q))for(const[w,B]of Object.entries(a(Q)))e().addSource(w,B);if(a(pe))for(const w of a(pe))e().addLayer(w);for(const w of te())Le(w,!0)}}),e().on("styledata",s=>{if(e()&&F()){const w=e().getStyle().layers;if(w)for(let B of w)F()(B)||e().setLayoutProperty(B.id,"visibility","none")}q("styledata",{...s,map:e()})}),{destroy(){var s;J(!1),(s=e())==null||s.remove(),Pe(Y,null)}}}let Ie=z(A());function l(){if(ge()){let d=Ta(window.location.hash);d.length>=3&&(U(d[0]),R([d[2],d[1]])),d.length==5&&(G(d[3]),M(d[4]))}}S(()=>g(H()),()=>{O(n,typeof H()=="boolean"?void 0:H())}),S(()=>e(),()=>{m(e())}),S(()=>(e(),g(A()),a(Ie),a(me),a(ae),g(T())),()=>{if(e()&&!He(A(),a(Ie))){const d=e().getStyle();if(a(me)&&O(pe,d.layers.filter(s=>!a(me).includes(s.id))),a(ae)){const s=Object.keys(d.sources).filter(w=>!a(ae).includes(w));O(Q,{});for(const w of s)It(Q,a(Q)[w]=d.sources[w])}O(Ie,A()),e().setStyle(A(),{diff:T()}),Pe(ie,new Set),O(ve,new Set)}}),S(()=>(g(J()),e(),g(te()),o(),a(ve)),()=>{var d;if(J()&&((d=e())!=null&&d.loaded()))for(let s of te())!o().has(s.id)&&!a(ve).has(s.id)&&!e().hasImage(s.id)&&Le(s)}),S(()=>(g(te()),o()),()=>{O(h,te().every(d=>o().has(d.id)))}),S(()=>(e(),g(R()),g(U()),g(G()),g(M())),()=>{var d,s,w,B;if(e()){let se={};R()!=null&&!He(R(),(d=e())==null?void 0:d.getCenter())&&(se.center=R()),U()!=null&&!He(U(),(s=e())==null?void 0:s.getZoom())&&(se.zoom=U()),G()!=null&&!He(G(),(w=e())==null?void 0:w.getBearing())&&(se.bearing=G()),M()!=null&&!He(M(),(B=e())==null?void 0:B.getPitch())&&(se.pitch=M()),Object.keys(se).length&&e().easeTo(se)}}),S(()=>(g(Z()),e()),()=>{var d,s;Z()&&!He(Z(),(d=e())==null?void 0:d.getBounds())&&((s=e())==null||s.fitBounds(Z()))}),S(()=>(g(ye()),e()),()=>{var d,s;ye()?(d=e())==null||d.doubleClickZoom.enable():(s=e())==null||s.doubleClickZoom.disable()}),qe(),De();var I=ja();Yt("hashchange",oa,l);var be=v(I);re(be,()=>e()&&J(),d=>{var s=Da(),w=de(s);re(w,H,se=>{var Re=qa(),Je=de(Re);Ia(Je,{get position(){return a(n)}});var Be=f(Je,2);Ma(Be,{get position(){return a(n)},fitBoundsOptions:{maxZoom:12}});var Qe=f(Be,2);Oa(Qe,{get position(){return a(n)}});var et=f(Qe,2);Aa(et,{get position(){return a(n)}}),D(se,Re)});var B=f(w,2);ct(B,t,"default",{get map(){return e()},get loadedImages(){return o()},get allImagesLoaded(){return a(h)}},null),D(d,s)}),c(I),qt(I,d=>p(d),()=>p()),va(I,d=>Oe(d)),le(()=>{ca(I,`${C()??""} svelte-p00lfq`),fa(I,"expand-map",!C())}),D(r,I),Se()}var Ba=W("<div><!></div>");function za(r,t){const u=ma(t);Te(t,!1);const e=Ae(),o=()=>oe(he,"$popupTarget",e),n=()=>oe($,"$map",e),h=()=>oe(_e,"$layer",e),m=()=>oe(ee,"$layerEvent",e),p=z(),C=z();let A=i(t,"closeButton",8,void 0),T=i(t,"closeOnClickOutside",8,!0),R=i(t,"closeOnClickInside",8,!1),U=i(t,"closeOnMove",8,!1),M=i(t,"openOn",8,"click"),G=i(t,"openIfTopMost",8,!0),Z=i(t,"focusAfterOpen",8,!0),ge=i(t,"anchor",8,void 0),fe=i(t,"offset",8,void 0),J=i(t,"popupClass",8,void 0),X=i(t,"maxWidth",8,void 0),V=i(t,"lngLat",12,void 0),ue=i(t,"html",8,void 0),E=i(t,"open",12,!1);const k=dt(),{map:$,popupTarget:he,layerEvent:ee,layer:_e,eventTopMost:ye,markerClickManager:Ce}=Fe(),Ne=["click","dblclick","contextmenu"];let y=z(),we=z(!1),K=z();function Ee(){if(!a(y))return;let l=a(y).getElement();!l||l===a(K)||(O(K,l),M()==="hover"&&It(K,a(K).style.pointerEvents="none"),a(K).addEventListener("mouseenter",()=>{O(we,!0)},{passive:!0}),a(K).addEventListener("mouseleave",()=>{O(we,!1)},{passive:!0}),a(K).addEventListener("click",()=>{R()&&E(!1)},{passive:!0}))}At(()=>{if(n())return n().on("click",ae),n().on("contextmenu",ae),Ce.add(pe),typeof o()=="string"&&(n().on("click",o(),q),n().on("dblclick",o(),q),n().on("contextmenu",o(),q),n().on("mousemove",o(),me),n().on("mouseleave",o(),Le),n().on("touchstart",o(),ie),n().on("touchend",o(),ve)),()=>{var l,I;(l=n())!=null&&l.loaded()&&((I=a(y))==null||I.remove(),n().off("click",ae),n().off("contextmenu",ae),Ce.remove(pe),o()instanceof ce.Marker?o().getPopup()===a(y)&&o().setPopup(void 0):typeof o()=="string"&&(n().off("click",o(),q),n().off("dblclick",o(),q),n().off("contextmenu",o(),q),n().off("mousemove",o(),me),n().off("mouseleave",o(),Le),n().off("touchstart",o(),ie),n().off("touchend",o(),ve)))}});function te(l){return G()?!("marker"in l)&&!ka(l)&&ye(l)!==h():!1}let H=z(null),F=z("normal");function je(l){"layerType"in l&&l.layerType==="deckgl"?(V(l.coordinate),O(H,l.object?[l.object]:null)):(V(l.lngLat),O(H,l.features??[]))}function q(l){l.type!==M()||te(l)||(je(l),setTimeout(()=>E(!0)))}let Y=null;function ie(l){Y=l.point}function ve(l){if(!Y||M()!=="hover")return;let I=Y.dist(l.point);Y=null,I<3&&(V(l.lngLat),O(H,l.features??[]),a(y).isOpen()?O(F,"justOpened"):(O(F,"opening"),E(!0)))}function Le(l){M()!=="hover"||Y||a(F)!=="normal"||(E(!1),O(H,null))}function me(l){if(!(M()!=="hover"||Y||a(F)!=="normal")){if(te(l)){E(!1),O(H,null);return}E(!0),O(H,l.features??[]),V(l.lngLat)}}function ae(l){var be;if(a(F)==="justOpened"){O(F,"normal");return}if(!T())return;let I=[a(K),o()instanceof ce.Marker?(be=o())==null?void 0:be.getElement():null];E()&&a(y).isOpen()&&!I.some(d=>d==null?void 0:d.contains(l.originalEvent.target))&&(l.type==="contextmenu"&&M()==="contextmenu"||l.type!=="contextmenu")&&E(!1)}function pe(l){T()&&E()&&a(y).isOpen()&&l.marker!==o()&&E(!1)}Ze(()=>{var l;n()&&((l=a(y))!=null&&l.isOpen())&&a(y).remove()});let Q=z();S(()=>(g(A()),g(T()),g(R())),()=>{O(p,A()??(!T()&&!R()))}),S(()=>(a(y),a(p),g(U()),g(Z()),g(X()),g(J()),g(ge()),g(fe())),()=>{a(y)||(O(y,new ce.Popup({closeButton:a(p),closeOnClick:!1,closeOnMove:U(),focusAfterOpen:Z(),maxWidth:X(),className:J(),anchor:ge(),offset:fe()})),O(K,a(y).getElement()),a(y).on("open",()=>{E(!0),Ee(),k("open",a(y))}),a(y).on("close",()=>{E(!1),k("close",a(y))}),a(y).on("hover",()=>{k("hover",a(y))}))}),S(()=>(a(y),o(),g(M())),()=>{a(y)&&o()instanceof ce.Marker&&(M()==="click"?o().setPopup(a(y)):o().getPopup()===a(y)&&o().setPopup(void 0))}),S(()=>(g(M()),m()),()=>{var l;Ne.includes(M())&&((l=m())==null?void 0:l.type)===M()&&(q(m()),Pe(ee,null))}),S(()=>(g(M()),m()),()=>{var l,I;O(C,M()==="hover"&&(((l=m())==null?void 0:l.type)==="mousemove"||((I=m())==null?void 0:I.type)==="mouseenter"))}),S(()=>(g(M()),a(C),m(),a(we)),()=>{M()==="hover"&&ee&&(a(C)&&m()&&je(m()),E((a(C)||a(we))??!1))}),S(()=>(a(Q),a(y),g(ue())),()=>{a(Q)?a(y).setDOMContent(a(Q)):ue()&&a(y).setHTML(ue())}),S(()=>(g(V()),a(y)),()=>{V()&&a(y).setLngLat(V())}),S(()=>(n(),a(y),g(E()),a(F)),()=>{if(n()){let l=a(y).isOpen();E()&&!l?(a(y).addTo(n()),a(F)==="opening"&&O(F,"justOpened")):!E()&&l&&a(y).remove()}}),qe(),De();var Oe=Ke(),Ie=de(Oe);re(Ie,()=>u.default,l=>{var I=Ba(),be=v(I);re(be,()=>{var d;return((d=a(H))==null?void 0:d.length)||o()instanceof ce.Marker},d=>{var s=Ke(),w=de(s);ct(w,t,"default",{get features(){return a(H)},get data(){var B;return((B=a(H))==null?void 0:B[0])??null},get map(){return n()},close:()=>E(!1)},null),D(d,s)}),c(I),qt(I,d=>O(Q,d),()=>a(Q)),D(l,I)}),D(r,Oe),Se()}var Ye=Uint8Array,jt=Uint16Array,Ha=Int32Array,Za=new Ye([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Fa=new Ye([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Rt=function(r,t){for(var u=new jt(31),e=0;e<31;++e)u[e]=t+=1<<r[e-1];for(var o=new Ha(u[30]),e=1;e<30;++e)for(var n=u[e];n<u[e+1];++n)o[n]=n-u[e]<<5|e;return{b:u,r:o}},Bt=Rt(Za,2),Na=Bt.b,Wa=Bt.r;Na[28]=258,Wa[258]=28;Rt(Fa,0);var Ua=new jt(32768);for(L=0;L<32768;++L)xe=(L&43690)>>1|(L&21845)<<1,xe=(xe&52428)>>2|(xe&13107)<<2,xe=(xe&61680)>>4|(xe&3855)<<4,Ua[L]=((xe&65280)>>8|(xe&255)<<8)>>1;var xe,L,$e=new Ye(288);for(L=0;L<144;++L)$e[L]=8;var L;for(L=144;L<256;++L)$e[L]=9;var L;for(L=256;L<280;++L)$e[L]=7;var L;for(L=280;L<288;++L)$e[L]=8;var L,Ga=new Ye(32);for(L=0;L<32;++L)Ga[L]=5;var L,Va=new Ye(0),Ka=typeof TextDecoder<"u"&&new TextDecoder,Ya=0;try{Ka.decode(Va,{stream:!0}),Ya=1}catch{}var Ja=W(", <a> </a>",1),Qa=W('<section id="translations" class="svelte-xd5ukq"></section>'),Xa=W("<dt>Object type</dt> <dd><a> </a></dd>",1),$a=W(" <!>",1),en=W("<dd> </dd>"),tn=W("<dd> </dd>"),an=W('<div class="popup"> </div>'),nn=W("<dt>Map</dt> <dd><!></dd>",1),rn=W("<p> </p>"),on=W("<dl><dt>Place</dt> <dd> </dd> <dt>Repository</dt> <dd><a> </a><!></dd> <dt>Autopsy</dt> <dd> </dd> <dt>Map</dt> <dd>TODO: use the geo information in the museums dataset</dd></dl>"),sn=W('<section id="bibliography" class="svelte-xd5ukq"></section>'),ln=W('<article><hgroup><h1 class="inscription-title svelte-xd5ukq"> </h1> <p> <a> </a><!></p> <p> <a target="inscription">View in current site</a></p></hgroup> <div class="sections svelte-xd5ukq"><figure id="facsimile-images" class="svelte-xd5ukq"><section id="image-viewer" style="height: 50vh; width: 100%;" class="svelte-xd5ukq"></section> <figcaption class="svelte-xd5ukq"> </figcaption></figure> <section id="edition" class="svelte-xd5ukq"><!></section> <section id="apparatus" class="svelte-xd5ukq"><!></section> <!> <section id="physical-description" class="svelte-xd5ukq"><h2>Physical description</h2> <section class="svelte-xd5ukq"><h3>Support</h3> <dl><dt>Description</dt> <dd> </dd> <!> <dt>Material</dt> <dd><a> </a></dd> <dt>Condition</dt> <dd>TODO: add condition</dd> <dt>Dimensions</dt> <dd></dd></dl></section> <section class="svelte-xd5ukq"><h3>Inscription</h3> <dl><dt>Layout</dt> <dd> </dd> <dt>Text condition</dt> <dd> </dd> <dt>Lettering</dt> <dd> </dd> <dt>Letter heights</dt> <!> <dt>Interlinear heights</dt> <!></dl></section></section> <section id="provenance" class="svelte-xd5ukq"><h2>Provenance</h2> <dl><dt>Place of origin</dt> <dd> <a> </a></dd> <dt>Provenance found</dt> <dd> </dd> <!></dl></section> <section id="current-location" class="svelte-xd5ukq"><h2>Current location</h2> <!></section> <section id="date" class="svelte-xd5ukq"><h2>Date</h2> <!> <dl><dt>Evidence</dt> <dd> </dd></dl></section> <section id="text-type" class="svelte-xd5ukq"><h2>Text type</h2> <p><a> </a></p></section> <section id="commentary" class="svelte-xd5ukq"><!></section> <!> <section id="citation-and-status" class="svelte-xd5ukq"><h2>Citation and editorial status</h2> <dl><dt>Citation</dt> <dd> </dd></dl></section></div></article>');function kn(r,t){Te(t,!0);let{slug:u,metadata:e,images:o,html:n}=t.data,h=ia(la(o[0].desc));const m=n.divs.find(b=>b.id==="edition"),p=n.divs.find(b=>b.id==="apparatus"),C=n.divs.filter(b=>b.id==="translation"),A=n.divs.find(b=>b.id==="commentary"),T=n.divs.filter(b=>b.id==="bibliography");let R=o.map(b=>`${pa}${u}/${b.url}/info.json`),U;At(async()=>{U=(await Vt(async()=>{const{default:_}=await import("../chunks/openseadragon.DS3KAUka.js").then(x=>x.o);return{default:_}},__vite__mapDeps([0,1,2,3,4]),import.meta.url)).default,U({id:"image-viewer",prefixUrl:`${da}/openseadragon/images/`,tileSources:R,sequenceMode:!0,showReferenceStrip:!0,preserveViewport:!0}).addHandler("page",function(_){const x=o[_.page];O(h,`${x.surfaceType}, ${x.desc}`)})});var M=ln(),G=v(M),Z=v(G),ge=v(Z);c(Z);var fe=f(Z,2),J=v(fe),X=f(J),V=v(X,!0);c(X);var ue=f(X);re(ue,()=>e.objectType,b=>{var _=Ja(),x=f(de(_)),j=v(x,!0);c(x),le(()=>{Me(x,"href",e.objectType.ref),P(j,e.objectType._)}),D(b,_)}),c(fe);var E=f(fe,2),k=v(E),$=f(k);c(E),c(G);var he=f(G,2),ee=v(he),_e=f(v(ee),2),ye=v(_e,!0);c(_e),c(ee);var Ce=f(ee,2),Ne=v(Ce);Ve(Ne,()=>m.html),c(Ce);var y=f(Ce,2),we=v(y);Ve(we,()=>p.html),c(y);var K=f(y,2);re(K,()=>C.length,b=>{var _=Qa();Ue(_,21,()=>C,Ge,(x,j)=>{var N=Ke(),ne=de(N);Ve(ne,()=>a(j).html),D(x,N)}),c(_),D(b,_)});var Ee=f(K,2),te=f(v(Ee),2),H=f(v(te),2),F=f(v(H),2),je=v(F,!0);c(F);var q=f(F,2);re(q,()=>e.objectType,b=>{var _=Xa(),x=f(de(_),2),j=v(x),N=v(j,!0);c(j),c(x),le(()=>{Me(j,"href",e.objectType.ref),P(N,e.objectType._)}),D(b,_)});var Y=f(q,4),ie=v(Y),ve=v(ie,!0);c(ie),c(Y);var Le=f(Y,8);Ue(Le,21,()=>e.dimensions,Ge,(b,_,x)=>{Pt();var j=$a(),N=de(j),ne=f(N);re(ne,()=>x<e.dimensions.length-1,Xe=>{var We=wt(",Â ");D(Xe,We)}),le(()=>P(N,`${a(_).dimension??""}: ${a(_)._??""}
							${a(_).unit??""}`)),D(b,j)}),c(Le),c(H),c(te);var me=f(te,2),ae=f(v(me),2),pe=f(v(ae),2),Q=v(pe,!0);c(pe);var Oe=f(pe,4),Ie=v(Oe,!0);c(Oe);var l=f(Oe,4),I=v(l,!0);c(l);var be=f(l,4);Ue(be,17,()=>e.handNote.dimensions.filter(b=>b.type==="letterHeight"),Ge,(b,_)=>{var x=en(),j=v(x);c(x),le(()=>P(j,`${a(_).l??""}: ${a(_).h??""}${a(_).unit??""}`)),D(b,x)});var d=f(be,4);Ue(d,17,()=>e.handNote.dimensions.filter(b=>b.type==="interlinear"),Ge,(b,_)=>{var x=tn(),j=v(x);c(x),le(()=>P(j,`${a(_).l??""}: ${a(_).h??""}${(a(_).h!=="not measured"?a(_).unit:"")??""}`)),D(b,x)}),c(ae),c(me),c(Ee);var s=f(Ee,2),w=f(v(s),2),B=f(v(w),2),se=v(B),Re=f(se),Je=v(Re,!0);c(Re),c(B);var Be=f(B,4),Qe=v(Be,!0);c(Be);var et=f(Be,2);re(et,()=>e.provenanceFound.geo,b=>{var _=nn();const x=sa(()=>[e.provenanceFound.geo[1],e.provenanceFound.geo[0]]);var j=f(de(_),2),N=v(j);Ra(N,{get center(){return a(x)},zoom:7,class:"map",standardControls:!0,style:"https://api.maptiler.com/maps/positron/style.json?key=brTBbnRxuiKp6PgjwFPr",children:(ne,Xe)=>{La(ne,{get lngLat(){return a(x)},children:(We,it)=>{za(We,{offset:[0,-10],children:(st,xt)=>{var ze=an(),Wt=v(ze,!0);c(ze),le(()=>P(Wt,e.provenanceFound._)),D(st,ze)},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}}),c(j),D(b,_)}),c(w),c(s);var tt=f(s,2),zt=f(v(tt),2);re(zt,()=>e.provenanceLost,b=>{var _=rn(),x=v(_,!0);c(_),le(()=>P(x,e.provenanceLost._)),D(b,_)},b=>{var _=on(),x=f(v(_),2),j=v(x);c(x);var N=f(x,4),ne=v(N),Xe=v(ne,!0);c(ne);var We=f(ne);re(We,()=>e.idno,xt=>{var ze=wt();le(()=>P(ze,`,
							${e.idno._??""}`)),D(xt,ze)}),c(N);var it=f(N,4),st=v(it,!0);c(it),Pt(4),c(_),le(()=>{P(j,`${e.settlement??""}, ${e.country??""}`),Me(ne,"href",e.repository.ref),P(Xe,e.repository._),P(st,e.provenanceObserved._)}),D(b,_)}),c(tt);var at=f(tt,2),vt=f(v(at),2);ua(vt,{inscription:e});var mt=f(vt,2),pt=f(v(mt),2),Ht=v(pt,!0);c(pt),c(mt),c(at);var nt=f(at,2),gt=f(v(nt),2),rt=v(gt),Zt=v(rt,!0);c(rt),c(gt),c(nt);var ot=f(nt,2),Ft=v(ot);Ve(Ft,()=>A.html),c(ot);var ht=f(ot,2);re(ht,()=>T.length,b=>{var _=sn();Ue(_,21,()=>T,Ge,(x,j)=>{var N=Ke(),ne=de(N);Ve(ne,()=>a(j).html),D(x,N)}),c(_),D(b,_)});var _t=f(ht,2),yt=f(v(_t),2),bt=f(v(yt),2),Nt=v(bt,!0);c(bt),c(yt),c(_t),c(he),c(M),le(()=>{P(ge,`${e.file??""}: ${e.title??""}`),P(J,`${e.textLang._??""}, `),Me(X,"href",e.type.ref),P(V,e.type._),P(k,`${e.status??""}, `),Me($,"href",`${ga}inscription/${u??""}`),P(ye,a(h)),P(je,e.support),Me(ie,"href",e.material.ref),P(ve,e.material._),P(Q,e.layoutDesc.layout.p),P(Ie,e.layoutDesc.layout.damage||ha),P(I,e.handNote.lettering),P(se,`${(e.places[0].offset||"")??""} `),Me(Re,"href",e.places[0].ref),P(Je,e.places[0]._),P(Qe,e.provenanceFound._),P(Ht,e.evidence),Me(rt,"href",e.type.ref),P(Zt,e.type._),P(Nt,e.citation)}),D(r,M),Se()}export{kn as component};
