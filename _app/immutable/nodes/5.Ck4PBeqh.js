const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["../chunks/openseadragon.DkbNtmsO.js","../chunks/maplibre-gl.61uqlhBh.js","../chunks/runtime.B0uei5AR.js","../chunks/disclose-version.DcaOGNfW.js","../chunks/store.hMUTOxbU.js","../chunks/utils.IkkrDks1.js","../assets/maplibre-gl.CuCRB34y.css"])))=>i.map(i=>d[i]);
var oa=Object.defineProperty;var ia=(o,t,h)=>t in o?oa(o,t,{enumerable:!0,configurable:!0,writable:!0,value:h}):o[t]=h;var Pt=(o,t,h)=>ia(o,typeof t!="symbol"?t+"":t,h);import{_ as la}from"../chunks/preload-helper.C1FmrZbK.js";import{d as Tt,f as sa,c as Ie,a as x,b as et,t as O}from"../chunks/disclose-version.DcaOGNfW.js";import{w as da,y as It,z as Dt,x as ca,B as Rt,a6 as fa,aM as ua,aL as va,M as ma,a0 as ga,$ as _a,p as pe,v as F,o as c,q as l,t as R,s as u,m as be,aQ as ha,aR as Ht,aS as z,aT as He,f as C,g as a,aU as W,C as I,aV as ya,aW as Wt,h as it,J as pa,n as ba}from"../chunks/runtime.B0uei5AR.js";import{a as k,s as We,o as Te,b as oe,p as xa}from"../chunks/store.hMUTOxbU.js";import{i as B,p as f,b as Ft,a as Ca}from"../chunks/props.C23QKWYa.js";import{s as re,a as _t,c as wa,d as ka,e as Ye,i as Je}from"../chunks/attributes.UrEMnwFy.js";import{c as ht,a as Qe,o as Nt}from"../chunks/index-client.CV7s9Mx5.js";import{w as Me,r as mt,b as La}from"../chunks/paths.BYIvN26k.js";import{m as ve,s as Oa,t as Ma,I as Ea}from"../chunks/maplibre-gl.61uqlhBh.js";import{d as gt,i as Sa,m as At,E as ue,p as Pa}from"../chunks/config.xn5Jidz-.js";import"../chunks/legacy.gAK5gMZW.js";import{i as Fe}from"../chunks/lifecycle.CI_WYKig.js";function $e(o,t,h,e,r){var n=o,b="",d;da(()=>{if(b===(b=t()??"")){It&&Dt();return}d!==void 0&&(_a(d),d=void 0),b!==""&&(d=ca(()=>{if(It){Rt.data;for(var i=Dt(),_=i;i!==null&&(i.nodeType!==8||i.data!=="");)_=i,i=fa(i);if(i===null)throw ua(),va;Tt(Rt,_),n=ma(i);return}var M=b+"",w=sa(M);Tt(ga(w),w.lastChild),n.before(w)}))})}var Ta=O("<!><!>",1),Ia=O("<span> </span>"),Da=O("<span> </span>"),Ra=O("at <a> </a>",1),Aa=O("at <span> </span>",1),ja=O("<a>Zotero</a>"),Ba=O("<a>FAIR</a>"),za=O("<!> <!> <!> <!>",1);function Ua(o,t){pe(t,!0);var h=za(),e=F(h);B(e,()=>t.entry.citation,d=>{var i=Ta(),_=F(i);$e(_,()=>t.entry.citation);var M=u(_);B(M,()=>t.entry.citedRange,w=>{var E=et(",");x(w,E)},w=>{var E=et(".");x(w,E)}),x(d,i)},d=>{var i=Ie(),_=F(i);B(_,()=>t.entry.type==="bulletin"||t.entry.type==="corpus",M=>{var w=Ia(),E=c(w);l(w),R(()=>k(E,`${t.entry.n??""} ${(t.entry.author?`${t.entry.author} (${t.entry.date})`:"")??""}`)),x(M,w)},M=>{var w=Da(),E=c(w);l(w),R(()=>k(E,`${t.entry.author??""} (${t.entry.date??""})`)),x(M,w)},!0),x(d,i)});var r=u(e,2);B(r,()=>{var d;return typeof t.entry.citedRange=="object"&&((d=t.entry.citedRange)==null?void 0:d.ref)},d=>{var i=Ra(),_=u(F(i)),M=c(_,!0);l(_),R(()=>{re(_,"href",t.entry.citedRange.ref.target),k(M,t.entry.citedRange.ref._)}),x(d,i)},d=>{var i=Ie(),_=F(i);B(_,()=>t.entry.citedRange,M=>{var w=Aa(),E=u(F(w)),N=c(E,!0);l(E),R(()=>k(N,t.entry.citedRange)),x(M,w)},null,!0),x(d,i)});var n=u(r,2);B(n,()=>{var d;return(d=t.entry.ptr)==null?void 0:d.target},d=>{var i=ja();R(()=>{var _;return re(i,"href",(_=t.entry.ptr)==null?void 0:_.target)}),x(d,i)});var b=u(n,2);B(b,()=>{var d;return(d=t.entry.ref)==null?void 0:d.target},d=>{var i=Ba();R(()=>re(i,"href",t.entry.ref.target)),x(d,i)}),x(o,h),be()}const yt=Symbol.for("svelte-maplibre");function Xe(){return ha(yt)}function Za(o){let t=new WeakMap;return h=>{var b;let e=t.get(h.originalEvent);if(e!==void 0)return e;let n=(b=h.target.queryRenderedFeatures(h.point).find(d=>{var i;return(i=o.get(d.layer.id))==null?void 0:i.interactive}))==null?void 0:b.layer.id;return t.set(h.originalEvent,n),n}}function Ha(){let o=new Map;return Ht(yt,{map:Me(null),source:mt(null),layer:mt(null),popupTarget:mt(null),cluster:Me(),loadedImages:Me(new Set),minzoom:Me(0),maxzoom:Me(24),layerEvent:Me(null),layerInfo:o,eventTopMost:Za(o),markerClickManager:new qa})}function jt(o){return{subscribe:o.subscribe}}function Wa({key:o,setPopupTarget:t=!1,setCluster:h=!1,setMouseEvent:e=!1}){let r=Xe(),n=Me(null),b=jt(n),d={...r,[o]:jt(n)};if(t&&(d.popupTarget=b),e){let i=Me(null);d.layerEvent=i,r.layerEvent=i}return h&&(d.cluster=Me()),Ht(yt,d),{...r,self:n}}function Fa(){return Wa({key:"popupTarget",setPopupTarget:!0,setMouseEvent:!0})}function Na(o){return"layerType"in o&&o.layerType==="deckgl"}class qa{constructor(){Pt(this,"_handlers",new Set)}add(t){this._handlers.add(t)}remove(t){this._handlers.delete(t)}handleClick(t){for(const h of this._handlers)h(t)}}var qt=Va;function Va(o){var t,h,e;if(o){if(Array.isArray(o)){for(t=[],h=o.length,e=0;e<h;e++){var r=o[e];r!=null&&t.push(r)}return t}if(typeof o=="object"){t={};var n=Object.keys(o);for(h=n.length,e=0;e<h;e++){var b=n[e],d=o[b];d!=null&&(t[b]=d)}return t}}}function Bt(o,t){pe(t,!1);const h=We(),e=()=>oe(Q,"$marker",h),r=()=>oe(D,"$map",h);let n=f(t,"marker",12,void 0),b=f(t,"lngLat",12),d=f(t,"class",8,void 0),i=f(t,"draggable",8,!1),_=f(t,"feature",8,null),M=f(t,"offset",8,void 0),w=f(t,"rotation",8,0),E=f(t,"opacity",8,1);const N=ht(),{map:D,layerEvent:V,self:Q}=Fa(),ie=()=>Y("dragstart"),xe=()=>{Ce(),Y("drag")},G=()=>{Ce(),Y("dragend")};Te(Q,new ve.Marker(qt({draggable:i(),rotation:w(),className:d(),offset:M(),opacity:E().toString()})).setLngLat(b()).addTo(r())),n(e()),i()&&(e().on("dragstart",ie),e().on("drag",xe),e().on("dragend",G)),Qe(()=>{var S;n(void 0),(S=e())==null||S.remove()});function Ce(){var ee;let S=(ee=e())==null?void 0:ee.getLngLat();S&&(Array.isArray(b())?b([S.lng,S.lat]):b()&&"lon"in b()?b({lon:S.lng,lat:S.lat}):b(S))}function Y(S){var Ee,de;let ee=(Ee=e())==null?void 0:Ee.getLngLat();if(!ee)return;const me=[ee.lng,ee.lat];let se={map:r(),marker:e(),lngLat:me,features:[{type:"Feature",properties:((de=_())==null?void 0:de.properties)??{},geometry:{type:"Point",coordinates:me}}]};Te(V,{...se,layerType:"marker",type:S}),N(S,se)}z(()=>(e(),C(b())),()=>{var S;(S=e())==null||S.setLngLat(b())}),z(()=>(e(),C(M())),()=>{var S;(S=e())==null||S.setOffset(M()??[0,0])}),z(()=>(e(),C(w())),()=>{var S;(S=e())==null||S.setRotation(w())}),z(()=>(e(),C(E())),()=>{var S;(S=e())==null||S.setOpacity(E().toString())}),He(),Fe();var le=Ie(),U=F(le);_t(U,t,"default",{get marker(){return e()}},null),x(o,le),be()}function Ga(o,t){pe(t,!1);const h=We(),e=()=>oe(r,"$map",h),{map:r}=Xe();let n=f(t,"position",8,"top-left"),b=f(t,"container",8,void 0),d=W(null);Qe(()=>{var i;(i=e())!=null&&i.loaded()&&a(d)&&e().removeControl(a(d))}),z(()=>(e(),a(d),C(b()),C(n())),()=>{if(e()&&!a(d)){let i;typeof b()=="string"?i=document.querySelector(b())??void 0:i=b(),I(d,new ve.FullscreenControl({container:i})),e().addControl(a(d),n())}}),He(),Fe(),be()}function Ya(o,t){pe(t,!1);const h=We(),e=()=>oe(r,"$map",h),{map:r}=Xe();let n=f(t,"position",8,"top-left"),b=f(t,"positionOptions",8,void 0),d=f(t,"fitBoundsOptions",8,void 0),i=f(t,"trackUserLocation",8,!1),_=f(t,"showAccuracyCircle",8,!0),M=f(t,"showUserLocation",8,!0),w=f(t,"control",12,null);Qe(()=>{var E;(E=e())!=null&&E.loaded()&&w()&&e().removeControl(w())}),z(()=>(e(),C(w()),C(b()),C(d()),C(i()),C(_()),C(M()),C(n())),()=>{e()&&!w()&&(w(new ve.GeolocateControl({positionOptions:b(),fitBoundsOptions:d(),trackUserLocation:i(),showAccuracyCircle:_(),showUserLocation:M()})),e().addControl(w(),n()))}),He(),Fe(),be()}function Ja(o){let t=o.getCenter(),h=Math.round(o.getZoom()*100)/100,e=Math.ceil((h*Math.LN2+Math.log(512/360/.5))/Math.LN10),r=Math.pow(10,e),n=Math.round(t.lat*r)/r,b=Math.round(t.lng*r)/r,d=`${h}/${n}/${b}`,i=o.getBearing(),_=o.getPitch();return(i||_)&&(d+=`/${Math.round(i*10)/10}`),_&&(d+=`/${Math.round(_)}`),`#${d}`}function Ka(o){return o.replace("#","").split("/").map(parseFloat)}var Ke=pt;function pt(o,t){return o===t||o!==o&&t!==t?!0:typeof o!=typeof t||{}.toString.call(o)!={}.toString.call(t)||o!==Object(o)||!o?!1:Array.isArray(o)?zt(o,t):{}.toString.call(o)=="[object Set]"?zt(Array.from(o),Array.from(t)):{}.toString.call(o)=="[object Object]"?Xa(o,t):Qa(o,t)}function Qa(o,t){return o.toString()===t.toString()}function zt(o,t){var h=o.length;if(h!=t.length)return!1;for(var e=0;e<h;e++)if(!pt(o[e],t[e]))return!1;return!0}function Xa(o,t){var h=Object.keys(o),e=h.length;if(e!=Object.keys(t).length)return!1;for(var r=0;r<e;r++){var n=h[r];if(!(t.hasOwnProperty(n)&&pt(o[n],t[n])))return!1}return!0}function $a(o,t){pe(t,!1);const h=We(),e=()=>oe(r,"$map",h),{map:r}=Xe();let n=f(t,"position",8,"top-left"),b=f(t,"showCompass",8,!0),d=f(t,"showZoom",8,!0),i=f(t,"visualizePitch",8,!1),_=W(null);Qe(()=>{var M;(M=e())!=null&&M.loaded()&&a(_)&&e().removeControl(a(_))}),z(()=>(e(),a(_),C(b()),C(d()),C(i()),C(n())),()=>{e()&&!a(_)&&(I(_,new ve.NavigationControl({showCompass:b(),showZoom:d(),visualizePitch:i()})),e().addControl(a(_),n()))}),He(),Fe(),be()}function en(o,t){pe(t,!1);const h=We(),e=()=>oe(r,"$map",h),{map:r}=Xe();let n=f(t,"position",8,"bottom-left"),b=f(t,"maxWidth",8,void 0),d=f(t,"unit",8,"metric"),i=W(null);Qe(()=>{var _;(_=e())!=null&&_.loaded()&&a(i)&&e().removeControl(a(i))}),z(()=>(e(),a(i),C(b()),C(d()),C(n())),()=>{e()&&!a(i)&&(I(i,new ve.ScaleControl({maxWidth:b(),unit:d()})),e().addControl(a(i),n()))}),He(),Fe(),be()}var tn=O("<!> <!> <!> <!>",1),an=O("<!> <!>",1),nn=O('<div data-testid="map-container"><!></div>');function Ut(o,t){pe(t,!1);const h=We(),e=()=>oe($,"$mapInstance",h),r=()=>oe(ke,"$loadedImages",h),n=W(),b=W();let d=f(t,"map",12,null),i=f(t,"mapContainer",12,void 0),_=f(t,"class",8,void 0),M=f(t,"style",8),w=f(t,"diffStyleUpdates",8,!1),E=f(t,"center",12,void 0),N=f(t,"zoom",12,void 0),D=f(t,"pitch",12,0),V=f(t,"bearing",12,0),Q=f(t,"bounds",12,void 0),ie=f(t,"hash",8,!1),xe=f(t,"updateHash",8,m=>{window.history.replaceState(window.history.state,"",m)}),G=f(t,"loaded",12,!1),Ce=f(t,"minZoom",8,0),Y=f(t,"maxZoom",8,22),le=f(t,"minPitch",8,0),U=f(t,"maxPitch",8,60),S=f(t,"renderWorldCopies",8,void 0),ee=f(t,"dragPan",8,void 0),me=f(t,"dragRotate",8,void 0),se=f(t,"pitchWithRotate",8,void 0),Ee=f(t,"antialias",8,void 0),de=f(t,"zoomOnDoubleClick",8,!0),Ne=f(t,"locale",8,void 0),De=f(t,"interactive",8,!0),L=f(t,"attributionControl",8,!0),we=f(t,"cooperativeGestures",8,!1),J=f(t,"preserveDrawingBuffer",8,!1),Re=f(t,"maxBounds",8,void 0),ce=f(t,"images",24,()=>[]),q=f(t,"standardControls",8,!1),X=f(t,"filterLayers",8,void 0),Ae=f(t,"transformRequest",8,void 0);const Z=ht(),{map:$,loadedImages:ke}=Ha();let fe=W(new Set);async function Se(m,g=!1){var P;if(e()&&!(!e().loaded()&&!g))if("url"in m){a(fe).add(m.id);try{let H=await e().loadImage(m.url);(P=e())==null||P.addImage(m.id,H.data,m.options),r().add(m.id),Te(ke,r())}catch(H){Z("error",H)}finally{a(fe).delete(m.id)}}else e().addImage(m.id,m.data,m.options),r().add(m.id),Te(ke,r())}let ge=W(void 0),ne=W(void 0),_e=W(void 0),te=W(void 0);function je(m){return y(),Te($,new ve.Map(qt({container:m,style:M(),locale:Ne(),center:E(),zoom:N(),pitch:D(),bearing:V(),minZoom:Ce(),maxZoom:Y(),minPitch:le(),maxPitch:U(),renderWorldCopies:S(),dragPan:ee(),dragRotate:me(),pitchWithRotate:se(),antialias:Ee(),interactive:De(),preserveDrawingBuffer:J(),maxBounds:Re(),bounds:Q(),attributionControl:L(),transformRequest:Ae(),cooperativeGestures:we()}))),e().on("load",g=>{g.target.getContainer().setAttribute("data-testid","map"),g.target.getCanvas().setAttribute("data-testid","map-canvas"),G(!0),Z("load",e())}),e().on("error",g=>Z("error",{...g,map:e()})),e().on("movestart",g=>Z("movestart",{...g,map:e()})),e().on("moveend",g=>{if(E(g.target.getCenter()),N(g.target.getZoom()),D(g.target.getPitch()),V(g.target.getBearing()),Q(g.target.getBounds()),Z("moveend",{...g,map:e()}),ie()){let P=new URL(window.location.href.replace(/(#.+)?$/,Ja(e())));xe()(P)}}),e().on("click",g=>Z("click",{...g,map:e()})),e().on("dblclick",g=>Z("dblclick",{...g,map:e()})),e().on("contextmenu",g=>Z("contextmenu",{...g,map:e()})),e().on("zoomstart",g=>Z("zoomstart",{...g,map:e()})),e().on("zoom",g=>{Z("zoom",{...g,map:e()})}),e().on("zoomend",g=>{Z("zoomend",{...g,map:e()})}),e().on("style.load",()=>{if(e()){const g=e().getStyle();if(I(ge,g.layers.map(P=>P.id)),I(ne,Object.keys(g.sources)),a(te))for(const[P,H]of Object.entries(a(te)))e().addSource(P,H);if(a(_e))for(const P of a(_e))e().addLayer(P);for(const P of ce())Se(P,!0)}}),e().on("styledata",g=>{if(e()&&X()){const P=e().getStyle().layers;if(P)for(let H of P)X()(H)||e().setLayoutProperty(H.id,"visibility","none")}Z("styledata",{...g,map:e()})}),{destroy(){var g;G(!1),(g=e())==null||g.remove(),Te($,null)}}}let Le=W(M());function y(){if(ie()){let m=Ka(window.location.hash);m.length>=3&&(N(m[0]),E([m[2],m[1]])),m.length==5&&(V(m[3]),D(m[4]))}}z(()=>C(q()),()=>{I(n,typeof q()=="boolean"?void 0:q())}),z(()=>e(),()=>{d(e())}),z(()=>(e(),C(M()),a(Le),a(ge),a(ne),C(w())),()=>{if(e()&&!Ke(M(),a(Le))){const m=e().getStyle();if(a(ge)&&I(_e,m.layers.filter(g=>!a(ge).includes(g.id))),a(ne)){const g=Object.keys(m.sources).filter(P=>!a(ne).includes(P));I(te,{});for(const P of g)Wt(te,a(te)[P]=m.sources[P])}I(Le,M()),e().setStyle(M(),{diff:w()}),Te(ke,new Set),I(fe,new Set)}}),z(()=>(C(G()),e(),C(ce()),r(),a(fe)),()=>{var m;if(G()&&((m=e())!=null&&m.loaded()))for(let g of ce())!r().has(g.id)&&!a(fe).has(g.id)&&!e().hasImage(g.id)&&Se(g)}),z(()=>(C(ce()),r()),()=>{I(b,ce().every(m=>r().has(m.id)))}),z(()=>(e(),C(E()),C(N()),C(V()),C(D())),()=>{var m,g,P,H;if(e()){let he={};E()!=null&&!Ke(E(),(m=e())==null?void 0:m.getCenter())&&(he.center=E()),N()!=null&&!Ke(N(),(g=e())==null?void 0:g.getZoom())&&(he.zoom=N()),V()!=null&&!Ke(V(),(P=e())==null?void 0:P.getBearing())&&(he.bearing=V()),D()!=null&&!Ke(D(),(H=e())==null?void 0:H.getPitch())&&(he.pitch=D()),Object.keys(he).length&&e().easeTo(he)}}),z(()=>(C(Q()),e()),()=>{var m,g;Q()&&!Ke(Q(),(m=e())==null?void 0:m.getBounds())&&((g=e())==null||g.fitBounds(Q()))}),z(()=>(C(de()),e()),()=>{var m,g;de()?(m=e())==null||m.doubleClickZoom.enable():(g=e())==null||g.doubleClickZoom.disable()}),He(),Fe();var j=nn();xa("hashchange",ya,y);var Pe=c(j);B(Pe,()=>e()&&G(),m=>{var g=an(),P=F(g);B(P,q,he=>{var at=tn(),qe=F(at);$a(qe,{get position(){return a(n)}});var nt=u(qe,2);Ya(nt,{get position(){return a(n)},fitBoundsOptions:{maxZoom:12}});var Ve=u(nt,2);Ga(Ve,{get position(){return a(n)}});var rt=u(Ve,2);en(rt,{get position(){return a(n)}}),x(he,at)});var H=u(P,2);_t(H,t,"default",{get map(){return e()},get loadedImages(){return r()},get allImagesLoaded(){return a(b)}},null),x(m,g)}),l(j),Ft(j,m=>i(m),()=>i()),wa(j,m=>je(m)),R(()=>{Oa(j,`${_()??""} svelte-p00lfq`),Ma(j,"expand-map",!_())}),x(o,j),be()}var rn=O("<div><!></div>");function Zt(o,t){const h=ka(t);pe(t,!1);const e=We(),r=()=>oe(me,"$popupTarget",e),n=()=>oe(ee,"$map",e),b=()=>oe(Ee,"$layer",e),d=()=>oe(se,"$layerEvent",e),i=W(),_=W();let M=f(t,"closeButton",8,void 0),w=f(t,"closeOnClickOutside",8,!0),E=f(t,"closeOnClickInside",8,!1),N=f(t,"closeOnMove",8,!1),D=f(t,"openOn",8,"click"),V=f(t,"openIfTopMost",8,!0),Q=f(t,"focusAfterOpen",8,!0),ie=f(t,"anchor",8,void 0),xe=f(t,"offset",8,void 0),G=f(t,"popupClass",8,void 0),Ce=f(t,"maxWidth",8,void 0),Y=f(t,"lngLat",12,void 0),le=f(t,"html",8,void 0),U=f(t,"open",12,!1);const S=ht(),{map:ee,popupTarget:me,layerEvent:se,layer:Ee,eventTopMost:de,markerClickManager:Ne}=Xe(),De=["click","dblclick","contextmenu"];let L=W(),we=W(!1),J=W();function Re(){if(!a(L))return;let y=a(L).getElement();!y||y===a(J)||(I(J,y),D()==="hover"&&Wt(J,a(J).style.pointerEvents="none"),a(J).addEventListener("mouseenter",()=>{I(we,!0)},{passive:!0}),a(J).addEventListener("mouseleave",()=>{I(we,!1)},{passive:!0}),a(J).addEventListener("click",()=>{E()&&U(!1)},{passive:!0}))}Nt(()=>{if(n())return n().on("click",ne),n().on("contextmenu",ne),Ne.add(_e),typeof r()=="string"&&(n().on("click",r(),Z),n().on("dblclick",r(),Z),n().on("contextmenu",r(),Z),n().on("mousemove",r(),ge),n().on("mouseleave",r(),Se),n().on("touchstart",r(),ke),n().on("touchend",r(),fe)),()=>{var y,j;(y=n())!=null&&y.loaded()&&((j=a(L))==null||j.remove(),n().off("click",ne),n().off("contextmenu",ne),Ne.remove(_e),r()instanceof ve.Marker?r().getPopup()===a(L)&&r().setPopup(void 0):typeof r()=="string"&&(n().off("click",r(),Z),n().off("dblclick",r(),Z),n().off("contextmenu",r(),Z),n().off("mousemove",r(),ge),n().off("mouseleave",r(),Se),n().off("touchstart",r(),ke),n().off("touchend",r(),fe)))}});function ce(y){return V()?!("marker"in y)&&!Na(y)&&de(y)!==b():!1}let q=W(null),X=W("normal");function Ae(y){"layerType"in y&&y.layerType==="deckgl"?(Y(y.coordinate),I(q,y.object?[y.object]:null)):(Y(y.lngLat),I(q,y.features??[]))}function Z(y){y.type!==D()||ce(y)||(Ae(y),setTimeout(()=>U(!0)))}let $=null;function ke(y){$=y.point}function fe(y){if(!$||D()!=="hover")return;let j=$.dist(y.point);$=null,j<3&&(Y(y.lngLat),I(q,y.features??[]),a(L).isOpen()?I(X,"justOpened"):(I(X,"opening"),U(!0)))}function Se(y){D()!=="hover"||$||a(X)!=="normal"||(U(!1),I(q,null))}function ge(y){if(!(D()!=="hover"||$||a(X)!=="normal")){if(ce(y)){U(!1),I(q,null);return}U(!0),I(q,y.features??[]),Y(y.lngLat)}}function ne(y){var Pe;if(a(X)==="justOpened"){I(X,"normal");return}if(!w())return;let j=[a(J),r()instanceof ve.Marker?(Pe=r())==null?void 0:Pe.getElement():null];U()&&a(L).isOpen()&&!j.some(m=>m==null?void 0:m.contains(y.originalEvent.target))&&(y.type==="contextmenu"&&D()==="contextmenu"||y.type!=="contextmenu")&&U(!1)}function _e(y){w()&&U()&&a(L).isOpen()&&y.marker!==r()&&U(!1)}Qe(()=>{var y;n()&&((y=a(L))!=null&&y.isOpen())&&a(L).remove()});let te=W();z(()=>(C(M()),C(w()),C(E())),()=>{I(i,M()??(!w()&&!E()))}),z(()=>(a(L),a(i),C(N()),C(Q()),C(Ce()),C(G()),C(ie()),C(xe())),()=>{a(L)||(I(L,new ve.Popup({closeButton:a(i),closeOnClick:!1,closeOnMove:N(),focusAfterOpen:Q(),maxWidth:Ce(),className:G(),anchor:ie(),offset:xe()})),I(J,a(L).getElement()),a(L).on("open",()=>{U(!0),Re(),S("open",a(L))}),a(L).on("close",()=>{U(!1),S("close",a(L))}),a(L).on("hover",()=>{S("hover",a(L))}))}),z(()=>(a(L),r(),C(D())),()=>{a(L)&&r()instanceof ve.Marker&&(D()==="click"?r().setPopup(a(L)):r().getPopup()===a(L)&&r().setPopup(void 0))}),z(()=>(C(D()),d()),()=>{var y;De.includes(D())&&((y=d())==null?void 0:y.type)===D()&&(Z(d()),Te(se,null))}),z(()=>(C(D()),d()),()=>{var y,j;I(_,D()==="hover"&&(((y=d())==null?void 0:y.type)==="mousemove"||((j=d())==null?void 0:j.type)==="mouseenter"))}),z(()=>(C(D()),a(_),d(),a(we)),()=>{D()==="hover"&&se&&(a(_)&&d()&&Ae(d()),U((a(_)||a(we))??!1))}),z(()=>(a(te),a(L),C(le())),()=>{a(te)?a(L).setDOMContent(a(te)):le()&&a(L).setHTML(le())}),z(()=>(C(Y()),a(L)),()=>{Y()&&a(L).setLngLat(Y())}),z(()=>(n(),a(L),C(U()),a(X)),()=>{if(n()){let y=a(L).isOpen();U()&&!y?(a(L).addTo(n()),a(X)==="opening"&&I(X,"justOpened")):!U()&&y&&a(L).remove()}}),He(),Fe();var je=Ie(),Le=F(je);B(Le,()=>h.default,y=>{var j=rn(),Pe=c(j);B(Pe,()=>{var m;return((m=a(q))==null?void 0:m.length)||r()instanceof ve.Marker},m=>{var g=Ie(),P=F(g);_t(P,t,"default",{get features(){return a(q)},get data(){var H;return((H=a(q))==null?void 0:H[0])??null},get map(){return n()},close:()=>U(!1)},null),x(m,g)}),l(j),Ft(j,m=>I(te,m),()=>a(te)),x(y,j)}),x(o,je),be()}var tt=Uint8Array,Vt=Uint16Array,on=Int32Array,ln=new tt([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),sn=new tt([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Gt=function(o,t){for(var h=new Vt(31),e=0;e<31;++e)h[e]=t+=1<<o[e-1];for(var r=new on(h[30]),e=1;e<30;++e)for(var n=h[e];n<h[e+1];++n)r[n]=n-h[e]<<5|e;return{b:h,r}},Yt=Gt(ln,2),dn=Yt.b,cn=Yt.r;dn[28]=258,cn[258]=28;Gt(sn,0);var fn=new Vt(32768);for(T=0;T<32768;++T)Oe=(T&43690)>>1|(T&21845)<<1,Oe=(Oe&52428)>>2|(Oe&13107)<<2,Oe=(Oe&61680)>>4|(Oe&3855)<<4,fn[T]=((Oe&65280)>>8|(Oe&255)<<8)>>1;var Oe,T,lt=new tt(288);for(T=0;T<144;++T)lt[T]=8;var T;for(T=144;T<256;++T)lt[T]=9;var T;for(T=256;T<280;++T)lt[T]=7;var T;for(T=280;T<288;++T)lt[T]=8;var T,un=new tt(32);for(T=0;T<32;++T)un[T]=5;var T,vn=new tt(0),mn=typeof TextDecoder<"u"&&new TextDecoder,gn=0;try{mn.decode(vn,{stream:!0}),gn=1}catch{}var _n=O('<a target="_blank" rel="noopener noreferrer"> </a>');function hn(o,t){pe(t,!0);function h(i){return i.padStart(6,"0")}function e(i,_){if(!_)return"";switch(i){case"DOI":return gt.DOI+_;case"EDR":case"EDH":return gt[i]+h(_);case"URI":return _;default:return gt[i]+_}}const r=it(()=>e(t.edition.type,t.edition._)),n=it(()=>t.edition.type==="DOI"?`DOI: ${t.edition._} (${t.edition.when})`:`${t.edition.type}: ${t.edition._}`);var b=Ie(),d=F(b);B(d,()=>t.edition._,i=>{var _=_n(),M=c(_,!0);l(_),R(()=>{re(_,"href",a(r)),k(M,a(n))}),x(i,_)},i=>{var _=et();R(()=>k(_,`${t.edition.type??""}: -`)),x(i,_)}),x(o,b),be()}var yn=O(", <a> </a>",1),pn=O('<section id="translations" class="svelte-sfn3y"></section>'),bn=O("<dd><a> </a></dd>"),xn=O("<dd> </dd>"),Cn=O("<dd> </dd>"),wn=O("<dd> </dd>"),kn=O(" <!>",1),Ln=O("<dd> </dd>"),On=O("<dd> </dd>"),Mn=O("<dd> </dd>"),En=O("<dd> </dd>"),Sn=O("<dd> <a> </a></dd>"),Pn=O("<dd> </dd>"),Tn=O('<div class="popup"> </div>'),In=O("<dt>Map</dt> <dd><!></dd>",1),Dn=O("<p> </p>"),Rn=O('<div class="popup"> </div>'),An=O("<dt>Map</dt> <dd><!></dd>",1),jn=O("<dl><dt>Place</dt> <dd> </dd> <dt>Repository</dt> <dd><a> </a><!></dd> <dt>Autopsy</dt> <dd> </dd> <!></dl>"),Bn=O("<li><!></li>"),zn=O("<li><!></li>"),Un=O('<dt>Printed editions</dt> <dd><ul class="bibliography-list"></ul></dd>',1),Zn=O('<article><hgroup><h1 class="inscription-title svelte-sfn3y"> </h1> <p> <a> </a><!></p> <p> <a target="inscription">View in current site</a></p></hgroup> <div class="sections svelte-sfn3y"><figure id="facsimile-images" class="svelte-sfn3y"><section id="image-viewer" style="height: 50vh; width: 100%;" class="svelte-sfn3y"></section> <figcaption class="svelte-sfn3y"> </figcaption></figure> <section id="edition" class="svelte-sfn3y"><!></section> <section id="apparatus" class="svelte-sfn3y"><!></section> <!> <section id="physical-description" class="svelte-sfn3y"><h2>Physical description</h2> <section class="svelte-sfn3y"><h3>Support</h3> <dl><dt>Description</dt> <dd> </dd> <dt>Object type</dt> <!> <dt>Material</dt> <dd><a> </a></dd> <dt>Condition</dt> <!> <dt>Dimensions</dt> <dd></dd></dl></section> <section class="svelte-sfn3y"><h3>Inscription</h3> <dl><dt>Layout</dt> <dd> </dd> <dt>Text condition</dt> <!> <dt>Lettering</dt> <dd> </dd> <dt>Letter heights</dt> <!> <dt>Interlinear heights</dt> <!></dl></section></section> <section id="provenance" class="svelte-sfn3y"><h2>Provenance</h2> <dl><dt>Place of origin</dt> <!> <dt>Provenance found</dt> <dd> </dd> <!></dl></section> <section id="current-location" class="svelte-sfn3y"><h2>Current location</h2> <!></section> <section id="date" class="svelte-sfn3y"><h2>Date</h2> <!> <dl><dt>Evidence</dt> <dd> </dd></dl></section> <section id="text-type" class="svelte-sfn3y"><h2>Text type</h2> <p><a> </a></p></section> <section id="commentary" class="svelte-sfn3y"><!></section> <section id="bibliography" class="svelte-sfn3y"><h2>Bibliography</h2> <dl><dt>Digital editions</dt> <dd><ul></ul></dd> <!></dl></section> <section id="citation-and-status" class="svelte-sfn3y"><h2>Citation and editorial status</h2> <dl><dt>Citation</dt> <dd> </dd></dl></section></div></article>');function rr(o,t){pe(t,!0);let{slug:h,metadata:e,images:r,html:n}=t.data,b=pa(Ca(r[0].desc));const d=n.divs.find(v=>v.id==="edition"),i=n.divs.find(v=>v.id==="apparatus"),_=n.divs.filter(v=>v.id==="translation"),M=n.divs.find(v=>v.id==="commentary");let w=r.map(v=>`${Sa}${h}/${v.url}/info.json`),E;Nt(async()=>{E=(await la(async()=>{const{default:s}=await import("../chunks/openseadragon.DkbNtmsO.js").then(p=>p.o);return{default:s}},__vite__mapDeps([0,1,2,3,4,5,6]),import.meta.url)).default,E({id:"image-viewer",prefixUrl:`${La}/openseadragon/images/`,tileSources:w,sequenceMode:!0,showReferenceStrip:!0,preserveViewport:!0}).addHandler("page",function(s){const p=r[s.page];I(b,`${p.surfaceType}, ${p.desc}`)})});var N=Zn(),D=c(N),V=c(D),Q=c(V);l(V);var ie=u(V,2),xe=c(ie),G=u(xe),Ce=c(G,!0);l(G);var Y=u(G);B(Y,()=>e.objectType,v=>{var s=yn(),p=u(F(s)),A=c(p,!0);l(p),R(()=>{re(p,"href",e.objectType.ref),k(A,e.objectType._)}),x(v,s)}),l(ie);var le=u(ie,2),U=c(le),S=u(U);l(le),l(D);var ee=u(D,2),me=c(ee),se=u(c(me),2),Ee=c(se,!0);l(se),l(me);var de=u(me,2),Ne=c(de);$e(Ne,()=>d.html),l(de);var De=u(de,2),L=c(De);$e(L,()=>i.html),l(De);var we=u(De,2);B(we,()=>_.length,v=>{var s=pn();Ye(s,21,()=>_,Je,(p,A)=>{var K=Ie(),ae=F(K);$e(ae,()=>a(A).html),x(p,K)}),l(s),x(v,s)});var J=u(we,2),Re=u(c(J),2),ce=u(c(Re),2),q=u(c(ce),2),X=c(q,!0);l(q);var Ae=u(q,4);B(Ae,()=>e.objectType,v=>{var s=bn(),p=c(s),A=c(p,!0);l(p),l(s),R(()=>{re(p,"href",e.objectType.ref),k(A,e.objectType._)}),x(v,s)},v=>{var s=xn(),p=c(s,!0);l(s),R(()=>k(p,ue)),x(v,s)});var Z=u(Ae,4),$=c(Z),ke=c($,!0);l($),l(Z);var fe=u(Z,4);B(fe,()=>{var v;return(v=e.condition)==null?void 0:v.ana},v=>{var s=Cn(),p=c(s,!0);R(()=>k(p,e.condition.ana.split(".").slice(1).join(", "))),l(s),x(v,s)},v=>{var s=wn(),p=c(s,!0);l(s),R(()=>k(p,e.condition._||ue)),x(v,s)});var Se=u(fe,4);Ye(Se,21,()=>e.dimensions,Je,(v,s,p)=>{ba();var A=kn(),K=F(A),ae=u(K);B(ae,()=>p<e.dimensions.length-1,Be=>{var ze=et(",Â ");x(Be,ze)}),R(()=>k(K,`${a(s).dimension??""}: ${a(s)._??""}
							${a(s).unit??""}`)),x(v,A)}),l(Se),l(ce),l(Re);var ge=u(Re,2),ne=u(c(ge),2),_e=u(c(ne),2),te=c(_e,!0);l(_e);var je=u(_e,4);B(je,()=>e.layoutDesc.layout.damage.ana,v=>{var s=Ln(),p=c(s,!0);R(()=>k(p,e.layoutDesc.layout.damage.ana.split(".").slice(1).join(", "))),l(s),x(v,s)},v=>{var s=On(),p=c(s,!0);l(s),R(()=>k(p,e.layoutDesc.layout.damage._||ue)),x(v,s)});var Le=u(je,4),y=c(Le,!0);l(Le);var j=u(Le,4);Ye(j,17,()=>e.handNote.dimensions.filter(v=>(v==null?void 0:v.type)==="letterHeight"),Je,(v,s)=>{var p=Mn(),A=c(p);l(p),R(()=>k(A,`${a(s).l??""}: ${a(s).h??""}${a(s).unit??""}`)),x(v,p)});var Pe=u(j,4);Ye(Pe,17,()=>e.handNote.dimensions.filter(v=>(v==null?void 0:v.type)==="interlinear"),Je,(v,s)=>{var p=En(),A=c(p);l(p),R(()=>k(A,`${a(s).l??""}: ${a(s).h??""}${(a(s).h!=="not measured"?a(s).unit:"")??""}`)),x(v,p)}),l(ne),l(ge),l(J);var m=u(J,2),g=u(c(m),2),P=u(c(g),2);B(P,()=>e.places.length,v=>{var s=Sn(),p=c(s),A=u(p),K=c(A,!0);l(A),l(s),R(()=>{k(p,`${(e.places[0].offset||"")??""} `),re(A,"href",e.places[0].ref),k(K,e.places[0]._)}),x(v,s)},v=>{var s=Pn(),p=c(s,!0);l(s),R(()=>k(p,ue)),x(v,s)});var H=u(P,4),he=c(H,!0);l(H);var at=u(H,2);B(at,()=>{var v;return(v=e.provenanceFound)==null?void 0:v.geo},v=>{var s=In();const p=it(()=>[e.provenanceFound.geo[1],e.provenanceFound.geo[0]]);var A=u(F(s),2),K=c(A);Ut(K,{get center(){return a(p)},zoom:7,class:"map",standardControls:!0,get style(){return At},children:(ae,Be)=>{Bt(ae,{get lngLat(){return a(p)},children:(ze,Ge)=>{Zt(ze,{offset:[0,-10],children:(Ue,ot)=>{var ye=Tn(),Ze=c(ye,!0);l(ye),R(()=>k(Ze,e.provenanceFound._)),x(Ue,ye)},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}}),l(A),x(v,s)}),l(g),l(m);var qe=u(m,2),nt=u(c(qe),2);B(nt,()=>e.provenanceLost,v=>{var s=Dn(),p=c(s,!0);l(s),R(()=>k(p,e.provenanceLost._)),x(v,s)},v=>{var s=jn(),p=u(c(s),2),A=c(p);l(p);var K=u(p,4),ae=c(K),Be=c(ae,!0);l(ae);var ze=u(ae);B(ze,()=>e.idno,ye=>{var Ze=et();R(()=>k(Ze,`,
							${e.idno._??""}`)),x(ye,Ze)}),l(K);var Ge=u(K,4),Ue=c(Ge,!0);l(Ge);var ot=u(Ge,2);B(ot,()=>e.repository.museum.location.geo,ye=>{var Ze=An();const Et=it(()=>[e.repository.museum.location.geo.lon,e.repository.museum.location.geo.lat]);var St=u(F(Ze),2),ea=c(St);Ut(ea,{get center(){return a(Et)},zoom:7,class:"map",standardControls:!0,get style(){return At},children:(ta,Wn)=>{Bt(ta,{get lngLat(){return a(Et)},children:(aa,Fn)=>{Zt(aa,{offset:[0,-10],children:(na,Nn)=>{var vt=Rn(),ra=c(vt,!0);l(vt),R(()=>k(ra,e.repository.museum.name)),x(na,vt)},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}}),l(St),x(ye,Ze)}),l(s),R(()=>{var ye;k(A,`${e.settlement??""}, ${e.country??""}`),re(ae,"href",e.repository.ref),k(Be,e.repository._),k(Ue,((ye=e.provenanceObserved)==null?void 0:ye._)||ue)}),x(v,s)}),l(qe);var Ve=u(qe,2),rt=u(c(Ve),2);Ea(rt,{inscription:e});var bt=u(rt,2),xt=u(c(bt),2),Jt=c(xt,!0);l(xt),l(bt),l(Ve);var st=u(Ve,2),Ct=u(c(st),2),dt=c(Ct),Kt=c(dt,!0);l(dt),l(Ct),l(st);var ct=u(st,2),Qt=c(ct);$e(Qt,()=>M.html),l(ct);var ft=u(ct,2),wt=u(c(ft),2),ut=u(c(wt),2),kt=c(ut);Ye(kt,21,()=>e.editions,Je,(v,s)=>{var p=Bn(),A=c(p);hn(A,{get edition(){return a(s)}}),l(p),x(v,p)}),l(kt),l(ut);var Xt=u(ut,2);B(Xt,()=>{var v,s;return(s=(v=e.bibliographyEdition)==null?void 0:v.bibl)==null?void 0:s.length},v=>{var s=Un(),p=u(F(s),2),A=c(p);Ye(A,21,()=>e.bibliographyEdition.bibl,Je,(K,ae)=>{var Be=Ie(),ze=F(Be);B(ze,()=>a(ae),Ge=>{var Ue=zn(),ot=c(Ue);Ua(ot,{get entry(){return a(ae)}}),l(Ue),x(Ge,Ue)}),x(K,Be)}),l(A),l(p),x(v,s)}),l(wt),l(ft);var Lt=u(ft,2),Ot=u(c(Lt),2),Mt=u(c(Ot),2),$t=c(Mt,!0);l(Mt),l(Ot),l(Lt),l(ee),l(N),R(()=>{var v;k(Q,`${e.file??""}: ${e.title??""}`),k(xe,`${e.textLang._??""}, `),re(G,"href",e.type.ref),k(Ce,e.type._),k(U,`${e.status??""}, `),re(S,"href",`${Pa}inscription/${h??""}`),k(Ee,a(b)),k(X,e.support||ue),re($,"href",e.material.ref),k(ke,e.material._),k(te,e.layoutDesc.layout.p||ue),k(y,e.handNote.lettering||ue),k(he,((v=e.provenanceFound)==null?void 0:v._)||ue),k(Jt,e.evidence||ue),re(dt,"href",e.type.ref),k(Kt,e.type._),k($t,e.citation||ue)}),x(o,N),be()}export{rr as component};
