import{s as ye,r as De,c as Oe,o as Ue,n as Re,a as ke}from"../chunks/scheduler.CouYSk3Y.js";import{S as je,i as Pe,e as v,l as T,s as P,c as g,a as k,m as z,d as f,b as q,n as L,f as K,h as s,x as Ce,y as re,o as Q,t as ie,k as qe,j as ce,q as Ye,r as He,u as Fe,g as me,v as Ge,w as Je,p as Ke}from"../chunks/index.xzp9WnH_.js";import{e as Ae}from"../chunks/each.D6YF6ztN.js";import{g as Le}from"../chunks/entry.Bo9SH0tx.js";import{p as Qe}from"../chunks/stores.DU_4P6BE.js";import{B as Ve}from"../chunks/BaseLink.DLMhu-yD.js";import{i as Me,d as We}from"../chunks/config.Bl6GI46O.js";function Be(t,e,l){const o=t.slice();return o[15]=e[l],o}function we(t){let e,l,o=t[2].split(" ").join(", ")+"",a;return{c(){e=T(`, matching
				`),l=v("em"),a=T(o)},l(n){e=z(n,`, matching
				`),l=g(n,"EM",{});var _=k(l);a=z(_,o),_.forEach(f)},m(n,_){K(n,e,_),K(n,l,_),s(l,a)},p(n,_){_&4&&o!==(o=n[2].split(" ").join(", ")+"")&&Q(a,o)},d(n){n&&(f(e),f(l))}}}function Ie(t){let e,l,o;return{c(){e=v("img"),this.h()},l(a){e=g(a,"IMG",{src:!0,alt:!0,loading:!0}),this.h()},h(){ke(e.src,l=Me+t[15].file+"/"+t[15].facsimile.url+"/full/400,/0/default.jpg")||L(e,"src",l),L(e,"alt",o=t[15].facsimile.desc),L(e,"loading","lazy")},m(a,n){K(a,e,n)},p(a,n){n&64&&!ke(e.src,l=Me+a[15].file+"/"+a[15].facsimile.url+"/full/400,/0/default.jpg")&&L(e,"src",l),n&64&&o!==(o=a[15].facsimile.desc)&&L(e,"alt",o)},d(a){a&&f(e)}}}function Xe(t){let e,l=t[15].title+"",o,a,n,_=t[15].file+"",B,p,u,w=t[15].status+"",c;return{c(){e=v("span"),o=T(l),a=P(),n=v("small"),B=T(_),p=P(),u=v("small"),c=T(w)},l(i){e=g(i,"SPAN",{});var h=k(e);o=z(h,l),h.forEach(f),a=q(i),n=g(i,"SMALL",{});var y=k(n);B=z(y,_),y.forEach(f),p=q(i),u=g(i,"SMALL",{});var N=k(u);c=z(N,w),N.forEach(f)},m(i,h){K(i,e,h),s(e,o),K(i,a,h),K(i,n,h),s(n,B),K(i,p,h),K(i,u,h),s(u,c)},p(i,h){h&64&&l!==(l=i[15].title+"")&&Q(o,l),h&64&&_!==(_=i[15].file+"")&&Q(B,_),h&64&&w!==(w=i[15].status+"")&&Q(c,w)},d(i){i&&(f(e),f(a),f(n),f(p),f(u))}}}function Te(t){var x,le;let e,l,o,a,n,_,B=t[15].notBefore!=null?t[15].notBefore<0?`${Math.abs(t[15].notBefore)} BC`:`AD ${t[15].notBefore}`:"Unknown",p,u,w=t[15].notAfter!=null?t[15].notAfter<0?`${Math.abs(t[15].notAfter)} BC`:`AD ${t[15].notAfter}`:"Unknown",c,i,h,y,N="Settlement",Y,R=(((x=t[15].repository)==null?void 0:x._)||"N/A")+"",I,M,b="Language",H,F=(((le=t[15].textLang)==null?void 0:le._)||"N/A")+"",W,$,U,A=t[15].facsimile&&Ie(t);return a=new Ve({props:{href:"inscription/"+t[15].file,$$slots:{default:[Xe]},$$scope:{ctx:t}}}),{c(){e=v("li"),A&&A.c(),l=P(),o=v("p"),He(a.$$.fragment),n=P(),_=v("p"),p=T(B),u=T(" – "),c=T(w),i=P(),h=v("dl"),y=v("dt"),y.textContent=N,Y=v("dd"),I=T(R),M=v("dt"),M.textContent=b,H=v("dd"),W=T(F),$=P(),this.h()},l(m){e=g(m,"LI",{});var E=k(e);A&&A.l(E),l=q(E),o=g(E,"P",{class:!0});var G=k(o);Fe(a.$$.fragment,G),G.forEach(f),n=q(E),_=g(E,"P",{});var J=k(_);p=z(J,B),u=z(J," – "),c=z(J,w),J.forEach(f),i=q(E),h=g(E,"DL",{});var j=k(h);y=g(j,"DT",{class:!0,"data-svelte-h":!0}),me(y)!=="svelte-upur71"&&(y.textContent=N),Y=g(j,"DD",{});var V=k(Y);I=z(V,R),V.forEach(f),M=g(j,"DT",{class:!0,"data-svelte-h":!0}),me(M)!=="svelte-1aab11o"&&(M.textContent=b),H=g(j,"DD",{});var se=k(H);W=z(se,F),se.forEach(f),j.forEach(f),$=q(E),E.forEach(f),this.h()},h(){L(o,"class","title svelte-1fu2z0"),L(y,"class","svelte-1fu2z0"),L(M,"class","svelte-1fu2z0")},m(m,E){K(m,e,E),A&&A.m(e,null),s(e,l),s(e,o),Ge(a,o,null),s(e,n),s(e,_),s(_,p),s(_,u),s(_,c),s(e,i),s(e,h),s(h,y),s(h,Y),s(Y,I),s(h,M),s(h,H),s(H,W),s(e,$),U=!0},p(m,E){var J,j;m[15].facsimile?A?A.p(m,E):(A=Ie(m),A.c(),A.m(e,l)):A&&(A.d(1),A=null);const G={};E&64&&(G.href="inscription/"+m[15].file),E&262208&&(G.$$scope={dirty:E,ctx:m}),a.$set(G),(!U||E&64)&&B!==(B=m[15].notBefore!=null?m[15].notBefore<0?`${Math.abs(m[15].notBefore)} BC`:`AD ${m[15].notBefore}`:"Unknown")&&Q(p,B),(!U||E&64)&&w!==(w=m[15].notAfter!=null?m[15].notAfter<0?`${Math.abs(m[15].notAfter)} BC`:`AD ${m[15].notAfter}`:"Unknown")&&Q(c,w),(!U||E&64)&&R!==(R=(((J=m[15].repository)==null?void 0:J._)||"N/A")+"")&&Q(I,R),(!U||E&64)&&F!==(F=(((j=m[15].textLang)==null?void 0:j._)||"N/A")+"")&&Q(W,F)},i(m){U||(ie(a.$$.fragment,m),U=!0)},o(m){ce(a.$$.fragment,m),U=!1},d(m){m&&f(e),A&&A.d(),Je(a)}}}function ze(t){let e,l="Load More Inscriptions",o,a;return{c(){e=v("button"),e.textContent=l},l(n){e=g(n,"BUTTON",{"data-svelte-h":!0}),me(e)!=="svelte-1j8c85t"&&(e.textContent=l)},m(n,_){K(n,e,_),o||(a=re(e,"click",t[9]),o=!0)},p:Re,d(n){n&&f(e),o=!1,a()}}}function Ze(t){let e,l,o,a=We+"",n,_,B,p,u,w,c,i,h,y,N,Y,R,I,M,b,H,F=t[0].length.toLocaleString()+"",W,$,U,A=t[4].toLocaleString()+"",x,le,m,E=t[3].toLocaleString()+"",G,J,j,V,se,ee,X,fe,_e,D=t[2]&&t[1]&&we(t),te=Ae(t[6]),S=[];for(let r=0;r<te.length;r+=1)S[r]=Te(Be(t,te,r));const Ne=r=>ce(S[r],1,1,()=>{S[r]=null});let O=t[5]&&ze(t);return{c(){e=v("article"),l=v("section"),o=v("h1"),n=T(a),_=P(),B=v("section"),p=v("form"),u=v("input"),w=P(),c=v("button"),i=T("Search"),y=P(),N=v("button"),Y=T("Reset"),I=P(),M=v("section"),b=v("h2"),H=v("em"),W=T(F),$=T(` Inscriptions over
			`),U=v("em"),x=T(A),le=T(`
			years across
			`),m=v("em"),G=T(E),J=T(`
			locations`),D&&D.c(),j=P(),V=v("ol");for(let r=0;r<S.length;r+=1)S[r].c();se=P(),ee=v("section"),O&&O.c(),this.h()},l(r){e=g(r,"ARTICLE",{});var d=k(e);l=g(d,"SECTION",{class:!0});var C=k(l);o=g(C,"H1",{class:!0});var ne=k(o);n=z(ne,a),ne.forEach(f),C.forEach(f),_=q(d),B=g(d,"SECTION",{class:!0});var he=k(B);p=g(he,"FORM",{class:!0});var oe=k(p);u=g(oe,"INPUT",{type:!0,name:!0,id:!0,placeholder:!0}),w=q(oe),c=g(oe,"BUTTON",{type:!0});var pe=k(c);i=z(pe,"Search"),pe.forEach(f),y=q(oe),N=g(oe,"BUTTON",{type:!0});var de=k(N);Y=z(de,"Reset"),de.forEach(f),oe.forEach(f),he.forEach(f),I=q(d),M=g(d,"SECTION",{class:!0});var ae=k(M);b=g(ae,"H2",{class:!0});var Z=k(b);H=g(Z,"EM",{});var ve=k(H);W=z(ve,F),ve.forEach(f),$=z(Z,` Inscriptions over
			`),U=g(Z,"EM",{});var ge=k(U);x=z(ge,A),ge.forEach(f),le=z(Z,`
			years across
			`),m=g(Z,"EM",{});var be=k(m);G=z(be,E),be.forEach(f),J=z(Z,`
			locations`),D&&D.l(Z),Z.forEach(f),j=q(ae),V=g(ae,"OL",{class:!0});var Ee=k(V);for(let ue=0;ue<S.length;ue+=1)S[ue].l(Ee);Ee.forEach(f),ae.forEach(f),se=q(d),ee=g(d,"SECTION",{class:!0});var Se=k(ee);O&&O.l(Se),Se.forEach(f),d.forEach(f),this.h()},h(){L(o,"class","svelte-1fu2z0"),L(l,"class","hero svelte-1fu2z0"),L(u,"type","text"),L(u,"name","keywords"),L(u,"id","keywords"),L(u,"placeholder","Search inscriptions metadata"),L(c,"type","submit"),c.value="Search",c.disabled=h=!t[2],L(N,"type","reset"),N.value="Reset",N.disabled=R=!t[2],L(p,"class","svelte-1fu2z0"),L(B,"class","svelte-1fu2z0"),L(b,"class","svelte-1fu2z0"),L(V,"class","svelte-1fu2z0"),L(M,"class","inscriptions svelte-1fu2z0"),L(ee,"class","svelte-1fu2z0")},m(r,d){K(r,e,d),s(e,l),s(l,o),s(o,n),s(e,_),s(e,B),s(B,p),s(p,u),Ce(u,t[2]),s(p,w),s(p,c),s(c,i),s(p,y),s(p,N),s(N,Y),s(e,I),s(e,M),s(M,b),s(b,H),s(H,W),s(b,$),s(b,U),s(U,x),s(b,le),s(b,m),s(m,G),s(b,J),D&&D.m(b,null),s(M,j),s(M,V);for(let C=0;C<S.length;C+=1)S[C]&&S[C].m(V,null);s(e,se),s(e,ee),O&&O.m(ee,null),X=!0,fe||(_e=[re(u,"input",t[12]),re(p,"submit",t[8]),re(p,"reset",t[7])],fe=!0)},p(r,[d]){if(d&4&&u.value!==r[2]&&Ce(u,r[2]),(!X||d&4&&h!==(h=!r[2]))&&(c.disabled=h),(!X||d&4&&R!==(R=!r[2]))&&(N.disabled=R),(!X||d&1)&&F!==(F=r[0].length.toLocaleString()+"")&&Q(W,F),(!X||d&16)&&A!==(A=r[4].toLocaleString()+"")&&Q(x,A),(!X||d&8)&&E!==(E=r[3].toLocaleString()+"")&&Q(G,E),r[2]&&r[1]?D?D.p(r,d):(D=we(r),D.c(),D.m(b,null)):D&&(D.d(1),D=null),d&64){te=Ae(r[6]);let C;for(C=0;C<te.length;C+=1){const ne=Be(r,te,C);S[C]?(S[C].p(ne,d),ie(S[C],1)):(S[C]=Te(ne),S[C].c(),ie(S[C],1),S[C].m(V,null))}for(Ke(),C=te.length;C<S.length;C+=1)Ne(C);qe()}r[5]?O?O.p(r,d):(O=ze(r),O.c(),O.m(ee,null)):O&&(O.d(1),O=null)},i(r){if(!X){for(let d=0;d<te.length;d+=1)ie(S[d]);X=!0}},o(r){S=S.filter(Boolean);for(let d=0;d<S.length;d+=1)ce(S[d]);X=!1},d(r){r&&f(e),D&&D.d(),Ye(S,r),O&&O.d(),fe=!1,De(_e)}}}function $e(t,e,l){let o,a,n,_,B;Oe(t,Qe,I=>l(14,B=I));let{data:p}=e,u=p.corpus,w=!1,c="",i=50,h=i;function y(){l(0,u=p.corpus),l(1,w=!1),l(2,c=""),Le(`?keywords=${encodeURIComponent(c)}`,{replaceState:!0}),l(11,i=50),h=i}function N(){if(Le(`?keywords=${encodeURIComponent(c)}`,{replaceState:!0}),l(1,w=!0),l(11,i=50),h=i,!c){l(0,u=p.corpus);return}l(0,u=p.corpus.filter(I=>!c||c.split(" ").map(M=>M.toLowerCase()).every(M=>I.keywords.some(b=>b.includes(M)))))}function Y(){l(11,i=Math.min(u.length,i+h))}Ue(()=>{l(2,c=B.url.searchParams.get("keywords")||""),c&&N()});function R(){c=this.value,l(2,c)}return t.$$set=I=>{"data"in I&&l(10,p=I.data)},t.$$.update=()=>{t.$$.dirty&2049&&l(6,o=u.slice(0,i)),t.$$.dirty&2049&&l(5,a=u.length>i),t.$$.dirty&1&&l(4,n=(()=>{const I=Math.min(...u.filter(b=>b.notBefore).map(b=>b.notBefore));return Math.max(...u.filter(b=>b.notAfter).map(b=>b.notAfter))-I})()),t.$$.dirty&1&&l(3,_=new Set(u.map(I=>I.settlement)).size)},[u,w,c,_,n,a,o,y,N,Y,p,i,R]}class at extends je{constructor(e){super(),Pe(this,e,$e,Ze,ye,{data:10})}}export{at as component};
