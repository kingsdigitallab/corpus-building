const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["../chunks/openseadragon.DS3KAUka.js","../chunks/maplibre-gl.BSwFECQO.js","../chunks/utils.DE1e-iYh.js","../chunks/disclose-version.DNuuheQc.js","../assets/maplibre-gl.CuCRB34y.css"])))=>i.map(i=>d[i]);
var qt=Object.defineProperty;var Gt=(r,t,u)=>t in r?qt(r,t,{enumerable:!0,configurable:!0,writable:!0,value:u}):r[t]=u;var wt=(r,t,u)=>Gt(r,typeof t!="symbol"?t+"":t,u);import{_ as Vt}from"../chunks/preload-helper.C1FmrZbK.js";import{p as xt,q as Kt,s as Ae,r as Pe,o as Ke,a as j,c as oe,v as Yt,t as U,e as kt,b as P}from"../chunks/disclose-version.DNuuheQc.js";import{b as Jt,h as Lt,c as Ot,a as Qt,d as Mt,a8 as Xt,aH as $t,aG as ea,O as ta,a2 as aa,a1 as na,aK as ra,aL as Et,y as Te,aM as S,aN as De,F as de,A as Se,J as g,g as a,aO as H,s as O,aP as oa,B as v,D as f,C as c,z as le,aQ as It,ay as ia,G as Pt,K as sa}from"../chunks/utils.DE1e-iYh.js";import{p as i,i as re,a as la}from"../chunks/props.MuTu1CGq.js";import{e as qe,i as Ge,s as Me}from"../chunks/attributes.DEFeRuxD.js";import{c as dt,a as Fe,o as At}from"../chunks/index-client.YRCLTaCo.js";import{b as da}from"../chunks/paths.CGg6oF8e.js";import{m as ce,s as ca,t as fa,I as ua}from"../chunks/maplibre-gl.BSwFECQO.js";import{s as ct,a as va,b as ma,i as pa,p as ga,E as ha}from"../chunks/config.C11SEYnn.js";import{i as je}from"../chunks/legacy.CvZse-fJ.js";import{w as we,r as lt}from"../chunks/index.Bkz9y6Dn.js";import{b as Dt}from"../chunks/this.qg2SipPB.js";function Ve(r,t,u,e,o){var n=r,h="",m;Jt(()=>{if(h===(h=t()??"")){Lt&&Ot();return}m!==void 0&&(na(m),m=void 0),h!==""&&(m=Qt(()=>{if(Lt){Mt.data;for(var p=Ot(),x=p;p!==null&&(p.nodeType!==8||p.data!=="");)x=p,p=Xt(p);if(p===null)throw $t(),ea;xt(Mt,x),n=ta(p);return}var A=h+"",T=Kt(A);xt(aa(T),T.lastChild),n.before(T)}))})}const ft=Symbol.for("svelte-maplibre");function Ne(){return ra(ft)}function _a(r){let t=new WeakMap;return u=>{var h;let e=t.get(u.originalEvent);if(e!==void 0)return e;let n=(h=u.target.queryRenderedFeatures(u.point).find(m=>{var p;return(p=r.get(m.layer.id))==null?void 0:p.interactive}))==null?void 0:h.layer.id;return t.set(u.originalEvent,n),n}}function ya(){let r=new Map;return Et(ft,{map:we(null),source:lt(null),layer:lt(null),popupTarget:lt(null),cluster:we(),loadedImages:we(new Set),minzoom:we(0),maxzoom:we(24),layerEvent:we(null),layerInfo:r,eventTopMost:_a(r),markerClickManager:new xa})}function Tt(r){return{subscribe:r.subscribe}}function ba({key:r,setPopupTarget:t=!1,setCluster:u=!1,setMouseEvent:e=!1}){let o=Ne(),n=we(null),h=Tt(n),m={...o,[r]:Tt(n)};if(t&&(m.popupTarget=h),e){let p=we(null);m.layerEvent=p,o.layerEvent=p}return u&&(m.cluster=we()),Et(ft,m),{...o,self:n}}function Ca(){return ba({key:"popupTarget",setPopupTarget:!0,setMouseEvent:!0})}function wa(r){return"layerType"in r&&r.layerType==="deckgl"}class xa{constructor(){wt(this,"_handlers",new Set)}add(t){this._handlers.add(t)}remove(t){this._handlers.delete(t)}handleClick(t){for(const u of this._handlers)u(t)}}var jt=ka;function ka(r){var t,u,e;if(r){if(Array.isArray(r)){for(t=[],u=r.length,e=0;e<u;e++){var o=r[e];o!=null&&t.push(o)}return t}if(typeof r=="object"){t={};var n=Object.keys(r);for(u=n.length,e=0;e<u;e++){var h=n[e],m=r[h];m!=null&&(t[h]=m)}return t}}}function La(r,t){Te(t,!1);const u=Ae(),e=()=>oe(F,"$marker",u),o=()=>oe(M,"$map",u);let n=i(t,"marker",12,void 0),h=i(t,"lngLat",12),m=i(t,"class",8,void 0),p=i(t,"draggable",8,!1),x=i(t,"feature",8,null),A=i(t,"offset",8,void 0),T=i(t,"rotation",8,0),B=i(t,"opacity",8,1);const q=dt(),{map:M,layerEvent:G,self:F}=Ca(),ge=()=>V("dragstart"),fe=()=>{X(),V("drag")},J=()=>{X(),V("dragend")};Pe(F,new ce.Marker(jt({draggable:p(),rotation:T(),className:m(),offset:A(),opacity:B().toString()})).setLngLat(h()).addTo(o())),n(e()),p()&&(e().on("dragstart",ge),e().on("drag",fe),e().on("dragend",J)),Fe(()=>{var w;n(void 0),(w=e())==null||w.remove()});function X(){var $;let w=($=e())==null?void 0:$.getLngLat();w&&(Array.isArray(h())?h([w.lng,w.lat]):h()&&"lon"in h()?h({lon:w.lng,lat:w.lat}):h(w))}function V(w){var _e,ye;let $=(_e=e())==null?void 0:_e.getLngLat();if(!$)return;const he=[$.lng,$.lat];let ee={map:o(),marker:e(),lngLat:he,features:[{type:"Feature",properties:((ye=x())==null?void 0:ye.properties)??{},geometry:{type:"Point",coordinates:he}}]};Pe(G,{...ee,layerType:"marker",type:w}),q(w,ee)}S(()=>(e(),g(h())),()=>{var w;(w=e())==null||w.setLngLat(h())}),S(()=>(e(),g(A())),()=>{var w;(w=e())==null||w.setOffset(A()??[0,0])}),S(()=>(e(),g(T())),()=>{var w;(w=e())==null||w.setRotation(T())}),S(()=>(e(),g(B())),()=>{var w;(w=e())==null||w.setOpacity(B().toString())}),De(),je();var ue=Ke(),E=de(ue);ct(E,t,"default",{get marker(){return e()}},null),j(r,ue),Se()}function Oa(r,t){Te(t,!1);const u=Ae(),e=()=>oe(o,"$map",u),{map:o}=Ne();let n=i(t,"position",8,"top-left"),h=i(t,"container",8,void 0),m=H(null);Fe(()=>{var p;(p=e())!=null&&p.loaded()&&a(m)&&e().removeControl(a(m))}),S(()=>(e(),a(m),g(h()),g(n())),()=>{if(e()&&!a(m)){let p;typeof h()=="string"?p=document.querySelector(h())??void 0:p=h(),O(m,new ce.FullscreenControl({container:p})),e().addControl(a(m),n())}}),De(),je(),Se()}function Ma(r,t){Te(t,!1);const u=Ae(),e=()=>oe(o,"$map",u),{map:o}=Ne();let n=i(t,"position",8,"top-left"),h=i(t,"positionOptions",8,void 0),m=i(t,"fitBoundsOptions",8,void 0),p=i(t,"trackUserLocation",8,!1),x=i(t,"showAccuracyCircle",8,!0),A=i(t,"showUserLocation",8,!0),T=i(t,"control",12,null);Fe(()=>{var B;(B=e())!=null&&B.loaded()&&T()&&e().removeControl(T())}),S(()=>(e(),g(T()),g(h()),g(m()),g(p()),g(x()),g(A()),g(n())),()=>{e()&&!T()&&(T(new ce.GeolocateControl({positionOptions:h(),fitBoundsOptions:m(),trackUserLocation:p(),showAccuracyCircle:x(),showUserLocation:A()})),e().addControl(T(),n()))}),De(),je(),Se()}function Pa(r){let t=r.getCenter(),u=Math.round(r.getZoom()*100)/100,e=Math.ceil((u*Math.LN2+Math.log(512/360/.5))/Math.LN10),o=Math.pow(10,e),n=Math.round(t.lat*o)/o,h=Math.round(t.lng*o)/o,m=`${u}/${n}/${h}`,p=r.getBearing(),x=r.getPitch();return(p||x)&&(m+=`/${Math.round(p*10)/10}`),x&&(m+=`/${Math.round(x)}`),`#${m}`}function Ta(r){return r.replace("#","").split("/").map(parseFloat)}var Ze=ut;function ut(r,t){return r===t||r!==r&&t!==t?!0:typeof r!=typeof t||{}.toString.call(r)!={}.toString.call(t)||r!==Object(r)||!r?!1:Array.isArray(r)?St(r,t):{}.toString.call(r)=="[object Set]"?St(Array.from(r),Array.from(t)):{}.toString.call(r)=="[object Object]"?Ea(r,t):Sa(r,t)}function Sa(r,t){return r.toString()===t.toString()}function St(r,t){var u=r.length;if(u!=t.length)return!1;for(var e=0;e<u;e++)if(!ut(r[e],t[e]))return!1;return!0}function Ea(r,t){var u=Object.keys(r),e=u.length;if(e!=Object.keys(t).length)return!1;for(var o=0;o<e;o++){var n=u[o];if(!(t.hasOwnProperty(n)&&ut(r[n],t[n])))return!1}return!0}function Ia(r,t){Te(t,!1);const u=Ae(),e=()=>oe(o,"$map",u),{map:o}=Ne();let n=i(t,"position",8,"top-left"),h=i(t,"showCompass",8,!0),m=i(t,"showZoom",8,!0),p=i(t,"visualizePitch",8,!1),x=H(null);Fe(()=>{var A;(A=e())!=null&&A.loaded()&&a(x)&&e().removeControl(a(x))}),S(()=>(e(),a(x),g(h()),g(m()),g(p()),g(n())),()=>{e()&&!a(x)&&(O(x,new ce.NavigationControl({showCompass:h(),showZoom:m(),visualizePitch:p()})),e().addControl(a(x),n()))}),De(),je(),Se()}function Aa(r,t){Te(t,!1);const u=Ae(),e=()=>oe(o,"$map",u),{map:o}=Ne();let n=i(t,"position",8,"bottom-left"),h=i(t,"maxWidth",8,void 0),m=i(t,"unit",8,"metric"),p=H(null);Fe(()=>{var x;(x=e())!=null&&x.loaded()&&a(p)&&e().removeControl(a(p))}),S(()=>(e(),a(p),g(h()),g(m()),g(n())),()=>{e()&&!a(p)&&(O(p,new ce.ScaleControl({maxWidth:h(),unit:m()})),e().addControl(a(p),n()))}),De(),je(),Se()}var Da=U("<!> <!> <!> <!>",1),ja=U("<!> <!>",1),Ra=U('<div data-testid="map-container"><!></div>');function Ba(r,t){Te(t,!1);const u=Ae(),e=()=>oe(Y,"$mapInstance",u),o=()=>oe(ie,"$loadedImages",u),n=H(),h=H();let m=i(t,"map",12,null),p=i(t,"mapContainer",12,void 0),x=i(t,"class",8,void 0),A=i(t,"style",8),T=i(t,"diffStyleUpdates",8,!1),B=i(t,"center",12,void 0),q=i(t,"zoom",12,void 0),M=i(t,"pitch",12,0),G=i(t,"bearing",12,0),F=i(t,"bounds",12,void 0),ge=i(t,"hash",8,!1),fe=i(t,"updateHash",8,d=>{window.history.replaceState(window.history.state,"",d)}),J=i(t,"loaded",12,!1),X=i(t,"minZoom",8,0),V=i(t,"maxZoom",8,22),ue=i(t,"minPitch",8,0),E=i(t,"maxPitch",8,60),w=i(t,"renderWorldCopies",8,void 0),$=i(t,"dragPan",8,void 0),he=i(t,"dragRotate",8,void 0),ee=i(t,"pitchWithRotate",8,void 0),_e=i(t,"antialias",8,void 0),ye=i(t,"zoomOnDoubleClick",8,!0),xe=i(t,"locale",8,void 0),We=i(t,"interactive",8,!0),y=i(t,"attributionControl",8,!0),ke=i(t,"cooperativeGestures",8,!1),K=i(t,"preserveDrawingBuffer",8,!1),Ee=i(t,"maxBounds",8,void 0),te=i(t,"images",24,()=>[]),Z=i(t,"standardControls",8,!1),N=i(t,"filterLayers",8,void 0),Re=i(t,"transformRequest",8,void 0);const D=dt(),{map:Y,loadedImages:ie}=ya();let ve=H(new Set);async function Le(d,s=!1){var k;if(e()&&!(!e().loaded()&&!s))if("url"in d){a(ve).add(d.id);try{let z=await e().loadImage(d.url);(k=e())==null||k.addImage(d.id,z.data,d.options),o().add(d.id),Pe(ie,o())}catch(z){D("error",z)}finally{a(ve).delete(d.id)}}else e().addImage(d.id,d.data,d.options),o().add(d.id),Pe(ie,o())}let me=H(void 0),ae=H(void 0),pe=H(void 0),Q=H(void 0);function Oe(d){return l(),Pe(Y,new ce.Map(jt({container:d,style:A(),locale:xe(),center:B(),zoom:q(),pitch:M(),bearing:G(),minZoom:X(),maxZoom:V(),minPitch:ue(),maxPitch:E(),renderWorldCopies:w(),dragPan:$(),dragRotate:he(),pitchWithRotate:ee(),antialias:_e(),interactive:We(),preserveDrawingBuffer:K(),maxBounds:Ee(),bounds:F(),attributionControl:y(),transformRequest:Re(),cooperativeGestures:ke()}))),e().on("load",s=>{s.target.getContainer().setAttribute("data-testid","map"),s.target.getCanvas().setAttribute("data-testid","map-canvas"),J(!0),D("load",e())}),e().on("error",s=>D("error",{...s,map:e()})),e().on("movestart",s=>D("movestart",{...s,map:e()})),e().on("moveend",s=>{if(B(s.target.getCenter()),q(s.target.getZoom()),M(s.target.getPitch()),G(s.target.getBearing()),F(s.target.getBounds()),D("moveend",{...s,map:e()}),ge()){let k=new URL(window.location.href.replace(/(#.+)?$/,Pa(e())));fe()(k)}}),e().on("click",s=>D("click",{...s,map:e()})),e().on("dblclick",s=>D("dblclick",{...s,map:e()})),e().on("contextmenu",s=>D("contextmenu",{...s,map:e()})),e().on("zoomstart",s=>D("zoomstart",{...s,map:e()})),e().on("zoom",s=>{D("zoom",{...s,map:e()})}),e().on("zoomend",s=>{D("zoomend",{...s,map:e()})}),e().on("style.load",()=>{if(e()){const s=e().getStyle();if(O(me,s.layers.map(k=>k.id)),O(ae,Object.keys(s.sources)),a(Q))for(const[k,z]of Object.entries(a(Q)))e().addSource(k,z);if(a(pe))for(const k of a(pe))e().addLayer(k);for(const k of te())Le(k,!0)}}),e().on("styledata",s=>{if(e()&&N()){const k=e().getStyle().layers;if(k)for(let z of k)N()(z)||e().setLayoutProperty(z.id,"visibility","none")}D("styledata",{...s,map:e()})}),{destroy(){var s;J(!1),(s=e())==null||s.remove(),Pe(Y,null)}}}let Ie=H(A());function l(){if(ge()){let d=Ta(window.location.hash);d.length>=3&&(q(d[0]),B([d[2],d[1]])),d.length==5&&(G(d[3]),M(d[4]))}}S(()=>g(Z()),()=>{O(n,typeof Z()=="boolean"?void 0:Z())}),S(()=>e(),()=>{m(e())}),S(()=>(e(),g(A()),a(Ie),a(me),a(ae),g(T())),()=>{if(e()&&!Ze(A(),a(Ie))){const d=e().getStyle();if(a(me)&&O(pe,d.layers.filter(s=>!a(me).includes(s.id))),a(ae)){const s=Object.keys(d.sources).filter(k=>!a(ae).includes(k));O(Q,{});for(const k of s)It(Q,a(Q)[k]=d.sources[k])}O(Ie,A()),e().setStyle(A(),{diff:T()}),Pe(ie,new Set),O(ve,new Set)}}),S(()=>(g(J()),e(),g(te()),o(),a(ve)),()=>{var d;if(J()&&((d=e())!=null&&d.loaded()))for(let s of te())!o().has(s.id)&&!a(ve).has(s.id)&&!e().hasImage(s.id)&&Le(s)}),S(()=>(g(te()),o()),()=>{O(h,te().every(d=>o().has(d.id)))}),S(()=>(e(),g(B()),g(q()),g(G()),g(M())),()=>{var d,s,k,z;if(e()){let se={};B()!=null&&!Ze(B(),(d=e())==null?void 0:d.getCenter())&&(se.center=B()),q()!=null&&!Ze(q(),(s=e())==null?void 0:s.getZoom())&&(se.zoom=q()),G()!=null&&!Ze(G(),(k=e())==null?void 0:k.getBearing())&&(se.bearing=G()),M()!=null&&!Ze(M(),(z=e())==null?void 0:z.getPitch())&&(se.pitch=M()),Object.keys(se).length&&e().easeTo(se)}}),S(()=>(g(F()),e()),()=>{var d,s;F()&&!Ze(F(),(d=e())==null?void 0:d.getBounds())&&((s=e())==null||s.fitBounds(F()))}),S(()=>(g(ye()),e()),()=>{var d,s;ye()?(d=e())==null||d.doubleClickZoom.enable():(s=e())==null||s.doubleClickZoom.disable()}),De(),je();var I=Ra();Yt("hashchange",oa,l);var be=v(I);re(be,()=>e()&&J(),d=>{var s=ja(),k=de(s);re(k,Z,se=>{var Be=Da(),Je=de(Be);Ia(Je,{get position(){return a(n)}});var ze=f(Je,2);Ma(ze,{get position(){return a(n)},fitBoundsOptions:{maxZoom:12}});var Qe=f(ze,2);Oa(Qe,{get position(){return a(n)}});var et=f(Qe,2);Aa(et,{get position(){return a(n)}}),j(se,Be)});var z=f(k,2);ct(z,t,"default",{get map(){return e()},get loadedImages(){return o()},get allImagesLoaded(){return a(h)}},null),j(d,s)}),c(I),Dt(I,d=>p(d),()=>p()),va(I,d=>Oe(d)),le(()=>{ca(I,`${x()??""} svelte-p00lfq`),fa(I,"expand-map",!x())}),j(r,I),Se()}var za=U("<div><!></div>");function Ha(r,t){const u=ma(t);Te(t,!1);const e=Ae(),o=()=>oe(he,"$popupTarget",e),n=()=>oe($,"$map",e),h=()=>oe(_e,"$layer",e),m=()=>oe(ee,"$layerEvent",e),p=H(),x=H();let A=i(t,"closeButton",8,void 0),T=i(t,"closeOnClickOutside",8,!0),B=i(t,"closeOnClickInside",8,!1),q=i(t,"closeOnMove",8,!1),M=i(t,"openOn",8,"click"),G=i(t,"openIfTopMost",8,!0),F=i(t,"focusAfterOpen",8,!0),ge=i(t,"anchor",8,void 0),fe=i(t,"offset",8,void 0),J=i(t,"popupClass",8,void 0),X=i(t,"maxWidth",8,void 0),V=i(t,"lngLat",12,void 0),ue=i(t,"html",8,void 0),E=i(t,"open",12,!1);const w=dt(),{map:$,popupTarget:he,layerEvent:ee,layer:_e,eventTopMost:ye,markerClickManager:xe}=Ne(),We=["click","dblclick","contextmenu"];let y=H(),ke=H(!1),K=H();function Ee(){if(!a(y))return;let l=a(y).getElement();!l||l===a(K)||(O(K,l),M()==="hover"&&It(K,a(K).style.pointerEvents="none"),a(K).addEventListener("mouseenter",()=>{O(ke,!0)},{passive:!0}),a(K).addEventListener("mouseleave",()=>{O(ke,!1)},{passive:!0}),a(K).addEventListener("click",()=>{B()&&E(!1)},{passive:!0}))}At(()=>{if(n())return n().on("click",ae),n().on("contextmenu",ae),xe.add(pe),typeof o()=="string"&&(n().on("click",o(),D),n().on("dblclick",o(),D),n().on("contextmenu",o(),D),n().on("mousemove",o(),me),n().on("mouseleave",o(),Le),n().on("touchstart",o(),ie),n().on("touchend",o(),ve)),()=>{var l,I;(l=n())!=null&&l.loaded()&&((I=a(y))==null||I.remove(),n().off("click",ae),n().off("contextmenu",ae),xe.remove(pe),o()instanceof ce.Marker?o().getPopup()===a(y)&&o().setPopup(void 0):typeof o()=="string"&&(n().off("click",o(),D),n().off("dblclick",o(),D),n().off("contextmenu",o(),D),n().off("mousemove",o(),me),n().off("mouseleave",o(),Le),n().off("touchstart",o(),ie),n().off("touchend",o(),ve)))}});function te(l){return G()?!("marker"in l)&&!wa(l)&&ye(l)!==h():!1}let Z=H(null),N=H("normal");function Re(l){"layerType"in l&&l.layerType==="deckgl"?(V(l.coordinate),O(Z,l.object?[l.object]:null)):(V(l.lngLat),O(Z,l.features??[]))}function D(l){l.type!==M()||te(l)||(Re(l),setTimeout(()=>E(!0)))}let Y=null;function ie(l){Y=l.point}function ve(l){if(!Y||M()!=="hover")return;let I=Y.dist(l.point);Y=null,I<3&&(V(l.lngLat),O(Z,l.features??[]),a(y).isOpen()?O(N,"justOpened"):(O(N,"opening"),E(!0)))}function Le(l){M()!=="hover"||Y||a(N)!=="normal"||(E(!1),O(Z,null))}function me(l){if(!(M()!=="hover"||Y||a(N)!=="normal")){if(te(l)){E(!1),O(Z,null);return}E(!0),O(Z,l.features??[]),V(l.lngLat)}}function ae(l){var be;if(a(N)==="justOpened"){O(N,"normal");return}if(!T())return;let I=[a(K),o()instanceof ce.Marker?(be=o())==null?void 0:be.getElement():null];E()&&a(y).isOpen()&&!I.some(d=>d==null?void 0:d.contains(l.originalEvent.target))&&(l.type==="contextmenu"&&M()==="contextmenu"||l.type!=="contextmenu")&&E(!1)}function pe(l){T()&&E()&&a(y).isOpen()&&l.marker!==o()&&E(!1)}Fe(()=>{var l;n()&&((l=a(y))!=null&&l.isOpen())&&a(y).remove()});let Q=H();S(()=>(g(A()),g(T()),g(B())),()=>{O(p,A()??(!T()&&!B()))}),S(()=>(a(y),a(p),g(q()),g(F()),g(X()),g(J()),g(ge()),g(fe())),()=>{a(y)||(O(y,new ce.Popup({closeButton:a(p),closeOnClick:!1,closeOnMove:q(),focusAfterOpen:F(),maxWidth:X(),className:J(),anchor:ge(),offset:fe()})),O(K,a(y).getElement()),a(y).on("open",()=>{E(!0),Ee(),w("open",a(y))}),a(y).on("close",()=>{E(!1),w("close",a(y))}),a(y).on("hover",()=>{w("hover",a(y))}))}),S(()=>(a(y),o(),g(M())),()=>{a(y)&&o()instanceof ce.Marker&&(M()==="click"?o().setPopup(a(y)):o().getPopup()===a(y)&&o().setPopup(void 0))}),S(()=>(g(M()),m()),()=>{var l;We.includes(M())&&((l=m())==null?void 0:l.type)===M()&&(D(m()),Pe(ee,null))}),S(()=>(g(M()),m()),()=>{var l,I;O(x,M()==="hover"&&(((l=m())==null?void 0:l.type)==="mousemove"||((I=m())==null?void 0:I.type)==="mouseenter"))}),S(()=>(g(M()),a(x),m(),a(ke)),()=>{M()==="hover"&&ee&&(a(x)&&m()&&Re(m()),E((a(x)||a(ke))??!1))}),S(()=>(a(Q),a(y),g(ue())),()=>{a(Q)?a(y).setDOMContent(a(Q)):ue()&&a(y).setHTML(ue())}),S(()=>(g(V()),a(y)),()=>{V()&&a(y).setLngLat(V())}),S(()=>(n(),a(y),g(E()),a(N)),()=>{if(n()){let l=a(y).isOpen();E()&&!l?(a(y).addTo(n()),a(N)==="opening"&&O(N,"justOpened")):!E()&&l&&a(y).remove()}}),De(),je();var Oe=Ke(),Ie=de(Oe);re(Ie,()=>u.default,l=>{var I=za(),be=v(I);re(be,()=>{var d;return((d=a(Z))==null?void 0:d.length)||o()instanceof ce.Marker},d=>{var s=Ke(),k=de(s);ct(k,t,"default",{get features(){return a(Z)},get data(){var z;return((z=a(Z))==null?void 0:z[0])??null},get map(){return n()},close:()=>E(!1)},null),j(d,s)}),c(I),Dt(I,d=>O(Q,d),()=>a(Q)),j(l,I)}),j(r,Oe),Se()}var Ye=Uint8Array,Rt=Uint16Array,Za=Int32Array,Fa=new Ye([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Na=new Ye([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Bt=function(r,t){for(var u=new Rt(31),e=0;e<31;++e)u[e]=t+=1<<r[e-1];for(var o=new Za(u[30]),e=1;e<30;++e)for(var n=u[e];n<u[e+1];++n)o[n]=n-u[e]<<5|e;return{b:u,r:o}},zt=Bt(Fa,2),Wa=zt.b,Ua=zt.r;Wa[28]=258,Ua[258]=28;Bt(Na,0);var qa=new Rt(32768);for(L=0;L<32768;++L)Ce=(L&43690)>>1|(L&21845)<<1,Ce=(Ce&52428)>>2|(Ce&13107)<<2,Ce=(Ce&61680)>>4|(Ce&3855)<<4,qa[L]=((Ce&65280)>>8|(Ce&255)<<8)>>1;var Ce,L,$e=new Ye(288);for(L=0;L<144;++L)$e[L]=8;var L;for(L=144;L<256;++L)$e[L]=9;var L;for(L=256;L<280;++L)$e[L]=7;var L;for(L=280;L<288;++L)$e[L]=8;var L,Ga=new Ye(32);for(L=0;L<32;++L)Ga[L]=5;var L,Va=new Ye(0),Ka=typeof TextDecoder<"u"&&new TextDecoder,Ya=0;try{Ka.decode(Va,{stream:!0}),Ya=1}catch{}var Ja=U(", <a> </a>",1),Qa=U('<section id="translations" class="svelte-18t0of2"></section>'),Xa=U("<dt>Object type</dt> <dd><a> </a></dd>",1),$a=U(" <!>",1),en=U("<dd> </dd>"),tn=U("<dd> </dd>"),an=U('<div class="popup"> </div>'),nn=U("<dt>Map</dt> <dd><!></dd>",1),rn=U("<p> </p>"),on=U("<dl><dt>Place</dt> <dd> </dd> <dt>Repository</dt> <dd><a> </a><!></dd> <dt>Autopsy</dt> <dd> </dd> <dt>Map</dt> <dd>TODO: use the geo information in the museums dataset</dd></dl>"),sn=U('<section id="bibliography" class="svelte-18t0of2"></section>'),ln=U('<article><hgroup><h1 class="inscription-title svelte-18t0of2"> </h1> <p> <a> </a><!></p> <p> <a target="inscription">View in current site</a></p></hgroup> <div class="sections svelte-18t0of2"><figure id="facsimile-images" class="svelte-18t0of2"><section id="image-viewer" style="height: 50vh; width: 100%;" class="svelte-18t0of2"></section> <figcaption class="svelte-18t0of2"> </figcaption></figure> <section id="edition" class="svelte-18t0of2"><!></section> <section id="apparatus" class="svelte-18t0of2"><!></section> <!> <section id="physical-description" class="svelte-18t0of2"><h2 class="svelte-18t0of2">Physical description</h2> <section class="svelte-18t0of2"><h3 class="svelte-18t0of2">Support</h3> <dl><dt>Description</dt> <dd> </dd> <!> <dt>Material</dt> <dd><a> </a></dd> <dt>Condition</dt> <dd>TODO: add condition</dd> <dt>Dimensions</dt> <dd></dd></dl></section> <section class="svelte-18t0of2"><h3 class="svelte-18t0of2">Inscription</h3> <dl><dt>Layout</dt> <dd> </dd> <dt>Text condition</dt> <dd> </dd> <dt>Lettering</dt> <dd> </dd> <dt>Letter heights</dt> <!> <dt>Interlinear heights</dt> <!></dl></section></section> <section id="provenance" class="svelte-18t0of2"><h2 class="svelte-18t0of2">Provenance</h2> <dl><dt>Place of origin</dt> <dd> <a> </a></dd> <dt>Provenance found</dt> <dd> </dd> <!></dl></section> <section id="current-location" class="svelte-18t0of2"><h2 class="svelte-18t0of2">Current location</h2> <!></section> <section id="date" class="svelte-18t0of2"><h2 class="svelte-18t0of2">Date</h2> <!> <dl><dt>Evidence</dt> <dd> </dd></dl></section> <section id="text-type" class="svelte-18t0of2"><h2 class="svelte-18t0of2">Text type</h2> <p><a> </a></p></section> <section id="commentary" class="svelte-18t0of2"><!></section> <!> <section id="citation-and-status" class="svelte-18t0of2"><h2 class="svelte-18t0of2">Citation and editorial status</h2> <dl><dt>Citation</dt> <dd> </dd></dl></section></div></article>');function wn(r,t){Te(t,!0);let{slug:u,metadata:e,images:o,html:n}=t.data,h=ia(la(o[0].desc));const m=n.divs.find(b=>b.id==="edition"),p=n.divs.find(b=>b.id==="apparatus"),x=n.divs.filter(b=>b.id==="translation"),A=n.divs.find(b=>b.id==="commentary"),T=n.divs.filter(b=>b.id==="bibliography");let B=o.map(b=>`${pa}${u}/${b.url}/info.json`),q;At(async()=>{q=(await Vt(async()=>{const{default:_}=await import("../chunks/openseadragon.DS3KAUka.js").then(C=>C.o);return{default:_}},__vite__mapDeps([0,1,2,3,4]),import.meta.url)).default,q({id:"image-viewer",prefixUrl:`${da}/openseadragon/images/`,tileSources:B,sequenceMode:!0,showReferenceStrip:!0,preserveViewport:!0}).addHandler("page",function(_){const C=o[_.page];O(h,`${C.surfaceType}, ${C.desc}`)})});var M=ln(),G=v(M),F=v(G),ge=v(F);c(F);var fe=f(F,2),J=v(fe),X=f(J),V=v(X,!0);c(X);var ue=f(X);re(ue,()=>e.objectType,b=>{var _=Ja(),C=f(de(_)),R=v(C,!0);c(C),le(()=>{Me(C,"href",e.objectType.ref),P(R,e.objectType._)}),j(b,_)}),c(fe);var E=f(fe,2),w=v(E),$=f(w);c(E),c(G);var he=f(G,2),ee=v(he),_e=f(v(ee),2),ye=v(_e,!0);c(_e),c(ee);var xe=f(ee,2),We=v(xe);Ve(We,()=>m.html),c(xe);var y=f(xe,2),ke=v(y);Ve(ke,()=>p.html),c(y);var K=f(y,2);re(K,()=>x.length,b=>{var _=Qa();qe(_,21,()=>x,Ge,(C,R)=>{var W=Ke(),ne=de(W);Ve(ne,()=>a(R).html),j(C,W)}),c(_),j(b,_)});var Ee=f(K,2),te=f(v(Ee),2),Z=f(v(te),2),N=f(v(Z),2),Re=v(N,!0);c(N);var D=f(N,2);re(D,()=>e.objectType,b=>{var _=Xa(),C=f(de(_),2),R=v(C),W=v(R,!0);c(R),c(C),le(()=>{Me(R,"href",e.objectType.ref),P(W,e.objectType._)}),j(b,_)});var Y=f(D,4),ie=v(Y),ve=v(ie,!0);c(ie),c(Y);var Le=f(Y,8);qe(Le,21,()=>e.dimensions,Ge,(b,_,C)=>{Pt();var R=$a(),W=de(R),ne=f(W);re(ne,()=>C<e.dimensions.length-1,Xe=>{var Ue=kt(", ");j(Xe,Ue)}),le(()=>P(W,`${a(_).dimension??""}: ${a(_)._??""}
							${a(_).unit??""}`)),j(b,R)}),c(Le),c(Z),c(te);var me=f(te,2),ae=f(v(me),2),pe=f(v(ae),2),Q=v(pe,!0);c(pe);var Oe=f(pe,4),Ie=v(Oe,!0);c(Oe);var l=f(Oe,4),I=v(l,!0);c(l);var be=f(l,4);qe(be,17,()=>e.handNote.dimensions.filter(b=>b.type==="letterHeight"),Ge,(b,_)=>{var C=en(),R=v(C);c(C),le(()=>P(R,`${a(_).l??""}: ${a(_).h??""}${a(_).unit??""}`)),j(b,C)});var d=f(be,4);qe(d,17,()=>e.handNote.dimensions.filter(b=>b.type==="interlinear"),Ge,(b,_)=>{var C=tn(),R=v(C);c(C),le(()=>P(R,`${a(_).l??""}: ${a(_).h??""}${(a(_).h!=="not measured"?a(_).unit:"")??""}`)),j(b,C)}),c(ae),c(me),c(Ee);var s=f(Ee,2),k=f(v(s),2),z=f(v(k),2),se=v(z),Be=f(se),Je=v(Be,!0);c(Be),c(z);var ze=f(z,4),Qe=v(ze,!0);c(ze);var et=f(ze,2);re(et,()=>e.provenanceFound.geo,b=>{var _=nn();const C=sa(()=>[e.provenanceFound.geo[1],e.provenanceFound.geo[0]]);var R=f(de(_),2),W=v(R);Ba(W,{get center(){return a(C)},zoom:7,class:"map",standardControls:!0,style:"https://api.maptiler.com/maps/positron/style.json?key=brTBbnRxuiKp6PgjwFPr",children:(ne,Xe)=>{La(ne,{get lngLat(){return a(C)},children:(Ue,it)=>{Ha(Ue,{offset:[0,-10],children:(st,Ct)=>{var He=an(),Ut=v(He,!0);c(He),le(()=>P(Ut,e.provenanceFound._)),j(st,He)},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}}),c(R),j(b,_)}),c(k),c(s);var tt=f(s,2),Ht=f(v(tt),2);re(Ht,()=>e.provenanceLost,b=>{var _=rn(),C=v(_,!0);c(_),le(()=>P(C,e.provenanceLost._)),j(b,_)},b=>{var _=on(),C=f(v(_),2),R=v(C);c(C);var W=f(C,4),ne=v(W),Xe=v(ne,!0);c(ne);var Ue=f(ne);re(Ue,()=>e.idno,Ct=>{var He=kt();le(()=>P(He,`,
							${e.idno._??""}`)),j(Ct,He)}),c(W);var it=f(W,4),st=v(it,!0);c(it),Pt(4),c(_),le(()=>{P(R,`${e.settlement??""}, ${e.country??""}`),Me(ne,"href",e.repository.ref),P(Xe,e.repository._),P(st,e.provenanceObserved._)}),j(b,_)}),c(tt);var at=f(tt,2),vt=f(v(at),2);ua(vt,{inscription:e});var mt=f(vt,2),pt=f(v(mt),2),Zt=v(pt,!0);c(pt),c(mt),c(at);var nt=f(at,2),gt=f(v(nt),2),rt=v(gt),Ft=v(rt,!0);c(rt),c(gt),c(nt);var ot=f(nt,2),Nt=v(ot);Ve(Nt,()=>A.html),c(ot);var ht=f(ot,2);re(ht,()=>T.length,b=>{var _=sn();qe(_,21,()=>T,Ge,(C,R)=>{var W=Ke(),ne=de(W);Ve(ne,()=>a(R).html),j(C,W)}),c(_),j(b,_)});var _t=f(ht,2),yt=f(v(_t),2),bt=f(v(yt),2),Wt=v(bt,!0);c(bt),c(yt),c(_t),c(he),c(M),le(()=>{P(ge,`${e.file??""}: ${e.title??""}`),P(J,`${e.textLang._??""}, `),Me(X,"href",e.type.ref),P(V,e.type._),P(w,`${e.status??""}, `),Me($,"href",`${ga}inscription/${u??""}`),P(ye,a(h)),P(Re,e.support),Me(ie,"href",e.material.ref),P(ve,e.material._),P(Q,e.layoutDesc.layout.p),P(Ie,e.layoutDesc.layout.damage||ha),P(I,e.handNote.lettering),P(se,`${(e.places[0].offset||"")??""} `),Me(Be,"href",e.places[0].ref),P(Je,e.places[0]._),P(Qe,e.provenanceFound._),P(Zt,e.evidence),Me(rt,"href",e.type.ref),P(Ft,e.type._),P(Wt,e.citation)}),j(r,M),Se()}export{wn as component};
