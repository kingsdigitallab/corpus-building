const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["../chunks/openseadragon.D2bpRMoO.js","../chunks/maplibre-gl.BKqjIULy.js","../chunks/utils.CgqR5BiE.js","../chunks/disclose-version.BwBVlfMN.js","../assets/maplibre-gl.CuCRB34y.css"])))=>i.map(i=>d[i]);
var Nt=Object.defineProperty;var Wt=(r,t,u)=>t in r?Nt(r,t,{enumerable:!0,configurable:!0,writable:!0,value:u}):r[t]=u;var bt=(r,t,u)=>Wt(r,typeof t!="symbol"?t+"":t,u);import{_ as Ft}from"../chunks/preload-helper.C1FmrZbK.js";import{q as xt,r as Ut,s as Ae,v as Pe,d as Ke,a as q,c as le,w as Vt,t as N,e as kt,b as P}from"../chunks/disclose-version.BwBVlfMN.js";import{h as Gt,k as Ct,m as wt,j as Kt,q as Lt,a8 as Yt,aI as Qt,aH as Xt,O as Jt,a2 as $t,a1 as ea,aL as ta,aM as Tt,p as Te,aN as S,aO as qe,f as se,d as Se,C as p,g as a,aP as H,v as O,aQ as aa,e as v,s as f,r as c,t as ie,aR as St,K as na,n as Ot,D as ra}from"../chunks/utils.CgqR5BiE.js";import{p as i,i as $,b as Et,a as oa}from"../chunks/props.IFVwysL6.js";import{s as st,c as ia,d as sa,e as Ue,i as Ve,b as Me}from"../chunks/attributes.Bxrms_db.js";import{c as lt,a as He,o as It}from"../chunks/index-client.Cj9I2f6z.js";import{w as ke,r as it,b as la}from"../chunks/paths.BvAgX3kQ.js";import{m as ce,s as da,t as ca,I as fa}from"../chunks/maplibre-gl.BKqjIULy.js";import{i as ua,p as va,E as ma}from"../chunks/config.gZhyNOq-.js";import{i as je}from"../chunks/legacy.DeTa_azy.js";function Ge(r,t,u,e,o){var n=r,h="",m;Gt(()=>{if(h===(h=t()??"")){Ct&&wt();return}m!==void 0&&(ea(m),m=void 0),h!==""&&(m=Kt(()=>{if(Ct){Lt.data;for(var g=wt(),C=g;g!==null&&(g.nodeType!==8||g.data!=="");)C=g,g=Yt(g);if(g===null)throw Qt(),Xt;xt(Lt,C),n=Jt(g);return}var j=h+"",T=Ut(j);xt($t(T),T.lastChild),n.before(T)}))})}const dt=Symbol.for("svelte-maplibre");function Ze(){return ta(dt)}function ga(r){let t=new WeakMap;return u=>{var h;let e=t.get(u.originalEvent);if(e!==void 0)return e;let n=(h=u.target.queryRenderedFeatures(u.point).find(m=>{var g;return(g=r.get(m.layer.id))==null?void 0:g.interactive}))==null?void 0:h.layer.id;return t.set(u.originalEvent,n),n}}function pa(){let r=new Map;return Tt(dt,{map:ke(null),source:it(null),layer:it(null),popupTarget:it(null),cluster:ke(),loadedImages:ke(new Set),minzoom:ke(0),maxzoom:ke(24),layerEvent:ke(null),layerInfo:r,eventTopMost:ga(r),markerClickManager:new ba})}function Mt(r){return{subscribe:r.subscribe}}function ha({key:r,setPopupTarget:t=!1,setCluster:u=!1,setMouseEvent:e=!1}){let o=Ze(),n=ke(null),h=Mt(n),m={...o,[r]:Mt(n)};if(t&&(m.popupTarget=h),e){let g=ke(null);m.layerEvent=g,o.layerEvent=g}return u&&(m.cluster=ke()),Tt(dt,m),{...o,self:n}}function _a(){return ha({key:"popupTarget",setPopupTarget:!0,setMouseEvent:!0})}function ya(r){return"layerType"in r&&r.layerType==="deckgl"}class ba{constructor(){bt(this,"_handlers",new Set)}add(t){this._handlers.add(t)}remove(t){this._handlers.delete(t)}handleClick(t){for(const u of this._handlers)u(t)}}var At=xa;function xa(r){var t,u,e;if(r){if(Array.isArray(r)){for(t=[],u=r.length,e=0;e<u;e++){var o=r[e];o!=null&&t.push(o)}return t}if(typeof r=="object"){t={};var n=Object.keys(r);for(u=n.length,e=0;e<u;e++){var h=n[e],m=r[h];m!=null&&(t[h]=m)}return t}}}function ka(r,t){Te(t,!1);const u=Ae(),e=()=>le(W,"$marker",u),o=()=>le(M,"$map",u);let n=i(t,"marker",12,void 0),h=i(t,"lngLat",12),m=i(t,"class",8,void 0),g=i(t,"draggable",8,!1),C=i(t,"feature",8,null),j=i(t,"offset",8,void 0),T=i(t,"rotation",8,0),R=i(t,"opacity",8,1);const U=lt(),{map:M,layerEvent:V,self:W}=_a(),pe=()=>G("dragstart"),fe=()=>{ee(),G("drag")},X=()=>{ee(),G("dragend")};Pe(W,new ce.Marker(At({draggable:g(),rotation:T(),className:m(),offset:j(),opacity:R().toString()})).setLngLat(h()).addTo(o())),n(e()),g()&&(e().on("dragstart",pe),e().on("drag",fe),e().on("dragend",X)),He(()=>{var k;n(void 0),(k=e())==null||k.remove()});function ee(){var te;let k=(te=e())==null?void 0:te.getLngLat();k&&(Array.isArray(h())?h([k.lng,k.lat]):h()&&"lon"in h()?h({lon:k.lng,lat:k.lat}):h(k))}function G(k){var _e,ye;let te=(_e=e())==null?void 0:_e.getLngLat();if(!te)return;const he=[te.lng,te.lat];let ae={map:o(),marker:e(),lngLat:he,features:[{type:"Feature",properties:((ye=C())==null?void 0:ye.properties)??{},geometry:{type:"Point",coordinates:he}}]};Pe(V,{...ae,layerType:"marker",type:k}),U(k,ae)}S(()=>(e(),p(h())),()=>{var k;(k=e())==null||k.setLngLat(h())}),S(()=>(e(),p(j())),()=>{var k;(k=e())==null||k.setOffset(j()??[0,0])}),S(()=>(e(),p(T())),()=>{var k;(k=e())==null||k.setRotation(T())}),S(()=>(e(),p(R())),()=>{var k;(k=e())==null||k.setOpacity(R().toString())}),qe(),je();var ue=Ke(),E=se(ue);st(E,t,"default",{get marker(){return e()}},null),q(r,ue),Se()}function Ca(r,t){Te(t,!1);const u=Ae(),e=()=>le(o,"$map",u),{map:o}=Ze();let n=i(t,"position",8,"top-left"),h=i(t,"container",8,void 0),m=H(null);He(()=>{var g;(g=e())!=null&&g.loaded()&&a(m)&&e().removeControl(a(m))}),S(()=>(e(),a(m),p(h()),p(n())),()=>{if(e()&&!a(m)){let g;typeof h()=="string"?g=document.querySelector(h())??void 0:g=h(),O(m,new ce.FullscreenControl({container:g})),e().addControl(a(m),n())}}),qe(),je(),Se()}function wa(r,t){Te(t,!1);const u=Ae(),e=()=>le(o,"$map",u),{map:o}=Ze();let n=i(t,"position",8,"top-left"),h=i(t,"positionOptions",8,void 0),m=i(t,"fitBoundsOptions",8,void 0),g=i(t,"trackUserLocation",8,!1),C=i(t,"showAccuracyCircle",8,!0),j=i(t,"showUserLocation",8,!0),T=i(t,"control",12,null);He(()=>{var R;(R=e())!=null&&R.loaded()&&T()&&e().removeControl(T())}),S(()=>(e(),p(T()),p(h()),p(m()),p(g()),p(C()),p(j()),p(n())),()=>{e()&&!T()&&(T(new ce.GeolocateControl({positionOptions:h(),fitBoundsOptions:m(),trackUserLocation:g(),showAccuracyCircle:C(),showUserLocation:j()})),e().addControl(T(),n()))}),qe(),je(),Se()}function La(r){let t=r.getCenter(),u=Math.round(r.getZoom()*100)/100,e=Math.ceil((u*Math.LN2+Math.log(512/360/.5))/Math.LN10),o=Math.pow(10,e),n=Math.round(t.lat*o)/o,h=Math.round(t.lng*o)/o,m=`${u}/${n}/${h}`,g=r.getBearing(),C=r.getPitch();return(g||C)&&(m+=`/${Math.round(g*10)/10}`),C&&(m+=`/${Math.round(C)}`),`#${m}`}function Oa(r){return r.replace("#","").split("/").map(parseFloat)}var ze=ct;function ct(r,t){return r===t||r!==r&&t!==t?!0:typeof r!=typeof t||{}.toString.call(r)!={}.toString.call(t)||r!==Object(r)||!r?!1:Array.isArray(r)?Pt(r,t):{}.toString.call(r)=="[object Set]"?Pt(Array.from(r),Array.from(t)):{}.toString.call(r)=="[object Object]"?Pa(r,t):Ma(r,t)}function Ma(r,t){return r.toString()===t.toString()}function Pt(r,t){var u=r.length;if(u!=t.length)return!1;for(var e=0;e<u;e++)if(!ct(r[e],t[e]))return!1;return!0}function Pa(r,t){var u=Object.keys(r),e=u.length;if(e!=Object.keys(t).length)return!1;for(var o=0;o<e;o++){var n=u[o];if(!(t.hasOwnProperty(n)&&ct(r[n],t[n])))return!1}return!0}function Ta(r,t){Te(t,!1);const u=Ae(),e=()=>le(o,"$map",u),{map:o}=Ze();let n=i(t,"position",8,"top-left"),h=i(t,"showCompass",8,!0),m=i(t,"showZoom",8,!0),g=i(t,"visualizePitch",8,!1),C=H(null);He(()=>{var j;(j=e())!=null&&j.loaded()&&a(C)&&e().removeControl(a(C))}),S(()=>(e(),a(C),p(h()),p(m()),p(g()),p(n())),()=>{e()&&!a(C)&&(O(C,new ce.NavigationControl({showCompass:h(),showZoom:m(),visualizePitch:g()})),e().addControl(a(C),n()))}),qe(),je(),Se()}function Sa(r,t){Te(t,!1);const u=Ae(),e=()=>le(o,"$map",u),{map:o}=Ze();let n=i(t,"position",8,"bottom-left"),h=i(t,"maxWidth",8,void 0),m=i(t,"unit",8,"metric"),g=H(null);He(()=>{var C;(C=e())!=null&&C.loaded()&&a(g)&&e().removeControl(a(g))}),S(()=>(e(),a(g),p(h()),p(m()),p(n())),()=>{e()&&!a(g)&&(O(g,new ce.ScaleControl({maxWidth:h(),unit:m()})),e().addControl(a(g),n()))}),qe(),je(),Se()}var Ea=N("<!> <!> <!> <!>",1),Ia=N("<!> <!>",1),Aa=N('<div data-testid="map-container"><!></div>');function qa(r,t){Te(t,!1);const u=Ae(),e=()=>le(Y,"$mapInstance",u),o=()=>le(de,"$loadedImages",u),n=H(),h=H();let m=i(t,"map",12,null),g=i(t,"mapContainer",12,void 0),C=i(t,"class",8,void 0),j=i(t,"style",8),T=i(t,"diffStyleUpdates",8,!1),R=i(t,"center",12,void 0),U=i(t,"zoom",12,void 0),M=i(t,"pitch",12,0),V=i(t,"bearing",12,0),W=i(t,"bounds",12,void 0),pe=i(t,"hash",8,!1),fe=i(t,"updateHash",8,d=>{window.history.replaceState(window.history.state,"",d)}),X=i(t,"loaded",12,!1),ee=i(t,"minZoom",8,0),G=i(t,"maxZoom",8,22),ue=i(t,"minPitch",8,0),E=i(t,"maxPitch",8,60),k=i(t,"renderWorldCopies",8,void 0),te=i(t,"dragPan",8,void 0),he=i(t,"dragRotate",8,void 0),ae=i(t,"pitchWithRotate",8,void 0),_e=i(t,"antialias",8,void 0),ye=i(t,"zoomOnDoubleClick",8,!0),Ce=i(t,"locale",8,void 0),Ne=i(t,"interactive",8,!0),y=i(t,"attributionControl",8,!0),we=i(t,"cooperativeGestures",8,!1),K=i(t,"preserveDrawingBuffer",8,!1),Ee=i(t,"maxBounds",8,void 0),ne=i(t,"images",24,()=>[]),Z=i(t,"standardControls",8,!1),F=i(t,"filterLayers",8,void 0),De=i(t,"transformRequest",8,void 0);const D=lt(),{map:Y,loadedImages:de}=pa();let ve=H(new Set);async function Le(d,s=!1){var w;if(e()&&!(!e().loaded()&&!s))if("url"in d){a(ve).add(d.id);try{let z=await e().loadImage(d.url);(w=e())==null||w.addImage(d.id,z.data,d.options),o().add(d.id),Pe(de,o())}catch(z){D("error",z)}finally{a(ve).delete(d.id)}}else e().addImage(d.id,d.data,d.options),o().add(d.id),Pe(de,o())}let me=H(void 0),re=H(void 0),ge=H(void 0),J=H(void 0);function Oe(d){return l(),Pe(Y,new ce.Map(At({container:d,style:j(),locale:Ce(),center:R(),zoom:U(),pitch:M(),bearing:V(),minZoom:ee(),maxZoom:G(),minPitch:ue(),maxPitch:E(),renderWorldCopies:k(),dragPan:te(),dragRotate:he(),pitchWithRotate:ae(),antialias:_e(),interactive:Ne(),preserveDrawingBuffer:K(),maxBounds:Ee(),bounds:W(),attributionControl:y(),transformRequest:De(),cooperativeGestures:we()}))),e().on("load",s=>{s.target.getContainer().setAttribute("data-testid","map"),s.target.getCanvas().setAttribute("data-testid","map-canvas"),X(!0),D("load",e())}),e().on("error",s=>D("error",{...s,map:e()})),e().on("movestart",s=>D("movestart",{...s,map:e()})),e().on("moveend",s=>{if(R(s.target.getCenter()),U(s.target.getZoom()),M(s.target.getPitch()),V(s.target.getBearing()),W(s.target.getBounds()),D("moveend",{...s,map:e()}),pe()){let w=new URL(window.location.href.replace(/(#.+)?$/,La(e())));fe()(w)}}),e().on("click",s=>D("click",{...s,map:e()})),e().on("dblclick",s=>D("dblclick",{...s,map:e()})),e().on("contextmenu",s=>D("contextmenu",{...s,map:e()})),e().on("zoomstart",s=>D("zoomstart",{...s,map:e()})),e().on("zoom",s=>{D("zoom",{...s,map:e()})}),e().on("zoomend",s=>{D("zoomend",{...s,map:e()})}),e().on("style.load",()=>{if(e()){const s=e().getStyle();if(O(me,s.layers.map(w=>w.id)),O(re,Object.keys(s.sources)),a(J))for(const[w,z]of Object.entries(a(J)))e().addSource(w,z);if(a(ge))for(const w of a(ge))e().addLayer(w);for(const w of ne())Le(w,!0)}}),e().on("styledata",s=>{if(e()&&F()){const w=e().getStyle().layers;if(w)for(let z of w)F()(z)||e().setLayoutProperty(z.id,"visibility","none")}D("styledata",{...s,map:e()})}),{destroy(){var s;X(!1),(s=e())==null||s.remove(),Pe(Y,null)}}}let Ie=H(j());function l(){if(pe()){let d=Oa(window.location.hash);d.length>=3&&(U(d[0]),R([d[2],d[1]])),d.length==5&&(V(d[3]),M(d[4]))}}S(()=>p(Z()),()=>{O(n,typeof Z()=="boolean"?void 0:Z())}),S(()=>e(),()=>{m(e())}),S(()=>(e(),p(j()),a(Ie),a(me),a(re),p(T())),()=>{if(e()&&!ze(j(),a(Ie))){const d=e().getStyle();if(a(me)&&O(ge,d.layers.filter(s=>!a(me).includes(s.id))),a(re)){const s=Object.keys(d.sources).filter(w=>!a(re).includes(w));O(J,{});for(const w of s)St(J,a(J)[w]=d.sources[w])}O(Ie,j()),e().setStyle(j(),{diff:T()}),Pe(de,new Set),O(ve,new Set)}}),S(()=>(p(X()),e(),p(ne()),o(),a(ve)),()=>{var d;if(X()&&((d=e())!=null&&d.loaded()))for(let s of ne())!o().has(s.id)&&!a(ve).has(s.id)&&!e().hasImage(s.id)&&Le(s)}),S(()=>(p(ne()),o()),()=>{O(h,ne().every(d=>o().has(d.id)))}),S(()=>(e(),p(R()),p(U()),p(V()),p(M())),()=>{var d,s,w,z;if(e()){let oe={};R()!=null&&!ze(R(),(d=e())==null?void 0:d.getCenter())&&(oe.center=R()),U()!=null&&!ze(U(),(s=e())==null?void 0:s.getZoom())&&(oe.zoom=U()),V()!=null&&!ze(V(),(w=e())==null?void 0:w.getBearing())&&(oe.bearing=V()),M()!=null&&!ze(M(),(z=e())==null?void 0:z.getPitch())&&(oe.pitch=M()),Object.keys(oe).length&&e().easeTo(oe)}}),S(()=>(p(W()),e()),()=>{var d,s;W()&&!ze(W(),(d=e())==null?void 0:d.getBounds())&&((s=e())==null||s.fitBounds(W()))}),S(()=>(p(ye()),e()),()=>{var d,s;ye()?(d=e())==null||d.doubleClickZoom.enable():(s=e())==null||s.doubleClickZoom.disable()}),qe(),je();var I=Aa();Vt("hashchange",aa,l);var be=v(I);$(be,()=>e()&&X(),d=>{var s=Ia(),w=se(s);$(w,Z,oe=>{var Qe=Ea(),Xe=se(Qe);Ta(Xe,{get position(){return a(n)}});var Re=f(Xe,2);wa(Re,{get position(){return a(n)},fitBoundsOptions:{maxZoom:12}});var Je=f(Re,2);Ca(Je,{get position(){return a(n)}});var We=f(Je,2);Sa(We,{get position(){return a(n)}}),q(oe,Qe)});var z=f(w,2);st(z,t,"default",{get map(){return e()},get loadedImages(){return o()},get allImagesLoaded(){return a(h)}},null),q(d,s)}),c(I),Et(I,d=>g(d),()=>g()),ia(I,d=>Oe(d)),ie(()=>{da(I,`${C()??""} svelte-p00lfq`),ca(I,"expand-map",!C())}),q(r,I),Se()}var ja=N("<div><!></div>");function Da(r,t){const u=sa(t);Te(t,!1);const e=Ae(),o=()=>le(he,"$popupTarget",e),n=()=>le(te,"$map",e),h=()=>le(_e,"$layer",e),m=()=>le(ae,"$layerEvent",e),g=H(),C=H();let j=i(t,"closeButton",8,void 0),T=i(t,"closeOnClickOutside",8,!0),R=i(t,"closeOnClickInside",8,!1),U=i(t,"closeOnMove",8,!1),M=i(t,"openOn",8,"click"),V=i(t,"openIfTopMost",8,!0),W=i(t,"focusAfterOpen",8,!0),pe=i(t,"anchor",8,void 0),fe=i(t,"offset",8,void 0),X=i(t,"popupClass",8,void 0),ee=i(t,"maxWidth",8,void 0),G=i(t,"lngLat",12,void 0),ue=i(t,"html",8,void 0),E=i(t,"open",12,!1);const k=lt(),{map:te,popupTarget:he,layerEvent:ae,layer:_e,eventTopMost:ye,markerClickManager:Ce}=Ze(),Ne=["click","dblclick","contextmenu"];let y=H(),we=H(!1),K=H();function Ee(){if(!a(y))return;let l=a(y).getElement();!l||l===a(K)||(O(K,l),M()==="hover"&&St(K,a(K).style.pointerEvents="none"),a(K).addEventListener("mouseenter",()=>{O(we,!0)},{passive:!0}),a(K).addEventListener("mouseleave",()=>{O(we,!1)},{passive:!0}),a(K).addEventListener("click",()=>{R()&&E(!1)},{passive:!0}))}It(()=>{if(n())return n().on("click",re),n().on("contextmenu",re),Ce.add(ge),typeof o()=="string"&&(n().on("click",o(),D),n().on("dblclick",o(),D),n().on("contextmenu",o(),D),n().on("mousemove",o(),me),n().on("mouseleave",o(),Le),n().on("touchstart",o(),de),n().on("touchend",o(),ve)),()=>{var l,I;(l=n())!=null&&l.loaded()&&((I=a(y))==null||I.remove(),n().off("click",re),n().off("contextmenu",re),Ce.remove(ge),o()instanceof ce.Marker?o().getPopup()===a(y)&&o().setPopup(void 0):typeof o()=="string"&&(n().off("click",o(),D),n().off("dblclick",o(),D),n().off("contextmenu",o(),D),n().off("mousemove",o(),me),n().off("mouseleave",o(),Le),n().off("touchstart",o(),de),n().off("touchend",o(),ve)))}});function ne(l){return V()?!("marker"in l)&&!ya(l)&&ye(l)!==h():!1}let Z=H(null),F=H("normal");function De(l){"layerType"in l&&l.layerType==="deckgl"?(G(l.coordinate),O(Z,l.object?[l.object]:null)):(G(l.lngLat),O(Z,l.features??[]))}function D(l){l.type!==M()||ne(l)||(De(l),setTimeout(()=>E(!0)))}let Y=null;function de(l){Y=l.point}function ve(l){if(!Y||M()!=="hover")return;let I=Y.dist(l.point);Y=null,I<3&&(G(l.lngLat),O(Z,l.features??[]),a(y).isOpen()?O(F,"justOpened"):(O(F,"opening"),E(!0)))}function Le(l){M()!=="hover"||Y||a(F)!=="normal"||(E(!1),O(Z,null))}function me(l){if(!(M()!=="hover"||Y||a(F)!=="normal")){if(ne(l)){E(!1),O(Z,null);return}E(!0),O(Z,l.features??[]),G(l.lngLat)}}function re(l){var be;if(a(F)==="justOpened"){O(F,"normal");return}if(!T())return;let I=[a(K),o()instanceof ce.Marker?(be=o())==null?void 0:be.getElement():null];E()&&a(y).isOpen()&&!I.some(d=>d==null?void 0:d.contains(l.originalEvent.target))&&(l.type==="contextmenu"&&M()==="contextmenu"||l.type!=="contextmenu")&&E(!1)}function ge(l){T()&&E()&&a(y).isOpen()&&l.marker!==o()&&E(!1)}He(()=>{var l;n()&&((l=a(y))!=null&&l.isOpen())&&a(y).remove()});let J=H();S(()=>(p(j()),p(T()),p(R())),()=>{O(g,j()??(!T()&&!R()))}),S(()=>(a(y),a(g),p(U()),p(W()),p(ee()),p(X()),p(pe()),p(fe())),()=>{a(y)||(O(y,new ce.Popup({closeButton:a(g),closeOnClick:!1,closeOnMove:U(),focusAfterOpen:W(),maxWidth:ee(),className:X(),anchor:pe(),offset:fe()})),O(K,a(y).getElement()),a(y).on("open",()=>{E(!0),Ee(),k("open",a(y))}),a(y).on("close",()=>{E(!1),k("close",a(y))}),a(y).on("hover",()=>{k("hover",a(y))}))}),S(()=>(a(y),o(),p(M())),()=>{a(y)&&o()instanceof ce.Marker&&(M()==="click"?o().setPopup(a(y)):o().getPopup()===a(y)&&o().setPopup(void 0))}),S(()=>(p(M()),m()),()=>{var l;Ne.includes(M())&&((l=m())==null?void 0:l.type)===M()&&(D(m()),Pe(ae,null))}),S(()=>(p(M()),m()),()=>{var l,I;O(C,M()==="hover"&&(((l=m())==null?void 0:l.type)==="mousemove"||((I=m())==null?void 0:I.type)==="mouseenter"))}),S(()=>(p(M()),a(C),m(),a(we)),()=>{M()==="hover"&&ae&&(a(C)&&m()&&De(m()),E((a(C)||a(we))??!1))}),S(()=>(a(J),a(y),p(ue())),()=>{a(J)?a(y).setDOMContent(a(J)):ue()&&a(y).setHTML(ue())}),S(()=>(p(G()),a(y)),()=>{G()&&a(y).setLngLat(G())}),S(()=>(n(),a(y),p(E()),a(F)),()=>{if(n()){let l=a(y).isOpen();E()&&!l?(a(y).addTo(n()),a(F)==="opening"&&O(F,"justOpened")):!E()&&l&&a(y).remove()}}),qe(),je();var Oe=Ke(),Ie=se(Oe);$(Ie,()=>u.default,l=>{var I=ja(),be=v(I);$(be,()=>{var d;return((d=a(Z))==null?void 0:d.length)||o()instanceof ce.Marker},d=>{var s=Ke(),w=se(s);st(w,t,"default",{get features(){return a(Z)},get data(){var z;return((z=a(Z))==null?void 0:z[0])??null},get map(){return n()},close:()=>E(!1)},null),q(d,s)}),c(I),Et(I,d=>O(J,d),()=>a(J)),q(l,I)}),q(r,Oe),Se()}var Ye=Uint8Array,qt=Uint16Array,Ra=Int32Array,Ba=new Ye([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),za=new Ye([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),jt=function(r,t){for(var u=new qt(31),e=0;e<31;++e)u[e]=t+=1<<r[e-1];for(var o=new Ra(u[30]),e=1;e<30;++e)for(var n=u[e];n<u[e+1];++n)o[n]=n-u[e]<<5|e;return{b:u,r:o}},Dt=jt(Ba,2),Ha=Dt.b,Za=Dt.r;Ha[28]=258,Za[258]=28;jt(za,0);var Na=new qt(32768);for(L=0;L<32768;++L)xe=(L&43690)>>1|(L&21845)<<1,xe=(xe&52428)>>2|(xe&13107)<<2,xe=(xe&61680)>>4|(xe&3855)<<4,Na[L]=((xe&65280)>>8|(xe&255)<<8)>>1;var xe,L,et=new Ye(288);for(L=0;L<144;++L)et[L]=8;var L;for(L=144;L<256;++L)et[L]=9;var L;for(L=256;L<280;++L)et[L]=7;var L;for(L=280;L<288;++L)et[L]=8;var L,Wa=new Ye(32);for(L=0;L<32;++L)Wa[L]=5;var L,Fa=new Ye(0),Ua=typeof TextDecoder<"u"&&new TextDecoder,Va=0;try{Ua.decode(Fa,{stream:!0}),Va=1}catch{}var Ga=N(", <a> </a>",1),Ka=N('<section id="translations" class="svelte-xd5ukq"></section>'),Ya=N("<dt>Object type</dt> <dd><a> </a></dd>",1),Qa=N(" <!>",1),Xa=N("<dd> </dd>"),Ja=N("<dd> </dd>"),$a=N("<dt>Place of origin</dt> <dd> <a> </a></dd>",1),en=N('<div class="popup"> </div>'),tn=N("<dt>Map</dt> <dd><!></dd>",1),an=N("<p> </p>"),nn=N("<dl><dt>Place</dt> <dd> </dd> <dt>Repository</dt> <dd><a> </a><!></dd> <dt>Autopsy</dt> <dd> </dd> <dt>Map</dt> <dd>TODO: use the geo information in the museums dataset</dd></dl>"),rn=N('<section id="bibliography" class="svelte-xd5ukq"></section>'),on=N('<article><hgroup><h1 class="inscription-title svelte-xd5ukq"> </h1> <p> <a> </a><!></p> <p> <a target="inscription">View in current site</a></p></hgroup> <div class="sections svelte-xd5ukq"><figure id="facsimile-images" class="svelte-xd5ukq"><section id="image-viewer" style="height: 50vh; width: 100%;" class="svelte-xd5ukq"></section> <figcaption class="svelte-xd5ukq"> </figcaption></figure> <section id="edition" class="svelte-xd5ukq"><!></section> <section id="apparatus" class="svelte-xd5ukq"><!></section> <!> <section id="physical-description" class="svelte-xd5ukq"><h2>Physical description</h2> <section class="svelte-xd5ukq"><h3>Support</h3> <dl><dt>Description</dt> <dd> </dd> <!> <dt>Material</dt> <dd><a> </a></dd> <dt>Condition</dt> <dd>TODO: add condition</dd> <dt>Dimensions</dt> <dd></dd></dl></section> <section class="svelte-xd5ukq"><h3>Inscription</h3> <dl><dt>Layout</dt> <dd> </dd> <dt>Text condition</dt> <dd> </dd> <dt>Lettering</dt> <dd> </dd> <dt>Letter heights</dt> <!> <dt>Interlinear heights</dt> <!></dl></section></section> <section id="provenance" class="svelte-xd5ukq"><h2>Provenance</h2> <dl><!> <dt>Provenance found</dt> <dd> </dd> <!></dl></section> <section id="current-location" class="svelte-xd5ukq"><h2>Current location</h2> <!></section> <section id="date" class="svelte-xd5ukq"><h2>Date</h2> <!> <dl><dt>Evidence</dt> <dd> </dd></dl></section> <section id="text-type" class="svelte-xd5ukq"><h2>Text type</h2> <p><a> </a></p></section> <section id="commentary" class="svelte-xd5ukq"><!></section> <!> <section id="citation-and-status" class="svelte-xd5ukq"><h2>Citation and editorial status</h2> <dl><dt>Citation</dt> <dd> </dd></dl></section></div></article>');function _n(r,t){Te(t,!0);let{slug:u,metadata:e,images:o,html:n}=t.data,h=na(oa(o[0].desc));const m=n.divs.find(b=>b.id==="edition"),g=n.divs.find(b=>b.id==="apparatus"),C=n.divs.filter(b=>b.id==="translation"),j=n.divs.find(b=>b.id==="commentary"),T=n.divs.filter(b=>b.id==="bibliography");let R=o.map(b=>`${ua}${u}/${b.url}/info.json`),U;It(async()=>{U=(await Ft(async()=>{const{default:_}=await import("../chunks/openseadragon.D2bpRMoO.js").then(x=>x.o);return{default:_}},__vite__mapDeps([0,1,2,3,4]),import.meta.url)).default,U({id:"image-viewer",prefixUrl:`${la}/openseadragon/images/`,tileSources:R,sequenceMode:!0,showReferenceStrip:!0,preserveViewport:!0}).addHandler("page",function(_){const x=o[_.page];O(h,`${x.surfaceType}, ${x.desc}`)})});var M=on(),V=v(M),W=v(V),pe=v(W);c(W);var fe=f(W,2),X=v(fe),ee=f(X),G=v(ee,!0);c(ee);var ue=f(ee);$(ue,()=>e.objectType,b=>{var _=Ga(),x=f(se(_)),A=v(x,!0);c(x),ie(()=>{Me(x,"href",e.objectType.ref),P(A,e.objectType._)}),q(b,_)}),c(fe);var E=f(fe,2),k=v(E),te=f(k);c(E),c(V);var he=f(V,2),ae=v(he),_e=f(v(ae),2),ye=v(_e,!0);c(_e),c(ae);var Ce=f(ae,2),Ne=v(Ce);Ge(Ne,()=>m.html),c(Ce);var y=f(Ce,2),we=v(y);Ge(we,()=>g.html),c(y);var K=f(y,2);$(K,()=>C.length,b=>{var _=Ka();Ue(_,21,()=>C,Ve,(x,A)=>{var B=Ke(),Q=se(B);Ge(Q,()=>a(A).html),q(x,B)}),c(_),q(b,_)});var Ee=f(K,2),ne=f(v(Ee),2),Z=f(v(ne),2),F=f(v(Z),2),De=v(F,!0);c(F);var D=f(F,2);$(D,()=>e.objectType,b=>{var _=Ya(),x=f(se(_),2),A=v(x),B=v(A,!0);c(A),c(x),ie(()=>{Me(A,"href",e.objectType.ref),P(B,e.objectType._)}),q(b,_)});var Y=f(D,4),de=v(Y),ve=v(de,!0);c(de),c(Y);var Le=f(Y,8);Ue(Le,21,()=>e.dimensions,Ve,(b,_,x)=>{Ot();var A=Qa(),B=se(A),Q=f(B);$(Q,()=>x<e.dimensions.length-1,$e=>{var Fe=kt(",Â ");q($e,Fe)}),ie(()=>P(B,`${a(_).dimension??""}: ${a(_)._??""}
							${a(_).unit??""}`)),q(b,A)}),c(Le),c(Z),c(ne);var me=f(ne,2),re=f(v(me),2),ge=f(v(re),2),J=v(ge,!0);c(ge);var Oe=f(ge,4),Ie=v(Oe,!0);c(Oe);var l=f(Oe,4),I=v(l,!0);c(l);var be=f(l,4);Ue(be,17,()=>e.handNote.dimensions.filter(b=>b.type==="letterHeight"),Ve,(b,_)=>{var x=Xa(),A=v(x);c(x),ie(()=>P(A,`${a(_).l??""}: ${a(_).h??""}${a(_).unit??""}`)),q(b,x)});var d=f(be,4);Ue(d,17,()=>e.handNote.dimensions.filter(b=>b.type==="interlinear"),Ve,(b,_)=>{var x=Ja(),A=v(x);c(x),ie(()=>P(A,`${a(_).l??""}: ${a(_).h??""}${(a(_).h!=="not measured"?a(_).unit:"")??""}`)),q(b,x)}),c(re),c(me),c(Ee);var s=f(Ee,2),w=f(v(s),2),z=v(w);$(z,()=>e.places.length,b=>{var _=$a(),x=f(se(_),2),A=v(x),B=f(A),Q=v(B,!0);c(B),c(x),ie(()=>{P(A,`${(e.places[0].offset||"")??""} `),Me(B,"href",e.places[0].ref),P(Q,e.places[0]._)}),q(b,_)});var oe=f(z,4),Qe=v(oe,!0);c(oe);var Xe=f(oe,2);$(Xe,()=>e.provenanceFound.geo,b=>{var _=tn();const x=ra(()=>[e.provenanceFound.geo[1],e.provenanceFound.geo[0]]);var A=f(se(_),2),B=v(A);qa(B,{get center(){return a(x)},zoom:7,class:"map",standardControls:!0,style:"https://api.maptiler.com/maps/positron/style.json?key=brTBbnRxuiKp6PgjwFPr",children:(Q,$e)=>{ka(Q,{get lngLat(){return a(x)},children:(Fe,rt)=>{Da(Fe,{offset:[0,-10],children:(ot,yt)=>{var Be=en(),Zt=v(Be,!0);c(Be),ie(()=>P(Zt,e.provenanceFound._)),q(ot,Be)},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}}),c(A),q(b,_)}),c(w),c(s);var Re=f(s,2),Je=f(v(Re),2);$(Je,()=>e.provenanceLost,b=>{var _=an(),x=v(_,!0);c(_),ie(()=>P(x,e.provenanceLost._)),q(b,_)},b=>{var _=nn(),x=f(v(_),2),A=v(x);c(x);var B=f(x,4),Q=v(B),$e=v(Q,!0);c(Q);var Fe=f(Q);$(Fe,()=>e.idno,yt=>{var Be=kt();ie(()=>P(Be,`,
							${e.idno._??""}`)),q(yt,Be)}),c(B);var rt=f(B,4),ot=v(rt,!0);c(rt),Ot(4),c(_),ie(()=>{P(A,`${e.settlement??""}, ${e.country??""}`),Me(Q,"href",e.repository.ref),P($e,e.repository._),P(ot,e.provenanceObserved._)}),q(b,_)}),c(Re);var We=f(Re,2),ft=f(v(We),2);fa(ft,{inscription:e});var ut=f(ft,2),vt=f(v(ut),2),Rt=v(vt,!0);c(vt),c(ut),c(We);var tt=f(We,2),mt=f(v(tt),2),at=v(mt),Bt=v(at,!0);c(at),c(mt),c(tt);var nt=f(tt,2),zt=v(nt);Ge(zt,()=>j.html),c(nt);var gt=f(nt,2);$(gt,()=>T.length,b=>{var _=rn();Ue(_,21,()=>T,Ve,(x,A)=>{var B=Ke(),Q=se(B);Ge(Q,()=>a(A).html),q(x,B)}),c(_),q(b,_)});var pt=f(gt,2),ht=f(v(pt),2),_t=f(v(ht),2),Ht=v(_t,!0);c(_t),c(ht),c(pt),c(he),c(M),ie(()=>{P(pe,`${e.file??""}: ${e.title??""}`),P(X,`${e.textLang._??""}, `),Me(ee,"href",e.type.ref),P(G,e.type._),P(k,`${e.status??""}, `),Me(te,"href",`${va}inscription/${u??""}`),P(ye,a(h)),P(De,e.support),Me(de,"href",e.material.ref),P(ve,e.material._),P(J,e.layoutDesc.layout.p),P(Ie,e.layoutDesc.layout.damage||ma),P(I,e.handNote.lettering),P(Qe,e.provenanceFound._),P(Rt,e.evidence),Me(at,"href",e.type.ref),P(Bt,e.type._),P(Ht,e.citation)}),q(r,M),Se()}export{_n as component};
