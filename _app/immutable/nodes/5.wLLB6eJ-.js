const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["../chunks/openseadragon.CULnMEEs.js","../chunks/maplibre-gl.BlcabGBl.js","../chunks/runtime.BQotSvAO.js","../chunks/disclose-version.CNJLWmUd.js","../chunks/store.D90-691m.js","../chunks/utils.B5sIsHFd.js","../assets/maplibre-gl.CuCRB34y.css"])))=>i.map(i=>d[i]);
var ha=Object.defineProperty;var ba=(i,t,g)=>t in i?ha(i,t,{enumerable:!0,configurable:!0,writable:!0,value:g}):i[t]=g;var Ht=(i,t,g)=>ba(i,typeof t!="symbol"?t+"":t,g);import{_ as qa}from"../chunks/preload-helper.C1FmrZbK.js";import{d as Ft,f as xa,c as be,a as q,b as Je,t as O}from"../chunks/disclose-version.CNJLWmUd.js";import{B as Ca,F as Ut,P as Zt,C as wa,G as Nt,au as ka,ay as La,aw as Oa,O as Ma,K as Ea,D as Pa,z as Z,q as qe,w as d,x as r,t as A,y as v,v as xe,g as a,k as rt,aE as Sa,aF as Qt,aG as B,aH as Ze,j as x,aI as N,s as E,aJ as Ta,aK as $t,I as bt,n as Wt}from"../chunks/runtime.BQotSvAO.js";import{a as C,s as Ne,f as je,b as le,g as Ia}from"../chunks/store.D90-691m.js";import{l as Da,s as Aa,i as j,p as f,b as ea,a as it,c as Ra}from"../chunks/props.7sWcRfGm.js";import{b as st,s as se,d as ja,f as Ba,e as Fe,B as za,i as Ue}from"../chunks/button.CvhBnWU8.js";import{c as Ct,a as Xe,o as ta}from"../chunks/index-client.BkwQQHTV.js";import{w as Me,r as qt,b as Ha}from"../chunks/paths.B_OtGc8d.js";import{m as ve,s as Fa,t as Ua,I as Za}from"../chunks/maplibre-gl.BlcabGBl.js";import{I as Na,d as xt,i as Wa,m as Gt,E as fe,p as Ga}from"../chunks/Icon.DJcKd53H.js";import"../chunks/legacy.D7Z1dIIn.js";import{i as We}from"../chunks/lifecycle.BUkS9xIk.js";function at(i,t,g,e,n){var o=i,b="",c;Ca(()=>{if(b===(b=t()??"")){Ut&&Zt();return}c!==void 0&&(Pa(c),c=void 0),b!==""&&(c=wa(()=>{if(Ut){Nt.data;for(var s=Zt(),h=s;s!==null&&(s.nodeType!==8||s.data!=="");)h=s,s=ka(s);if(s===null)throw La(),Oa;Ft(Nt,h),o=Ma(s);return}var L=b+"",w=xa(L);Ft(Ea(w),w.lastChild),o.before(w)}))})}function Va(i,t){const g=Da(t,["children","$$slots","$$events","$$legacy"]);Na(i,Aa({name:"external-link"},()=>g,{iconNode:[["path",{d:"M15 3h6v6"}],["path",{d:"M10 14 21 3"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"}]],children:(n,o)=>{var b=be(),c=Z(b);st(c,t,"default",{},null),q(n,b)},$$slots:{default:!0}}))}var Ka=O("<!><!>",1),Ya=O("<span> </span>"),Ja=O("<span> </span>"),Xa=O("at <a> </a>",1),Qa=O("at <span> </span>",1),$a=O("<a>Zotero</a>"),er=O("<a>FAIR</a>"),tr=O("<!> <!> <!> <!>",1);function ar(i,t){qe(t,!0);var g=tr(),e=Z(g);j(e,()=>t.entry.citation,c=>{var s=Ka(),h=Z(s);at(h,()=>t.entry.citation);var L=v(h);j(L,()=>t.entry.citedRange,w=>{var P=Je(",");q(w,P)},w=>{var P=Je(".");q(w,P)}),q(c,s)},c=>{var s=be(),h=Z(s);j(h,()=>t.entry.type==="bulletin"||t.entry.type==="corpus",L=>{var w=Ya(),P=d(w);r(w),A(()=>C(P,`${t.entry.n??""} ${(t.entry.author?`${t.entry.author} (${t.entry.date})`:"")??""}`)),q(L,w)},L=>{var w=Ja(),P=d(w);r(w),A(()=>C(P,`${t.entry.author??""} (${t.entry.date??""})`)),q(L,w)},!0),q(c,s)});var n=v(e,2);j(n,()=>{var c;return typeof t.entry.citedRange=="object"&&((c=t.entry.citedRange)==null?void 0:c.ref)},c=>{var s=Xa(),h=v(Z(s)),L=d(h,!0);r(h),A(()=>{se(h,"href",t.entry.citedRange.ref.target),C(L,t.entry.citedRange.ref._)}),q(c,s)},c=>{var s=be(),h=Z(s);j(h,()=>t.entry.citedRange,L=>{var w=Qa(),P=v(Z(w)),W=d(P,!0);r(P),A(()=>C(W,t.entry.citedRange)),q(L,w)},null,!0),q(c,s)});var o=v(n,2);j(o,()=>{var c;return(c=t.entry.ptr)==null?void 0:c.target},c=>{var s=$a();A(()=>{var h;return se(s,"href",(h=t.entry.ptr)==null?void 0:h.target)}),q(c,s)});var b=v(o,2);j(b,()=>{var c;return(c=t.entry.ref)==null?void 0:c.target},c=>{var s=er();A(()=>se(s,"href",t.entry.ref.target)),q(c,s)}),q(i,g),xe()}var rr=O('<a target="_blank" rel="noopener noreferrer"> </a>');function nr(i,t){qe(t,!0);function g(s){return s.padStart(6,"0")}function e(s,h){if(!h)return"";switch(s){case"DOI":return xt.DOI+h;case"EDR":case"EDH":return xt[s]+g(h);case"URI":return h;default:return xt[s]+h}}const n=rt(()=>e(t.edition.type,t.edition._)),o=rt(()=>t.edition.type==="DOI"?`DOI: ${t.edition._} (${t.edition.when})`:`${t.edition.type}: ${t.edition._}`);var b=be(),c=Z(b);j(c,()=>t.edition._,s=>{var h=rr(),L=d(h,!0);r(h),A(()=>{se(h,"href",a(n)),C(L,a(o))}),q(s,h)},s=>{var h=Je();A(()=>C(h,`${t.edition.type??""}: -`)),q(s,h)}),q(i,b),xe()}const wt=Symbol.for("svelte-maplibre");function Qe(){return Sa(wt)}function or(i){let t=new WeakMap;return g=>{var b;let e=t.get(g.originalEvent);if(e!==void 0)return e;let o=(b=g.target.queryRenderedFeatures(g.point).find(c=>{var s;return(s=i.get(c.layer.id))==null?void 0:s.interactive}))==null?void 0:b.layer.id;return t.set(g.originalEvent,o),o}}function ir(){let i=new Map;return Qt(wt,{map:Me(null),source:qt(null),layer:qt(null),popupTarget:qt(null),cluster:Me(),loadedImages:Me(new Set),minzoom:Me(0),maxzoom:Me(24),layerEvent:Me(null),layerInfo:i,eventTopMost:or(i),markerClickManager:new cr})}function Vt(i){return{subscribe:i.subscribe}}function sr({key:i,setPopupTarget:t=!1,setCluster:g=!1,setMouseEvent:e=!1}){let n=Qe(),o=Me(null),b=Vt(o),c={...n,[i]:Vt(o)};if(t&&(c.popupTarget=b),e){let s=Me(null);c.layerEvent=s,n.layerEvent=s}return g&&(c.cluster=Me()),Qt(wt,c),{...n,self:o}}function lr(){return sr({key:"popupTarget",setPopupTarget:!0,setMouseEvent:!0})}function dr(i){return"layerType"in i&&i.layerType==="deckgl"}class cr{constructor(){Ht(this,"_handlers",new Set)}add(t){this._handlers.add(t)}remove(t){this._handlers.delete(t)}handleClick(t){for(const g of this._handlers)g(t)}}var aa=ur;function ur(i){var t,g,e;if(i){if(Array.isArray(i)){for(t=[],g=i.length,e=0;e<g;e++){var n=i[e];n!=null&&t.push(n)}return t}if(typeof i=="object"){t={};var o=Object.keys(i);for(g=o.length,e=0;e<g;e++){var b=o[e],c=i[b];c!=null&&(t[b]=c)}return t}}}function Kt(i,t){qe(t,!1);const g=Ne(),e=()=>le(V,"$marker",g),n=()=>le(I,"$map",g);let o=f(t,"marker",12,void 0),b=f(t,"lngLat",12),c=f(t,"class",8,void 0),s=f(t,"draggable",8,!1),h=f(t,"feature",8,null),L=f(t,"offset",8,void 0),w=f(t,"rotation",8,0),P=f(t,"opacity",8,1);const W=Ct(),{map:I,layerEvent:$,self:V}=lr(),de=()=>G("dragstart"),me=()=>{Ce(),G("drag")},ee=()=>{Ce(),G("dragend")};je(V,new ve.Marker(aa({draggable:s(),rotation:w(),className:c(),offset:L(),opacity:P().toString()})).setLngLat(b()).addTo(n())),o(e()),s()&&(e().on("dragstart",de),e().on("drag",me),e().on("dragend",ee)),Xe(()=>{var M;o(void 0),(M=e())==null||M.remove()});function Ce(){var Q;let M=(Q=e())==null?void 0:Q.getLngLat();M&&(Array.isArray(b())?b([M.lng,M.lat]):b()&&"lon"in b()?b({lon:M.lng,lat:M.lat}):b(M))}function G(M){var Pe,ue;let Q=(Pe=e())==null?void 0:Pe.getLngLat();if(!Q)return;const Ee=[Q.lng,Q.lat];let ne={map:n(),marker:e(),lngLat:Ee,features:[{type:"Feature",properties:((ue=h())==null?void 0:ue.properties)??{},geometry:{type:"Point",coordinates:Ee}}]};je($,{...ne,layerType:"marker",type:M}),W(M,ne)}B(()=>(e(),x(b())),()=>{var M;(M=e())==null||M.setLngLat(b())}),B(()=>(e(),x(L())),()=>{var M;(M=e())==null||M.setOffset(L()??[0,0])}),B(()=>(e(),x(w())),()=>{var M;(M=e())==null||M.setRotation(w())}),B(()=>(e(),x(P())),()=>{var M;(M=e())==null||M.setOpacity(P().toString())}),Ze(),We();var ce=be(),H=Z(ce);st(H,t,"default",{get marker(){return e()}},null),q(i,ce),xe()}function fr(i,t){qe(t,!1);const g=Ne(),e=()=>le(n,"$map",g),{map:n}=Qe();let o=f(t,"position",8,"top-left"),b=f(t,"container",8,void 0),c=N(null);Xe(()=>{var s;(s=e())!=null&&s.loaded()&&a(c)&&e().removeControl(a(c))}),B(()=>(e(),a(c),x(b()),x(o())),()=>{if(e()&&!a(c)){let s;typeof b()=="string"?s=document.querySelector(b())??void 0:s=b(),E(c,new ve.FullscreenControl({container:s})),e().addControl(a(c),o())}}),Ze(),We(),xe()}function vr(i,t){qe(t,!1);const g=Ne(),e=()=>le(n,"$map",g),{map:n}=Qe();let o=f(t,"position",8,"top-left"),b=f(t,"positionOptions",8,void 0),c=f(t,"fitBoundsOptions",8,void 0),s=f(t,"trackUserLocation",8,!1),h=f(t,"showAccuracyCircle",8,!0),L=f(t,"showUserLocation",8,!0),w=f(t,"control",12,null);Xe(()=>{var P;(P=e())!=null&&P.loaded()&&w()&&e().removeControl(w())}),B(()=>(e(),x(w()),x(b()),x(c()),x(s()),x(h()),x(L()),x(o())),()=>{e()&&!w()&&(w(new ve.GeolocateControl({positionOptions:b(),fitBoundsOptions:c(),trackUserLocation:s(),showAccuracyCircle:h(),showUserLocation:L()})),e().addControl(w(),o()))}),Ze(),We(),xe()}function mr(i){let t=i.getCenter(),g=Math.round(i.getZoom()*100)/100,e=Math.ceil((g*Math.LN2+Math.log(512/360/.5))/Math.LN10),n=Math.pow(10,e),o=Math.round(t.lat*n)/n,b=Math.round(t.lng*n)/n,c=`${g}/${o}/${b}`,s=i.getBearing(),h=i.getPitch();return(s||h)&&(c+=`/${Math.round(s*10)/10}`),h&&(c+=`/${Math.round(h)}`),`#${c}`}function gr(i){return i.replace("#","").split("/").map(parseFloat)}var Ye=kt;function kt(i,t){return i===t||i!==i&&t!==t?!0:typeof i!=typeof t||{}.toString.call(i)!={}.toString.call(t)||i!==Object(i)||!i?!1:Array.isArray(i)?Yt(i,t):{}.toString.call(i)=="[object Set]"?Yt(Array.from(i),Array.from(t)):{}.toString.call(i)=="[object Object]"?pr(i,t):_r(i,t)}function _r(i,t){return i.toString()===t.toString()}function Yt(i,t){var g=i.length;if(g!=t.length)return!1;for(var e=0;e<g;e++)if(!kt(i[e],t[e]))return!1;return!0}function pr(i,t){var g=Object.keys(i),e=g.length;if(e!=Object.keys(t).length)return!1;for(var n=0;n<e;n++){var o=g[n];if(!(t.hasOwnProperty(o)&&kt(i[o],t[o])))return!1}return!0}function yr(i,t){qe(t,!1);const g=Ne(),e=()=>le(n,"$map",g),{map:n}=Qe();let o=f(t,"position",8,"top-left"),b=f(t,"showCompass",8,!0),c=f(t,"showZoom",8,!0),s=f(t,"visualizePitch",8,!1),h=N(null);Xe(()=>{var L;(L=e())!=null&&L.loaded()&&a(h)&&e().removeControl(a(h))}),B(()=>(e(),a(h),x(b()),x(c()),x(s()),x(o())),()=>{e()&&!a(h)&&(E(h,new ve.NavigationControl({showCompass:b(),showZoom:c(),visualizePitch:s()})),e().addControl(a(h),o()))}),Ze(),We(),xe()}function hr(i,t){qe(t,!1);const g=Ne(),e=()=>le(n,"$map",g),{map:n}=Qe();let o=f(t,"position",8,"bottom-left"),b=f(t,"maxWidth",8,void 0),c=f(t,"unit",8,"metric"),s=N(null);Xe(()=>{var h;(h=e())!=null&&h.loaded()&&a(s)&&e().removeControl(a(s))}),B(()=>(e(),a(s),x(b()),x(c()),x(o())),()=>{e()&&!a(s)&&(E(s,new ve.ScaleControl({maxWidth:b(),unit:c()})),e().addControl(a(s),o()))}),Ze(),We(),xe()}var br=O("<!> <!> <!> <!>",1),qr=O("<!> <!>",1),xr=O('<div data-testid="map-container"><!></div>');function Jt(i,t){qe(t,!1);const g=Ne(),e=()=>le(ae,"$mapInstance",g),n=()=>le(we,"$loadedImages",g),o=N(),b=N();let c=f(t,"map",12,null),s=f(t,"mapContainer",12,void 0),h=f(t,"class",8,void 0),L=f(t,"style",8),w=f(t,"diffStyleUpdates",8,!1),P=f(t,"center",12,void 0),W=f(t,"zoom",12,void 0),I=f(t,"pitch",12,0),$=f(t,"bearing",12,0),V=f(t,"bounds",12,void 0),de=f(t,"hash",8,!1),me=f(t,"updateHash",8,_=>{window.history.replaceState(window.history.state,"",_)}),ee=f(t,"loaded",12,!1),Ce=f(t,"minZoom",8,0),G=f(t,"maxZoom",8,22),ce=f(t,"minPitch",8,0),H=f(t,"maxPitch",8,60),M=f(t,"renderWorldCopies",8,void 0),Q=f(t,"dragPan",8,void 0),Ee=f(t,"dragRotate",8,void 0),ne=f(t,"pitchWithRotate",8,void 0),Pe=f(t,"antialias",8,void 0),ue=f(t,"zoomOnDoubleClick",8,!0),Se=f(t,"locale",8,void 0),$e=f(t,"interactive",8,!0),k=f(t,"attributionControl",8,!0),ge=f(t,"cooperativeGestures",8,!1),te=f(t,"preserveDrawingBuffer",8,!1),Ge=f(t,"maxBounds",8,void 0),oe=f(t,"images",24,()=>[]),K=f(t,"standardControls",8,!1),Y=f(t,"filterLayers",8,void 0),Te=f(t,"transformRequest",8,void 0);const z=Ct(),{map:ae,loadedImages:we}=ir();let ie=N(new Set);async function Be(_,m=!1){var S;if(e()&&!(!e().loaded()&&!m))if("url"in _){a(ie).add(_.id);try{let U=await e().loadImage(_.url);(S=e())==null||S.addImage(_.id,U.data,_.options),n().add(_.id),je(we,n())}catch(U){z("error",U)}finally{a(ie).delete(_.id)}}else e().addImage(_.id,_.data,_.options),n().add(_.id),je(we,n())}let _e=N(void 0),re=N(void 0),pe=N(void 0),J=N(void 0);function Ve(_){return p(),je(ae,new ve.Map(aa({container:_,style:L(),locale:Se(),center:P(),zoom:W(),pitch:I(),bearing:$(),minZoom:Ce(),maxZoom:G(),minPitch:ce(),maxPitch:H(),renderWorldCopies:M(),dragPan:Q(),dragRotate:Ee(),pitchWithRotate:ne(),antialias:Pe(),interactive:$e(),preserveDrawingBuffer:te(),maxBounds:Ge(),bounds:V(),attributionControl:k(),transformRequest:Te(),cooperativeGestures:ge()}))),e().on("load",m=>{m.target.getContainer().setAttribute("data-testid","map"),m.target.getCanvas().setAttribute("data-testid","map-canvas"),ee(!0),z("load",e())}),e().on("error",m=>z("error",{...m,map:e()})),e().on("movestart",m=>z("movestart",{...m,map:e()})),e().on("moveend",m=>{if(P(m.target.getCenter()),W(m.target.getZoom()),I(m.target.getPitch()),$(m.target.getBearing()),V(m.target.getBounds()),z("moveend",{...m,map:e()}),de()){let S=new URL(window.location.href.replace(/(#.+)?$/,mr(e())));me()(S)}}),e().on("click",m=>z("click",{...m,map:e()})),e().on("dblclick",m=>z("dblclick",{...m,map:e()})),e().on("contextmenu",m=>z("contextmenu",{...m,map:e()})),e().on("zoomstart",m=>z("zoomstart",{...m,map:e()})),e().on("zoom",m=>{z("zoom",{...m,map:e()})}),e().on("zoomend",m=>{z("zoomend",{...m,map:e()})}),e().on("style.load",()=>{if(e()){const m=e().getStyle();if(E(_e,m.layers.map(S=>S.id)),E(re,Object.keys(m.sources)),a(J))for(const[S,U]of Object.entries(a(J)))e().addSource(S,U);if(a(pe))for(const S of a(pe))e().addLayer(S);for(const S of oe())Be(S,!0)}}),e().on("styledata",m=>{if(e()&&Y()){const S=e().getStyle().layers;if(S)for(let U of S)Y()(U)||e().setLayoutProperty(U.id,"visibility","none")}z("styledata",{...m,map:e()})}),{destroy(){var m;ee(!1),(m=e())==null||m.remove(),je(ae,null)}}}let Ie=N(L());function p(){if(de()){let _=gr(window.location.hash);_.length>=3&&(W(_[0]),P([_[2],_[1]])),_.length==5&&($(_[3]),I(_[4]))}}B(()=>x(K()),()=>{E(o,typeof K()=="boolean"?void 0:K())}),B(()=>e(),()=>{c(e())}),B(()=>(e(),x(L()),a(Ie),a(_e),a(re),x(w())),()=>{if(e()&&!Ye(L(),a(Ie))){const _=e().getStyle();if(a(_e)&&E(pe,_.layers.filter(m=>!a(_e).includes(m.id))),a(re)){const m=Object.keys(_.sources).filter(S=>!a(re).includes(S));E(J,{});for(const S of m)$t(J,a(J)[S]=_.sources[S])}E(Ie,L()),e().setStyle(L(),{diff:w()}),je(we,new Set),E(ie,new Set)}}),B(()=>(x(ee()),e(),x(oe()),n(),a(ie)),()=>{var _;if(ee()&&((_=e())!=null&&_.loaded()))for(let m of oe())!n().has(m.id)&&!a(ie).has(m.id)&&!e().hasImage(m.id)&&Be(m)}),B(()=>(x(oe()),n()),()=>{E(b,oe().every(_=>n().has(_.id)))}),B(()=>(e(),x(P()),x(W()),x($()),x(I())),()=>{var _,m,S,U;if(e()){let ye={};P()!=null&&!Ye(P(),(_=e())==null?void 0:_.getCenter())&&(ye.center=P()),W()!=null&&!Ye(W(),(m=e())==null?void 0:m.getZoom())&&(ye.zoom=W()),$()!=null&&!Ye($(),(S=e())==null?void 0:S.getBearing())&&(ye.bearing=$()),I()!=null&&!Ye(I(),(U=e())==null?void 0:U.getPitch())&&(ye.pitch=I()),Object.keys(ye).length&&e().easeTo(ye)}}),B(()=>(x(V()),e()),()=>{var _,m;V()&&!Ye(V(),(_=e())==null?void 0:_.getBounds())&&((m=e())==null||m.fitBounds(V()))}),B(()=>(x(ue()),e()),()=>{var _,m;ue()?(_=e())==null||_.doubleClickZoom.enable():(m=e())==null||m.doubleClickZoom.disable()}),Ze(),We();var R=xr();Ia("hashchange",Ta,p);var De=d(R);j(De,()=>e()&&ee(),_=>{var m=qr(),S=Z(m);j(S,K,ye=>{var et=br(),Ke=Z(et);yr(Ke,{get position(){return a(o)}});var ot=v(Ke,2);vr(ot,{get position(){return a(o)},fitBoundsOptions:{maxZoom:12}});var tt=v(ot,2);fr(tt,{get position(){return a(o)}});var dt=v(tt,2);hr(dt,{get position(){return a(o)}}),q(ye,et)});var U=v(S,2);st(U,t,"default",{get map(){return e()},get loadedImages(){return n()},get allImagesLoaded(){return a(b)}},null),q(_,m)}),r(R),ea(R,_=>s(_),()=>s()),ja(R,_=>Ve(_)),A(()=>{Fa(R,`${h()??""} svelte-p00lfq`),Ua(R,"expand-map",!h())}),q(i,R),xe()}var Cr=O("<div><!></div>");function Xt(i,t){const g=Ba(t);qe(t,!1);const e=Ne(),n=()=>le(Ee,"$popupTarget",e),o=()=>le(Q,"$map",e),b=()=>le(Pe,"$layer",e),c=()=>le(ne,"$layerEvent",e),s=N(),h=N();let L=f(t,"closeButton",8,void 0),w=f(t,"closeOnClickOutside",8,!0),P=f(t,"closeOnClickInside",8,!1),W=f(t,"closeOnMove",8,!1),I=f(t,"openOn",8,"click"),$=f(t,"openIfTopMost",8,!0),V=f(t,"focusAfterOpen",8,!0),de=f(t,"anchor",8,void 0),me=f(t,"offset",8,void 0),ee=f(t,"popupClass",8,void 0),Ce=f(t,"maxWidth",8,void 0),G=f(t,"lngLat",12,void 0),ce=f(t,"html",8,void 0),H=f(t,"open",12,!1);const M=Ct(),{map:Q,popupTarget:Ee,layerEvent:ne,layer:Pe,eventTopMost:ue,markerClickManager:Se}=Qe(),$e=["click","dblclick","contextmenu"];let k=N(),ge=N(!1),te=N();function Ge(){if(!a(k))return;let p=a(k).getElement();!p||p===a(te)||(E(te,p),I()==="hover"&&$t(te,a(te).style.pointerEvents="none"),a(te).addEventListener("mouseenter",()=>{E(ge,!0)},{passive:!0}),a(te).addEventListener("mouseleave",()=>{E(ge,!1)},{passive:!0}),a(te).addEventListener("click",()=>{P()&&H(!1)},{passive:!0}))}ta(()=>{if(o())return o().on("click",re),o().on("contextmenu",re),Se.add(pe),typeof n()=="string"&&(o().on("click",n(),z),o().on("dblclick",n(),z),o().on("contextmenu",n(),z),o().on("mousemove",n(),_e),o().on("mouseleave",n(),Be),o().on("touchstart",n(),we),o().on("touchend",n(),ie)),()=>{var p,R;(p=o())!=null&&p.loaded()&&((R=a(k))==null||R.remove(),o().off("click",re),o().off("contextmenu",re),Se.remove(pe),n()instanceof ve.Marker?n().getPopup()===a(k)&&n().setPopup(void 0):typeof n()=="string"&&(o().off("click",n(),z),o().off("dblclick",n(),z),o().off("contextmenu",n(),z),o().off("mousemove",n(),_e),o().off("mouseleave",n(),Be),o().off("touchstart",n(),we),o().off("touchend",n(),ie)))}});function oe(p){return $()?!("marker"in p)&&!dr(p)&&ue(p)!==b():!1}let K=N(null),Y=N("normal");function Te(p){"layerType"in p&&p.layerType==="deckgl"?(G(p.coordinate),E(K,p.object?[p.object]:null)):(G(p.lngLat),E(K,p.features??[]))}function z(p){p.type!==I()||oe(p)||(Te(p),setTimeout(()=>H(!0)))}let ae=null;function we(p){ae=p.point}function ie(p){if(!ae||I()!=="hover")return;let R=ae.dist(p.point);ae=null,R<3&&(G(p.lngLat),E(K,p.features??[]),a(k).isOpen()?E(Y,"justOpened"):(E(Y,"opening"),H(!0)))}function Be(p){I()!=="hover"||ae||a(Y)!=="normal"||(H(!1),E(K,null))}function _e(p){if(!(I()!=="hover"||ae||a(Y)!=="normal")){if(oe(p)){H(!1),E(K,null);return}H(!0),E(K,p.features??[]),G(p.lngLat)}}function re(p){var De;if(a(Y)==="justOpened"){E(Y,"normal");return}if(!w())return;let R=[a(te),n()instanceof ve.Marker?(De=n())==null?void 0:De.getElement():null];H()&&a(k).isOpen()&&!R.some(_=>_==null?void 0:_.contains(p.originalEvent.target))&&(p.type==="contextmenu"&&I()==="contextmenu"||p.type!=="contextmenu")&&H(!1)}function pe(p){w()&&H()&&a(k).isOpen()&&p.marker!==n()&&H(!1)}Xe(()=>{var p;o()&&((p=a(k))!=null&&p.isOpen())&&a(k).remove()});let J=N();B(()=>(x(L()),x(w()),x(P())),()=>{E(s,L()??(!w()&&!P()))}),B(()=>(a(k),a(s),x(W()),x(V()),x(Ce()),x(ee()),x(de()),x(me())),()=>{a(k)||(E(k,new ve.Popup({closeButton:a(s),closeOnClick:!1,closeOnMove:W(),focusAfterOpen:V(),maxWidth:Ce(),className:ee(),anchor:de(),offset:me()})),E(te,a(k).getElement()),a(k).on("open",()=>{H(!0),Ge(),M("open",a(k))}),a(k).on("close",()=>{H(!1),M("close",a(k))}),a(k).on("hover",()=>{M("hover",a(k))}))}),B(()=>(a(k),n(),x(I())),()=>{a(k)&&n()instanceof ve.Marker&&(I()==="click"?n().setPopup(a(k)):n().getPopup()===a(k)&&n().setPopup(void 0))}),B(()=>(x(I()),c()),()=>{var p;$e.includes(I())&&((p=c())==null?void 0:p.type)===I()&&(z(c()),je(ne,null))}),B(()=>(x(I()),c()),()=>{var p,R;E(h,I()==="hover"&&(((p=c())==null?void 0:p.type)==="mousemove"||((R=c())==null?void 0:R.type)==="mouseenter"))}),B(()=>(x(I()),a(h),c(),a(ge)),()=>{I()==="hover"&&ne&&(a(h)&&c()&&Te(c()),H((a(h)||a(ge))??!1))}),B(()=>(a(J),a(k),x(ce())),()=>{a(J)?a(k).setDOMContent(a(J)):ce()&&a(k).setHTML(ce())}),B(()=>(x(G()),a(k)),()=>{G()&&a(k).setLngLat(G())}),B(()=>(o(),a(k),x(H()),a(Y)),()=>{if(o()){let p=a(k).isOpen();H()&&!p?(a(k).addTo(o()),a(Y)==="opening"&&E(Y,"justOpened")):!H()&&p&&a(k).remove()}}),Ze(),We();var Ve=be(),Ie=Z(Ve);j(Ie,()=>g.default,p=>{var R=Cr(),De=d(R);j(De,()=>{var _;return((_=a(K))==null?void 0:_.length)||n()instanceof ve.Marker},_=>{var m=be(),S=Z(m);st(S,t,"default",{get features(){return a(K)},get data(){var U;return((U=a(K))==null?void 0:U[0])??null},get map(){return o()},close:()=>H(!1)},null),q(_,m)}),r(R),ea(R,_=>E(J,_),()=>a(J)),q(p,R)}),q(i,Ve),xe()}var nt=Uint8Array,ra=Uint16Array,wr=Int32Array,kr=new nt([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Lr=new nt([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),na=function(i,t){for(var g=new ra(31),e=0;e<31;++e)g[e]=t+=1<<i[e-1];for(var n=new wr(g[30]),e=1;e<30;++e)for(var o=g[e];o<g[e+1];++o)n[o]=o-g[e]<<5|e;return{b:g,r:n}},oa=na(kr,2),Or=oa.b,Mr=oa.r;Or[28]=258,Mr[258]=28;na(Lr,0);var Er=new ra(32768);for(T=0;T<32768;++T)Oe=(T&43690)>>1|(T&21845)<<1,Oe=(Oe&52428)>>2|(Oe&13107)<<2,Oe=(Oe&61680)>>4|(Oe&3855)<<4,Er[T]=((Oe&65280)>>8|(Oe&255)<<8)>>1;var Oe,T,lt=new nt(288);for(T=0;T<144;++T)lt[T]=8;var T;for(T=144;T<256;++T)lt[T]=9;var T;for(T=256;T<280;++T)lt[T]=7;var T;for(T=280;T<288;++T)lt[T]=8;var T,Pr=new nt(32);for(T=0;T<32;++T)Pr[T]=5;var T,Sr=new nt(0),Tr=typeof TextDecoder<"u"&&new TextDecoder,Ir=0;try{Tr.decode(Sr,{stream:!0}),Ir=1}catch{}var Dr=O('<dd class="svelte-9qpq8y"><a class="svelte-9qpq8y"> </a></dd>'),Ar=O('<section id="translations" class="svelte-9qpq8y"></section>'),Rr=O("<dd><a> </a></dd>"),jr=O("<dd> </dd>"),Br=O("<dd> </dd>"),zr=O("<dd> </dd>"),Hr=O(" <!>",1),Fr=O("<dd> </dd>"),Ur=O("<dd> </dd>"),Zr=O("<dd> </dd>"),Nr=O("<dd> </dd>"),Wr=O("<dd> <a> </a></dd>"),Gr=O("<dd> </dd>"),Vr=O('<div class="popup"> </div>'),Kr=O("<dt>Map</dt> <dd><!></dd>",1),Yr=O("<p> </p>"),Jr=O('<div class="popup"> </div>'),Xr=O("<dt>Map</dt> <dd><!></dd>",1),Qr=O("<dl><dt>Place</dt> <dd> </dd> <dt>Repository</dt> <dd><a> </a><!></dd> <dt>Autopsy</dt> <dd> </dd> <!></dl>"),$r=O("<li><!></li>"),en=O("<li><!></li>"),tn=O('<dt>Printed editions</dt> <dd><ul class="bibliography-list"></ul></dd>',1),an=O('<article class="svelte-9qpq8y"><section id="overview" class="svelte-9qpq8y"><div class="overview-header svelte-9qpq8y"><h1 class="inscription-title svelte-9qpq8y"> </h1></div> <figure id="facsimile-images" class="svelte-9qpq8y"><section id="image-viewer" style="height: 50vh; width: 100%;"></section> <figcaption class="svelte-9qpq8y"> </figcaption></figure> <dl class="svelte-9qpq8y"><dt class="svelte-9qpq8y">ID</dt> <dd class="svelte-9qpq8y"> </dd> <dt class="svelte-9qpq8y">Language</dt> <dd class="svelte-9qpq8y"> </dd> <dt class="svelte-9qpq8y">Text type</dt> <dd class="svelte-9qpq8y"><a class="svelte-9qpq8y"> </a></dd> <dt class="svelte-9qpq8y">Object type</dt> <!> <dt class="svelte-9qpq8y">Status</dt> <dd class="svelte-9qpq8y"> </dd> <dt class="svelte-9qpq8y">Links</dt> <dd class="svelte-9qpq8y"><a target="inscription" class="svelte-9qpq8y">View in current site <!></a></dd></dl></section> <section id="content" class="svelte-9qpq8y"><section id="edition" class="svelte-9qpq8y"><h2 class="svelte-9qpq8y">Edition</h2> <div class="tabs svelte-9qpq8y"></div> <div class="edition-content svelte-9qpq8y"><!></div></section> <section id="apparatus" class="svelte-9qpq8y"><!></section> <!> <section id="physical-description" class="svelte-9qpq8y"><h2 class="svelte-9qpq8y">Physical description</h2> <h3 class="svelte-9qpq8y">Support</h3> <dl><dt>Description</dt> <dd> </dd> <dt>Object type</dt> <!> <dt>Material</dt> <dd><a> </a></dd> <dt>Condition</dt> <!> <dt>Dimensions</dt> <dd></dd></dl> <h3 class="svelte-9qpq8y">Inscription</h3> <dl><dt>Layout</dt> <dd> </dd> <dt>Text condition</dt> <!> <dt>Lettering</dt> <dd> </dd> <dt>Letter heights</dt> <!> <dt>Interlinear heights</dt> <!></dl></section> <section id="provenance" class="svelte-9qpq8y"><h2 class="svelte-9qpq8y">Provenance</h2> <dl><dt>Place of origin</dt> <!> <dt>Provenance found</dt> <dd> </dd> <!></dl></section> <section id="current-location" class="svelte-9qpq8y"><h2 class="svelte-9qpq8y">Current location</h2> <!></section> <section id="date" class="svelte-9qpq8y"><h2 class="svelte-9qpq8y">Date</h2> <!>) <dl><dt>Evidence</dt> <dd> </dd></dl></section> <section id="text-type" class="svelte-9qpq8y"><h2 class="svelte-9qpq8y">Text type</h2> <p><a> </a></p></section> <section id="commentary" class="svelte-9qpq8y"><!></section> <section id="bibliography" class="svelte-9qpq8y"><h2 class="svelte-9qpq8y">Bibliography</h2> <dl><dt>Digital editions</dt> <dd><ul></ul></dd> <!></dl></section> <section id="citation-and-status" class="svelte-9qpq8y"><h2 class="svelte-9qpq8y">Citation and editorial status</h2> <dl><dt>Citation</dt> <dd> </dd></dl></section></section></article>');function bn(i,t){qe(t,!0);let{slug:g,metadata:e,images:n,html:o}=t.data,b=bt(it(n[0].desc));const c=o.divs.find(u=>u.id==="editions");let s=bt(it([]));const h=o.divs.find(u=>u.id==="apparatus"),L=o.divs.filter(u=>u.id==="translation"),w=o.divs.find(u=>u.id==="commentary");let P=n.map(u=>`${Wa}${g}/${u.url}/info.json`),W,I=bt(0);ta(async()=>{W=(await qa(async()=>{const{default:l}=await import("../chunks/openseadragon.CULnMEEs.js").then(y=>y.o);return{default:l}},__vite__mapDeps([0,1,2,3,4,5,6]),import.meta.url)).default,W({id:"image-viewer",prefixUrl:`${Ha}/openseadragon/images/`,tileSources:P,sequenceMode:!0,showReferenceStrip:!0,preserveViewport:!0}).addHandler("page",function(l){const y=n[l.page];E(b,`${y.surfaceType}, ${y.desc}`)}),c&&(E(s,it($(c.html))),E(I,0))});function $(u){if(typeof window>"u")return[];const y=new DOMParser().parseFromString(u,"text/html");return Array.from(y.querySelectorAll('[id^="edition-"]')).map(F=>({id:F.id,type:F.id.replace("edition-",""),html:F.outerHTML}))}var V=an(),de=d(V),me=d(de),ee=d(me),Ce=d(ee);r(ee),r(me);var G=v(me,2),ce=v(d(G),2),H=d(ce,!0);r(ce),r(G);var M=v(G,2),Q=v(d(M),2),Ee=d(Q,!0);r(Q);var ne=v(Q,4),Pe=d(ne,!0);r(ne);var ue=v(ne,4),Se=d(ue),$e=d(Se,!0);r(Se),r(ue);var k=v(ue,4);j(k,()=>e.objectType,u=>{var l=Dr(),y=d(l),D=d(y,!0);r(y),r(l),A(()=>{se(y,"href",e.objectType.ref),C(D,e.objectType._)}),q(u,l)});var ge=v(k,4),te=d(ge,!0);r(ge);var Ge=v(ge,4),oe=d(Ge),K=v(d(oe));Va(K,{}),r(oe),r(Ge),r(M),r(de);var Y=v(de,2),Te=d(Y),z=v(d(Te),2);Fe(z,21,()=>a(s),Ue,(u,l,y)=>{var D=be(),F=Z(D),X=rt(()=>a(I)===y?"active":"");Ra(F,()=>za,(ke,Le)=>{Le(ke,{get class(){return a(X)},onclick:()=>E(I,it(y)),children:(Ae,Re)=>{Wt();var ze=Je();A(()=>C(ze,a(l).type)),q(Ae,ze)},$$slots:{default:!0}})}),q(u,D)}),r(z);var ae=v(z,2),we=d(ae);at(we,()=>{var u;return((u=a(s)[a(I)])==null?void 0:u.html)||""}),r(ae),r(Te);var ie=v(Te,2),Be=d(ie);at(Be,()=>h.html),r(ie);var _e=v(ie,2);j(_e,()=>L.length,u=>{var l=Ar();Fe(l,21,()=>L,Ue,(y,D)=>{var F=be(),X=Z(F);at(X,()=>a(D).html),q(y,F)}),r(l),q(u,l)});var re=v(_e,2),pe=v(d(re),4),J=v(d(pe),2),Ve=d(J,!0);r(J);var Ie=v(J,4);j(Ie,()=>e.objectType,u=>{var l=Rr(),y=d(l),D=d(y,!0);r(y),r(l),A(()=>{se(y,"href",e.objectType.ref),C(D,e.objectType._)}),q(u,l)},u=>{var l=jr(),y=d(l,!0);r(l),A(()=>C(y,fe)),q(u,l)});var p=v(Ie,4),R=d(p),De=d(R,!0);r(R),r(p);var _=v(p,4);j(_,()=>{var u;return(u=e.condition)==null?void 0:u.ana},u=>{var l=Br(),y=d(l,!0);A(()=>C(y,e.condition.ana.split(".").slice(1).join(", "))),r(l),q(u,l)},u=>{var l=zr(),y=d(l,!0);r(l),A(()=>C(y,e.condition._||fe)),q(u,l)});var m=v(_,4);Fe(m,21,()=>e.dimensions,Ue,(u,l,y)=>{Wt();var D=Hr(),F=Z(D),X=v(F);j(X,()=>y<e.dimensions.length-1,ke=>{var Le=Je(",Â ");q(ke,Le)}),A(()=>C(F,`${a(l).dimension??""}: ${a(l)._??""}
						${a(l).unit??""}`)),q(u,D)}),r(m),r(pe);var S=v(pe,4),U=v(d(S),2),ye=d(U,!0);r(U);var et=v(U,4);j(et,()=>e.layoutDesc.layout.damage.ana,u=>{var l=Fr(),y=d(l,!0);A(()=>C(y,e.layoutDesc.layout.damage.ana.split(".").slice(1).join(", "))),r(l),q(u,l)},u=>{var l=Ur(),y=d(l,!0);r(l),A(()=>C(y,e.layoutDesc.layout.damage._||fe)),q(u,l)});var Ke=v(et,4),ot=d(Ke,!0);r(Ke);var tt=v(Ke,4);Fe(tt,17,()=>e.handNote.dimensions.filter(u=>(u==null?void 0:u.type)==="letterHeight"),Ue,(u,l)=>{var y=Zr(),D=d(y);r(y),A(()=>C(D,`${a(l).l??""}: ${a(l).h??""}${a(l).unit??""}`)),q(u,y)});var dt=v(tt,4);Fe(dt,17,()=>e.handNote.dimensions.filter(u=>(u==null?void 0:u.type)==="interlinear"),Ue,(u,l)=>{var y=Nr(),D=d(y);r(y),A(()=>C(D,`${a(l).l??""}: ${a(l).h??""}${(a(l).h!=="not measured"?a(l).unit:"")??""}`)),q(u,y)}),r(S),r(re);var ct=v(re,2),Lt=v(d(ct),2),Ot=v(d(Lt),2);j(Ot,()=>e.places.length,u=>{var l=Wr(),y=d(l),D=v(y),F=d(D,!0);r(D),r(l),A(()=>{C(y,`${(e.places[0].offset||"")??""} `),se(D,"href",e.places[0].ref),C(F,e.places[0]._)}),q(u,l)},u=>{var l=Gr(),y=d(l,!0);r(l),A(()=>C(y,fe)),q(u,l)});var ut=v(Ot,4),ia=d(ut,!0);r(ut);var sa=v(ut,2);j(sa,()=>{var u;return(u=e.provenanceFound)==null?void 0:u.geo},u=>{var l=Kr();const y=rt(()=>[e.provenanceFound.geo[1],e.provenanceFound.geo[0]]);var D=v(Z(l),2),F=d(D);Jt(F,{get center(){return a(y)},zoom:7,class:"map",standardControls:!0,get style(){return Gt},children:(X,ke)=>{Kt(X,{get lngLat(){return a(y)},children:(Le,Ae)=>{Xt(Le,{offset:[0,-10],children:(Re,ze)=>{var he=Vr(),He=d(he,!0);r(he),A(()=>C(He,e.provenanceFound._)),q(Re,he)},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}}),r(D),q(u,l)}),r(Lt),r(ct);var ft=v(ct,2),la=v(d(ft),2);j(la,()=>e.provenanceLost,u=>{var l=Yr(),y=d(l,!0);r(l),A(()=>C(y,e.provenanceLost._)),q(u,l)},u=>{var l=Qr(),y=v(d(l),2),D=d(y);r(y);var F=v(y,4),X=d(F),ke=d(X,!0);r(X);var Le=v(X);j(Le,()=>e.idno,he=>{var He=Je();A(()=>C(He,`,
							${e.idno._??""}`)),q(he,He)}),r(F);var Ae=v(F,4),Re=d(Ae,!0);r(Ae);var ze=v(Ae,2);j(ze,()=>e.repository.museum.location.geo,he=>{var He=Xr();const Bt=rt(()=>[e.repository.museum.location.geo.lon,e.repository.museum.location.geo.lat]);var zt=v(Z(He),2),ma=d(zt);Jt(ma,{get center(){return a(Bt)},zoom:7,class:"map",standardControls:!0,get style(){return Gt},children:(ga,rn)=>{Kt(ga,{get lngLat(){return a(Bt)},children:(_a,nn)=>{Xt(_a,{offset:[0,-10],children:(pa,on)=>{var ht=Jr(),ya=d(ht,!0);r(ht),A(()=>C(ya,e.repository.museum.name)),q(pa,ht)},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}}),r(zt),q(he,He)}),r(l),A(()=>{var he;C(D,`${e.settlement??""}, ${e.country??""}`),se(X,"href",e.repository.ref),C(ke,e.repository._),C(Re,((he=e.provenanceObserved)==null?void 0:he._)||fe)}),q(u,l)}),r(ft);var vt=v(ft,2),Mt=v(d(vt)),Et=v(Mt);Za(Et,{get date(){return e.date}});var Pt=v(Et,2),St=v(d(Pt),2),da=d(St,!0);r(St),r(Pt),r(vt);var mt=v(vt,2),Tt=v(d(mt),2),gt=d(Tt),ca=d(gt,!0);r(gt),r(Tt),r(mt);var _t=v(mt,2),ua=d(_t);at(ua,()=>w.html),r(_t);var pt=v(_t,2),It=v(d(pt),2),yt=v(d(It),2),Dt=d(yt);Fe(Dt,21,()=>e.editions,Ue,(u,l)=>{var y=$r(),D=d(y);nr(D,{get edition(){return a(l)}}),r(y),q(u,y)}),r(Dt),r(yt);var fa=v(yt,2);j(fa,()=>{var u,l;return(l=(u=e.bibliographyEdition)==null?void 0:u.bibl)==null?void 0:l.length},u=>{var l=tn(),y=v(Z(l),2),D=d(y);Fe(D,21,()=>e.bibliographyEdition.bibl,Ue,(F,X)=>{var ke=be(),Le=Z(ke);j(Le,()=>a(X),Ae=>{var Re=en(),ze=d(Re);ar(ze,{get entry(){return a(X)}}),r(Re),q(Ae,Re)}),q(F,ke)}),r(D),r(y),q(u,l)}),r(It),r(pt);var At=v(pt,2),Rt=v(d(At),2),jt=v(d(Rt),2),va=d(jt,!0);r(jt),r(Rt),r(At),r(Y),r(V),A(()=>{var u;C(Ce,`${e.file??""}: ${e.title??""}`),C(H,a(b)),C(Ee,e.file),C(Pe,e.textLang._),se(Se,"href",e.type.ref),C($e,e.type._),C(te,e.status),se(oe,"href",`${Ga}inscription/${g??""}`),C(Ve,e.support||fe),se(R,"href",e.material.ref),C(De,e.material._),C(ye,e.layoutDesc.layout.p||fe),C(ot,e.handNote.lettering||fe),C(ia,((u=e.provenanceFound)==null?void 0:u._)||fe),C(Mt,` ${e.date._??""} (`),C(da,e.date.evidence||fe),se(gt,"href",e.type.ref),C(ca,e.type._),C(va,e.citation||fe)}),q(i,V),xe()}export{bn as component};
