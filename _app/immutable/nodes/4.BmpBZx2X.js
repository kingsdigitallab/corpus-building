const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["../chunks/openseadragon.D2bpRMoO.js","../chunks/maplibre-gl.BKqjIULy.js","../chunks/utils.CgqR5BiE.js","../chunks/disclose-version.BwBVlfMN.js","../assets/maplibre-gl.CuCRB34y.css"])))=>i.map(i=>d[i]);
var Wt=Object.defineProperty;var Ft=(r,t,g)=>t in r?Wt(r,t,{enumerable:!0,configurable:!0,writable:!0,value:g}):r[t]=g;var bt=(r,t,g)=>Ft(r,typeof t!="symbol"?t+"":t,g);import{_ as Ut}from"../chunks/preload-helper.C1FmrZbK.js";import{q as kt,r as Vt,s as Ae,v as Se,d as Qe,a as M,c as se,w as Gt,t as R,e as Ct,b as w}from"../chunks/disclose-version.BwBVlfMN.js";import{h as Kt,k as wt,m as Lt,j as Yt,q as Ot,a8 as Qt,aI as Xt,aH as Jt,O as $t,a2 as ea,a1 as ta,aL as aa,aM as Tt,p as Te,aN as E,aO as je,f as ge,d as Ee,C as y,g as a,aP as H,v as P,aQ as na,e as v,s as m,r as c,t as Z,aR as Et,K as ra,n as Mt,D as oa}from"../chunks/utils.CgqR5BiE.js";import{p as i,i as Q,b as It,a as ia}from"../chunks/props.IFVwysL6.js";import{s as dt,c as sa,d as la,e as Ge,i as Ke,b as Pe}from"../chunks/attributes.Bxrms_db.js";import{c as ct,a as Ze,o as At}from"../chunks/index-client.Cj9I2f6z.js";import{w as Ce,r as lt,b as da}from"../chunks/paths.Czt0Jqm8.js";import{m as ce,s as ca,t as ua,I as fa}from"../chunks/maplibre-gl.BKqjIULy.js";import{i as va,E as de,p as ma}from"../chunks/config.gZhyNOq-.js";import{i as qe}from"../chunks/legacy.DeTa_azy.js";function Ye(r,t,g,e,o){var n=r,x="",p;Kt(()=>{if(x===(x=t()??"")){wt&&Lt();return}p!==void 0&&(ta(p),p=void 0),x!==""&&(p=Yt(()=>{if(wt){Ot.data;for(var h=Lt(),C=h;h!==null&&(h.nodeType!==8||h.data!=="");)C=h,h=Qt(h);if(h===null)throw Xt(),Jt;kt(Ot,C),n=$t(h);return}var j=x+"",T=Vt(j);kt(ea(T),T.lastChild),n.before(T)}))})}const ut=Symbol.for("svelte-maplibre");function Ne(){return aa(ut)}function ga(r){let t=new WeakMap;return g=>{var x;let e=t.get(g.originalEvent);if(e!==void 0)return e;let n=(x=g.target.queryRenderedFeatures(g.point).find(p=>{var h;return(h=r.get(p.layer.id))==null?void 0:h.interactive}))==null?void 0:x.layer.id;return t.set(g.originalEvent,n),n}}function pa(){let r=new Map;return Tt(ut,{map:Ce(null),source:lt(null),layer:lt(null),popupTarget:lt(null),cluster:Ce(),loadedImages:Ce(new Set),minzoom:Ce(0),maxzoom:Ce(24),layerEvent:Ce(null),layerInfo:r,eventTopMost:ga(r),markerClickManager:new xa})}function Pt(r){return{subscribe:r.subscribe}}function ha({key:r,setPopupTarget:t=!1,setCluster:g=!1,setMouseEvent:e=!1}){let o=Ne(),n=Ce(null),x=Pt(n),p={...o,[r]:Pt(n)};if(t&&(p.popupTarget=x),e){let h=Ce(null);p.layerEvent=h,o.layerEvent=h}return g&&(p.cluster=Ce()),Tt(ut,p),{...o,self:n}}function _a(){return ha({key:"popupTarget",setPopupTarget:!0,setMouseEvent:!0})}function ya(r){return"layerType"in r&&r.layerType==="deckgl"}class xa{constructor(){bt(this,"_handlers",new Set)}add(t){this._handlers.add(t)}remove(t){this._handlers.delete(t)}handleClick(t){for(const g of this._handlers)g(t)}}var jt=ba;function ba(r){var t,g,e;if(r){if(Array.isArray(r)){for(t=[],g=r.length,e=0;e<g;e++){var o=r[e];o!=null&&t.push(o)}return t}if(typeof r=="object"){t={};var n=Object.keys(r);for(g=n.length,e=0;e<g;e++){var x=n[e],p=r[x];p!=null&&(t[x]=p)}return t}}}function ka(r,t){Te(t,!1);const g=Ae(),e=()=>se(W,"$marker",g),o=()=>se(S,"$map",g);let n=i(t,"marker",12,void 0),x=i(t,"lngLat",12),p=i(t,"class",8,void 0),h=i(t,"draggable",8,!1),C=i(t,"feature",8,null),j=i(t,"offset",8,void 0),T=i(t,"rotation",8,0),B=i(t,"opacity",8,1);const V=ct(),{map:S,layerEvent:G,self:W}=_a(),pe=()=>K("dragstart"),ue=()=>{ee(),K("drag")},$=()=>{ee(),K("dragend")};Se(W,new ce.Marker(jt({draggable:h(),rotation:T(),className:p(),offset:j(),opacity:B().toString()})).setLngLat(x()).addTo(o())),n(e()),h()&&(e().on("dragstart",pe),e().on("drag",ue),e().on("dragend",$)),Ze(()=>{var k;n(void 0),(k=e())==null||k.remove()});function ee(){var te;let k=(te=e())==null?void 0:te.getLngLat();k&&(Array.isArray(x())?x([k.lng,k.lat]):x()&&"lon"in x()?x({lon:k.lng,lat:k.lat}):x(k))}function K(k){var _e,ye;let te=(_e=e())==null?void 0:_e.getLngLat();if(!te)return;const he=[te.lng,te.lat];let ae={map:o(),marker:e(),lngLat:he,features:[{type:"Feature",properties:((ye=C())==null?void 0:ye.properties)??{},geometry:{type:"Point",coordinates:he}}]};Se(G,{...ae,layerType:"marker",type:k}),V(k,ae)}E(()=>(e(),y(x())),()=>{var k;(k=e())==null||k.setLngLat(x())}),E(()=>(e(),y(j())),()=>{var k;(k=e())==null||k.setOffset(j()??[0,0])}),E(()=>(e(),y(T())),()=>{var k;(k=e())==null||k.setRotation(T())}),E(()=>(e(),y(B())),()=>{var k;(k=e())==null||k.setOpacity(B().toString())}),je(),qe();var fe=Qe(),I=ge(fe);dt(I,t,"default",{get marker(){return e()}},null),M(r,fe),Ee()}function Ca(r,t){Te(t,!1);const g=Ae(),e=()=>se(o,"$map",g),{map:o}=Ne();let n=i(t,"position",8,"top-left"),x=i(t,"container",8,void 0),p=H(null);Ze(()=>{var h;(h=e())!=null&&h.loaded()&&a(p)&&e().removeControl(a(p))}),E(()=>(e(),a(p),y(x()),y(n())),()=>{if(e()&&!a(p)){let h;typeof x()=="string"?h=document.querySelector(x())??void 0:h=x(),P(p,new ce.FullscreenControl({container:h})),e().addControl(a(p),n())}}),je(),qe(),Ee()}function wa(r,t){Te(t,!1);const g=Ae(),e=()=>se(o,"$map",g),{map:o}=Ne();let n=i(t,"position",8,"top-left"),x=i(t,"positionOptions",8,void 0),p=i(t,"fitBoundsOptions",8,void 0),h=i(t,"trackUserLocation",8,!1),C=i(t,"showAccuracyCircle",8,!0),j=i(t,"showUserLocation",8,!0),T=i(t,"control",12,null);Ze(()=>{var B;(B=e())!=null&&B.loaded()&&T()&&e().removeControl(T())}),E(()=>(e(),y(T()),y(x()),y(p()),y(h()),y(C()),y(j()),y(n())),()=>{e()&&!T()&&(T(new ce.GeolocateControl({positionOptions:x(),fitBoundsOptions:p(),trackUserLocation:h(),showAccuracyCircle:C(),showUserLocation:j()})),e().addControl(T(),n()))}),je(),qe(),Ee()}function La(r){let t=r.getCenter(),g=Math.round(r.getZoom()*100)/100,e=Math.ceil((g*Math.LN2+Math.log(512/360/.5))/Math.LN10),o=Math.pow(10,e),n=Math.round(t.lat*o)/o,x=Math.round(t.lng*o)/o,p=`${g}/${n}/${x}`,h=r.getBearing(),C=r.getPitch();return(h||C)&&(p+=`/${Math.round(h*10)/10}`),C&&(p+=`/${Math.round(C)}`),`#${p}`}function Oa(r){return r.replace("#","").split("/").map(parseFloat)}var He=ft;function ft(r,t){return r===t||r!==r&&t!==t?!0:typeof r!=typeof t||{}.toString.call(r)!={}.toString.call(t)||r!==Object(r)||!r?!1:Array.isArray(r)?St(r,t):{}.toString.call(r)=="[object Set]"?St(Array.from(r),Array.from(t)):{}.toString.call(r)=="[object Object]"?Pa(r,t):Ma(r,t)}function Ma(r,t){return r.toString()===t.toString()}function St(r,t){var g=r.length;if(g!=t.length)return!1;for(var e=0;e<g;e++)if(!ft(r[e],t[e]))return!1;return!0}function Pa(r,t){var g=Object.keys(r),e=g.length;if(e!=Object.keys(t).length)return!1;for(var o=0;o<e;o++){var n=g[o];if(!(t.hasOwnProperty(n)&&ft(r[n],t[n])))return!1}return!0}function Sa(r,t){Te(t,!1);const g=Ae(),e=()=>se(o,"$map",g),{map:o}=Ne();let n=i(t,"position",8,"top-left"),x=i(t,"showCompass",8,!0),p=i(t,"showZoom",8,!0),h=i(t,"visualizePitch",8,!1),C=H(null);Ze(()=>{var j;(j=e())!=null&&j.loaded()&&a(C)&&e().removeControl(a(C))}),E(()=>(e(),a(C),y(x()),y(p()),y(h()),y(n())),()=>{e()&&!a(C)&&(P(C,new ce.NavigationControl({showCompass:x(),showZoom:p(),visualizePitch:h()})),e().addControl(a(C),n()))}),je(),qe(),Ee()}function Ta(r,t){Te(t,!1);const g=Ae(),e=()=>se(o,"$map",g),{map:o}=Ne();let n=i(t,"position",8,"bottom-left"),x=i(t,"maxWidth",8,void 0),p=i(t,"unit",8,"metric"),h=H(null);Ze(()=>{var C;(C=e())!=null&&C.loaded()&&a(h)&&e().removeControl(a(h))}),E(()=>(e(),a(h),y(x()),y(p()),y(n())),()=>{e()&&!a(h)&&(P(h,new ce.ScaleControl({maxWidth:x(),unit:p()})),e().addControl(a(h),n()))}),je(),qe(),Ee()}var Ea=R("<!> <!> <!> <!>",1),Ia=R("<!> <!>",1),Aa=R('<div data-testid="map-container"><!></div>');function ja(r,t){Te(t,!1);const g=Ae(),e=()=>se(J,"$mapInstance",g),o=()=>se(le,"$loadedImages",g),n=H(),x=H();let p=i(t,"map",12,null),h=i(t,"mapContainer",12,void 0),C=i(t,"class",8,void 0),j=i(t,"style",8),T=i(t,"diffStyleUpdates",8,!1),B=i(t,"center",12,void 0),V=i(t,"zoom",12,void 0),S=i(t,"pitch",12,0),G=i(t,"bearing",12,0),W=i(t,"bounds",12,void 0),pe=i(t,"hash",8,!1),ue=i(t,"updateHash",8,f=>{window.history.replaceState(window.history.state,"",f)}),$=i(t,"loaded",12,!1),ee=i(t,"minZoom",8,0),K=i(t,"maxZoom",8,22),fe=i(t,"minPitch",8,0),I=i(t,"maxPitch",8,60),k=i(t,"renderWorldCopies",8,void 0),te=i(t,"dragPan",8,void 0),he=i(t,"dragRotate",8,void 0),ae=i(t,"pitchWithRotate",8,void 0),_e=i(t,"antialias",8,void 0),ye=i(t,"zoomOnDoubleClick",8,!0),we=i(t,"locale",8,void 0),We=i(t,"interactive",8,!0),b=i(t,"attributionControl",8,!0),Le=i(t,"cooperativeGestures",8,!1),X=i(t,"preserveDrawingBuffer",8,!1),Ie=i(t,"maxBounds",8,void 0),ne=i(t,"images",24,()=>[]),N=i(t,"standardControls",8,!1),F=i(t,"filterLayers",8,void 0),De=i(t,"transformRequest",8,void 0);const q=ct(),{map:J,loadedImages:le}=pa();let ve=H(new Set);async function Oe(f,l=!1){var L;if(e()&&!(!e().loaded()&&!l))if("url"in f){a(ve).add(f.id);try{let z=await e().loadImage(f.url);(L=e())==null||L.addImage(f.id,z.data,f.options),o().add(f.id),Se(le,o())}catch(z){q("error",z)}finally{a(ve).delete(f.id)}}else e().addImage(f.id,f.data,f.options),o().add(f.id),Se(le,o())}let me=H(void 0),re=H(void 0),xe=H(void 0),Y=H(void 0);function Re(f){return u(),Se(J,new ce.Map(jt({container:f,style:j(),locale:we(),center:B(),zoom:V(),pitch:S(),bearing:G(),minZoom:ee(),maxZoom:K(),minPitch:fe(),maxPitch:I(),renderWorldCopies:k(),dragPan:te(),dragRotate:he(),pitchWithRotate:ae(),antialias:_e(),interactive:We(),preserveDrawingBuffer:X(),maxBounds:Ie(),bounds:W(),attributionControl:b(),transformRequest:De(),cooperativeGestures:Le()}))),e().on("load",l=>{l.target.getContainer().setAttribute("data-testid","map"),l.target.getCanvas().setAttribute("data-testid","map-canvas"),$(!0),q("load",e())}),e().on("error",l=>q("error",{...l,map:e()})),e().on("movestart",l=>q("movestart",{...l,map:e()})),e().on("moveend",l=>{if(B(l.target.getCenter()),V(l.target.getZoom()),S(l.target.getPitch()),G(l.target.getBearing()),W(l.target.getBounds()),q("moveend",{...l,map:e()}),pe()){let L=new URL(window.location.href.replace(/(#.+)?$/,La(e())));ue()(L)}}),e().on("click",l=>q("click",{...l,map:e()})),e().on("dblclick",l=>q("dblclick",{...l,map:e()})),e().on("contextmenu",l=>q("contextmenu",{...l,map:e()})),e().on("zoomstart",l=>q("zoomstart",{...l,map:e()})),e().on("zoom",l=>{q("zoom",{...l,map:e()})}),e().on("zoomend",l=>{q("zoomend",{...l,map:e()})}),e().on("style.load",()=>{if(e()){const l=e().getStyle();if(P(me,l.layers.map(L=>L.id)),P(re,Object.keys(l.sources)),a(Y))for(const[L,z]of Object.entries(a(Y)))e().addSource(L,z);if(a(xe))for(const L of a(xe))e().addLayer(L);for(const L of ne())Oe(L,!0)}}),e().on("styledata",l=>{if(e()&&F()){const L=e().getStyle().layers;if(L)for(let z of L)F()(z)||e().setLayoutProperty(z.id,"visibility","none")}q("styledata",{...l,map:e()})}),{destroy(){var l;$(!1),(l=e())==null||l.remove(),Se(J,null)}}}let Me=H(j());function u(){if(pe()){let f=Oa(window.location.hash);f.length>=3&&(V(f[0]),B([f[2],f[1]])),f.length==5&&(G(f[3]),S(f[4]))}}E(()=>y(N()),()=>{P(n,typeof N()=="boolean"?void 0:N())}),E(()=>e(),()=>{p(e())}),E(()=>(e(),y(j()),a(Me),a(me),a(re),y(T())),()=>{if(e()&&!He(j(),a(Me))){const f=e().getStyle();if(a(me)&&P(xe,f.layers.filter(l=>!a(me).includes(l.id))),a(re)){const l=Object.keys(f.sources).filter(L=>!a(re).includes(L));P(Y,{});for(const L of l)Et(Y,a(Y)[L]=f.sources[L])}P(Me,j()),e().setStyle(j(),{diff:T()}),Se(le,new Set),P(ve,new Set)}}),E(()=>(y($()),e(),y(ne()),o(),a(ve)),()=>{var f;if($()&&((f=e())!=null&&f.loaded()))for(let l of ne())!o().has(l.id)&&!a(ve).has(l.id)&&!e().hasImage(l.id)&&Oe(l)}),E(()=>(y(ne()),o()),()=>{P(x,ne().every(f=>o().has(f.id)))}),E(()=>(e(),y(B()),y(V()),y(G()),y(S())),()=>{var f,l,L,z;if(e()){let oe={};B()!=null&&!He(B(),(f=e())==null?void 0:f.getCenter())&&(oe.center=B()),V()!=null&&!He(V(),(l=e())==null?void 0:l.getZoom())&&(oe.zoom=V()),G()!=null&&!He(G(),(L=e())==null?void 0:L.getBearing())&&(oe.bearing=G()),S()!=null&&!He(S(),(z=e())==null?void 0:z.getPitch())&&(oe.pitch=S()),Object.keys(oe).length&&e().easeTo(oe)}}),E(()=>(y(W()),e()),()=>{var f,l;W()&&!He(W(),(f=e())==null?void 0:f.getBounds())&&((l=e())==null||l.fitBounds(W()))}),E(()=>(y(ye()),e()),()=>{var f,l;ye()?(f=e())==null||f.doubleClickZoom.enable():(l=e())==null||l.doubleClickZoom.disable()}),je(),qe();var A=Aa();Gt("hashchange",na,u);var be=v(A);Q(be,()=>e()&&$(),f=>{var l=Ia(),L=ge(l);Q(L,N,oe=>{var Je=Ea(),$e=ge(Je);Sa($e,{get position(){return a(n)}});var Be=m($e,2);wa(Be,{get position(){return a(n)},fitBoundsOptions:{maxZoom:12}});var et=m(Be,2);Ca(et,{get position(){return a(n)}});var Fe=m(et,2);Ta(Fe,{get position(){return a(n)}}),M(oe,Je)});var z=m(L,2);dt(z,t,"default",{get map(){return e()},get loadedImages(){return o()},get allImagesLoaded(){return a(x)}},null),M(f,l)}),c(A),It(A,f=>h(f),()=>h()),sa(A,f=>Re(f)),Z(()=>{ca(A,`${C()??""} svelte-p00lfq`),ua(A,"expand-map",!C())}),M(r,A),Ee()}var qa=R("<div><!></div>");function Da(r,t){const g=la(t);Te(t,!1);const e=Ae(),o=()=>se(he,"$popupTarget",e),n=()=>se(te,"$map",e),x=()=>se(_e,"$layer",e),p=()=>se(ae,"$layerEvent",e),h=H(),C=H();let j=i(t,"closeButton",8,void 0),T=i(t,"closeOnClickOutside",8,!0),B=i(t,"closeOnClickInside",8,!1),V=i(t,"closeOnMove",8,!1),S=i(t,"openOn",8,"click"),G=i(t,"openIfTopMost",8,!0),W=i(t,"focusAfterOpen",8,!0),pe=i(t,"anchor",8,void 0),ue=i(t,"offset",8,void 0),$=i(t,"popupClass",8,void 0),ee=i(t,"maxWidth",8,void 0),K=i(t,"lngLat",12,void 0),fe=i(t,"html",8,void 0),I=i(t,"open",12,!1);const k=ct(),{map:te,popupTarget:he,layerEvent:ae,layer:_e,eventTopMost:ye,markerClickManager:we}=Ne(),We=["click","dblclick","contextmenu"];let b=H(),Le=H(!1),X=H();function Ie(){if(!a(b))return;let u=a(b).getElement();!u||u===a(X)||(P(X,u),S()==="hover"&&Et(X,a(X).style.pointerEvents="none"),a(X).addEventListener("mouseenter",()=>{P(Le,!0)},{passive:!0}),a(X).addEventListener("mouseleave",()=>{P(Le,!1)},{passive:!0}),a(X).addEventListener("click",()=>{B()&&I(!1)},{passive:!0}))}At(()=>{if(n())return n().on("click",re),n().on("contextmenu",re),we.add(xe),typeof o()=="string"&&(n().on("click",o(),q),n().on("dblclick",o(),q),n().on("contextmenu",o(),q),n().on("mousemove",o(),me),n().on("mouseleave",o(),Oe),n().on("touchstart",o(),le),n().on("touchend",o(),ve)),()=>{var u,A;(u=n())!=null&&u.loaded()&&((A=a(b))==null||A.remove(),n().off("click",re),n().off("contextmenu",re),we.remove(xe),o()instanceof ce.Marker?o().getPopup()===a(b)&&o().setPopup(void 0):typeof o()=="string"&&(n().off("click",o(),q),n().off("dblclick",o(),q),n().off("contextmenu",o(),q),n().off("mousemove",o(),me),n().off("mouseleave",o(),Oe),n().off("touchstart",o(),le),n().off("touchend",o(),ve)))}});function ne(u){return G()?!("marker"in u)&&!ya(u)&&ye(u)!==x():!1}let N=H(null),F=H("normal");function De(u){"layerType"in u&&u.layerType==="deckgl"?(K(u.coordinate),P(N,u.object?[u.object]:null)):(K(u.lngLat),P(N,u.features??[]))}function q(u){u.type!==S()||ne(u)||(De(u),setTimeout(()=>I(!0)))}let J=null;function le(u){J=u.point}function ve(u){if(!J||S()!=="hover")return;let A=J.dist(u.point);J=null,A<3&&(K(u.lngLat),P(N,u.features??[]),a(b).isOpen()?P(F,"justOpened"):(P(F,"opening"),I(!0)))}function Oe(u){S()!=="hover"||J||a(F)!=="normal"||(I(!1),P(N,null))}function me(u){if(!(S()!=="hover"||J||a(F)!=="normal")){if(ne(u)){I(!1),P(N,null);return}I(!0),P(N,u.features??[]),K(u.lngLat)}}function re(u){var be;if(a(F)==="justOpened"){P(F,"normal");return}if(!T())return;let A=[a(X),o()instanceof ce.Marker?(be=o())==null?void 0:be.getElement():null];I()&&a(b).isOpen()&&!A.some(f=>f==null?void 0:f.contains(u.originalEvent.target))&&(u.type==="contextmenu"&&S()==="contextmenu"||u.type!=="contextmenu")&&I(!1)}function xe(u){T()&&I()&&a(b).isOpen()&&u.marker!==o()&&I(!1)}Ze(()=>{var u;n()&&((u=a(b))!=null&&u.isOpen())&&a(b).remove()});let Y=H();E(()=>(y(j()),y(T()),y(B())),()=>{P(h,j()??(!T()&&!B()))}),E(()=>(a(b),a(h),y(V()),y(W()),y(ee()),y($()),y(pe()),y(ue())),()=>{a(b)||(P(b,new ce.Popup({closeButton:a(h),closeOnClick:!1,closeOnMove:V(),focusAfterOpen:W(),maxWidth:ee(),className:$(),anchor:pe(),offset:ue()})),P(X,a(b).getElement()),a(b).on("open",()=>{I(!0),Ie(),k("open",a(b))}),a(b).on("close",()=>{I(!1),k("close",a(b))}),a(b).on("hover",()=>{k("hover",a(b))}))}),E(()=>(a(b),o(),y(S())),()=>{a(b)&&o()instanceof ce.Marker&&(S()==="click"?o().setPopup(a(b)):o().getPopup()===a(b)&&o().setPopup(void 0))}),E(()=>(y(S()),p()),()=>{var u;We.includes(S())&&((u=p())==null?void 0:u.type)===S()&&(q(p()),Se(ae,null))}),E(()=>(y(S()),p()),()=>{var u,A;P(C,S()==="hover"&&(((u=p())==null?void 0:u.type)==="mousemove"||((A=p())==null?void 0:A.type)==="mouseenter"))}),E(()=>(y(S()),a(C),p(),a(Le)),()=>{S()==="hover"&&ae&&(a(C)&&p()&&De(p()),I((a(C)||a(Le))??!1))}),E(()=>(a(Y),a(b),y(fe())),()=>{a(Y)?a(b).setDOMContent(a(Y)):fe()&&a(b).setHTML(fe())}),E(()=>(y(K()),a(b)),()=>{K()&&a(b).setLngLat(K())}),E(()=>(n(),a(b),y(I()),a(F)),()=>{if(n()){let u=a(b).isOpen();I()&&!u?(a(b).addTo(n()),a(F)==="opening"&&P(F,"justOpened")):!I()&&u&&a(b).remove()}}),je(),qe();var Re=Qe(),Me=ge(Re);Q(Me,()=>g.default,u=>{var A=qa(),be=v(A);Q(be,()=>{var f;return((f=a(N))==null?void 0:f.length)||o()instanceof ce.Marker},f=>{var l=Qe(),L=ge(l);dt(L,t,"default",{get features(){return a(N)},get data(){var z;return((z=a(N))==null?void 0:z[0])??null},get map(){return n()},close:()=>I(!1)},null),M(f,l)}),c(A),It(A,f=>P(Y,f),()=>a(Y)),M(u,A)}),M(r,Re),Ee()}var Xe=Uint8Array,qt=Uint16Array,Ra=Int32Array,Ba=new Xe([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),za=new Xe([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Dt=function(r,t){for(var g=new qt(31),e=0;e<31;++e)g[e]=t+=1<<r[e-1];for(var o=new Ra(g[30]),e=1;e<30;++e)for(var n=g[e];n<g[e+1];++n)o[n]=n-g[e]<<5|e;return{b:g,r:o}},Rt=Dt(Ba,2),Ha=Rt.b,Za=Rt.r;Ha[28]=258,Za[258]=28;Dt(za,0);var Na=new qt(32768);for(O=0;O<32768;++O)ke=(O&43690)>>1|(O&21845)<<1,ke=(ke&52428)>>2|(ke&13107)<<2,ke=(ke&61680)>>4|(ke&3855)<<4,Na[O]=((ke&65280)>>8|(ke&255)<<8)>>1;var ke,O,at=new Xe(288);for(O=0;O<144;++O)at[O]=8;var O;for(O=144;O<256;++O)at[O]=9;var O;for(O=256;O<280;++O)at[O]=7;var O;for(O=280;O<288;++O)at[O]=8;var O,Wa=new Xe(32);for(O=0;O<32;++O)Wa[O]=5;var O,Fa=new Xe(0),Ua=typeof TextDecoder<"u"&&new TextDecoder,Va=0;try{Ua.decode(Fa,{stream:!0}),Va=1}catch{}var Ga=R(", <a> </a>",1),Ka=R('<section id="translations" class="svelte-xd5ukq"></section>'),Ya=R("<dd><a> </a></dd>"),Qa=R("<dd> </dd>"),Xa=R("<dd> </dd>"),Ja=R("<dd> </dd>"),$a=R(" <!>",1),en=R("<dd> </dd>"),tn=R("<dd> </dd>"),an=R("<dd> </dd>"),nn=R("<dd> </dd>"),rn=R("<dd> <a> </a></dd>"),on=R("<dd> </dd>"),sn=R('<div class="popup"> </div>'),ln=R("<dt>Map</dt> <dd><!></dd>",1),dn=R("<p> </p>"),cn=R("<dl><dt>Place</dt> <dd> </dd> <dt>Repository</dt> <dd><a> </a><!></dd> <dt>Autopsy</dt> <dd> </dd> <dt>Map</dt> <dd>TODO: use the geo information in the museums dataset</dd></dl>"),un=R('<section id="bibliography" class="svelte-xd5ukq"></section>'),fn=R('<article><hgroup><h1 class="inscription-title svelte-xd5ukq"> </h1> <p> <a> </a><!></p> <p> <a target="inscription">View in current site</a></p></hgroup> <div class="sections svelte-xd5ukq"><figure id="facsimile-images" class="svelte-xd5ukq"><section id="image-viewer" style="height: 50vh; width: 100%;" class="svelte-xd5ukq"></section> <figcaption class="svelte-xd5ukq"> </figcaption></figure> <section id="edition" class="svelte-xd5ukq"><!></section> <section id="apparatus" class="svelte-xd5ukq"><!></section> <!> <section id="physical-description" class="svelte-xd5ukq"><h2>Physical description</h2> <section class="svelte-xd5ukq"><h3>Support</h3> <dl><dt>Description</dt> <dd> </dd> <dt>Object type</dt> <!> <dt>Material</dt> <dd><a> </a></dd> <dt>Condition</dt> <!> <dt>Dimensions</dt> <dd></dd></dl></section> <section class="svelte-xd5ukq"><h3>Inscription</h3> <dl><dt>Layout</dt> <dd> </dd> <dt>Text condition</dt> <!> <dt>Lettering</dt> <dd> </dd> <dt>Letter heights</dt> <!> <dt>Interlinear heights</dt> <!></dl></section></section> <section id="provenance" class="svelte-xd5ukq"><h2>Provenance</h2> <dl><dt>Place of origin</dt> <!> <dt>Provenance found</dt> <dd> </dd> <!></dl></section> <section id="current-location" class="svelte-xd5ukq"><h2>Current location</h2> <!></section> <section id="date" class="svelte-xd5ukq"><h2>Date</h2> <!> <dl><dt>Evidence</dt> <dd> </dd></dl></section> <section id="text-type" class="svelte-xd5ukq"><h2>Text type</h2> <p><a> </a></p></section> <section id="commentary" class="svelte-xd5ukq"><!></section> <!> <section id="citation-and-status" class="svelte-xd5ukq"><h2>Citation and editorial status</h2> <dl><dt>Citation</dt> <dd> </dd></dl></section></div></article>');function wn(r,t){Te(t,!0);let{slug:g,metadata:e,images:o,html:n}=t.data,x=ra(ia(o[0].desc));const p=n.divs.find(d=>d.id==="edition"),h=n.divs.find(d=>d.id==="apparatus"),C=n.divs.filter(d=>d.id==="translation"),j=n.divs.find(d=>d.id==="commentary"),T=n.divs.filter(d=>d.id==="bibliography");let B=o.map(d=>`${va}${g}/${d.url}/info.json`),V;At(async()=>{V=(await Ut(async()=>{const{default:s}=await import("../chunks/openseadragon.D2bpRMoO.js").then(_=>_.o);return{default:s}},__vite__mapDeps([0,1,2,3,4]),import.meta.url)).default,V({id:"image-viewer",prefixUrl:`${da}/openseadragon/images/`,tileSources:B,sequenceMode:!0,showReferenceStrip:!0,preserveViewport:!0}).addHandler("page",function(s){const _=o[s.page];P(x,`${_.surfaceType}, ${_.desc}`)})});var S=fn(),G=v(S),W=v(G),pe=v(W);c(W);var ue=m(W,2),$=v(ue),ee=m($),K=v(ee,!0);c(ee);var fe=m(ee);Q(fe,()=>e.objectType,d=>{var s=Ga(),_=m(ge(s)),D=v(_,!0);c(_),Z(()=>{Pe(_,"href",e.objectType.ref),w(D,e.objectType._)}),M(d,s)}),c(ue);var I=m(ue,2),k=v(I),te=m(k);c(I),c(G);var he=m(G,2),ae=v(he),_e=m(v(ae),2),ye=v(_e,!0);c(_e),c(ae);var we=m(ae,2),We=v(we);Ye(We,()=>p.html),c(we);var b=m(we,2),Le=v(b);Ye(Le,()=>h.html),c(b);var X=m(b,2);Q(X,()=>C.length,d=>{var s=Ka();Ge(s,21,()=>C,Ke,(_,D)=>{var U=Qe(),ie=ge(U);Ye(ie,()=>a(D).html),M(_,U)}),c(s),M(d,s)});var Ie=m(X,2),ne=m(v(Ie),2),N=m(v(ne),2),F=m(v(N),2),De=v(F,!0);c(F);var q=m(F,4);Q(q,()=>e.objectType,d=>{var s=Ya(),_=v(s),D=v(_,!0);c(_),c(s),Z(()=>{Pe(_,"href",e.objectType.ref),w(D,e.objectType._)}),M(d,s)},d=>{var s=Qa(),_=v(s,!0);c(s),Z(()=>w(_,de)),M(d,s)});var J=m(q,4),le=v(J),ve=v(le,!0);c(le),c(J);var Oe=m(J,4);Q(Oe,()=>{var d;return(d=e.condition)==null?void 0:d.ana},d=>{var s=Xa(),_=v(s,!0);Z(()=>w(_,e.condition.ana.split(".").slice(1).join(", "))),c(s),M(d,s)},d=>{var s=Ja(),_=v(s,!0);c(s),Z(()=>w(_,e.condition._||de)),M(d,s)});var me=m(Oe,4);Ge(me,21,()=>e.dimensions,Ke,(d,s,_)=>{Mt();var D=$a(),U=ge(D),ie=m(U);Q(ie,()=>_<e.dimensions.length-1,tt=>{var Ue=Ct(",Â ");M(tt,Ue)}),Z(()=>w(U,`${a(s).dimension??""}: ${a(s)._??""}
							${a(s).unit??""}`)),M(d,D)}),c(me),c(N),c(ne);var re=m(ne,2),xe=m(v(re),2),Y=m(v(xe),2),Re=v(Y,!0);c(Y);var Me=m(Y,4);Q(Me,()=>e.layoutDesc.layout.damage.ana,d=>{var s=en(),_=v(s,!0);Z(()=>w(_,e.layoutDesc.layout.damage.ana.split(".").slice(1).join(", "))),c(s),M(d,s)},d=>{var s=tn(),_=v(s,!0);c(s),Z(()=>w(_,e.layoutDesc.layout.damage._||de)),M(d,s)});var u=m(Me,4),A=v(u,!0);c(u);var be=m(u,4);Ge(be,17,()=>e.handNote.dimensions.filter(d=>(d==null?void 0:d.type)==="letterHeight"),Ke,(d,s)=>{var _=an(),D=v(_);c(_),Z(()=>w(D,`${a(s).l??""}: ${a(s).h??""}${a(s).unit??""}`)),M(d,_)});var f=m(be,4);Ge(f,17,()=>e.handNote.dimensions.filter(d=>(d==null?void 0:d.type)==="interlinear"),Ke,(d,s)=>{var _=nn(),D=v(_);c(_),Z(()=>w(D,`${a(s).l??""}: ${a(s).h??""}${(a(s).h!=="not measured"?a(s).unit:"")??""}`)),M(d,_)}),c(xe),c(re),c(Ie);var l=m(Ie,2),L=m(v(l),2),z=m(v(L),2);Q(z,()=>e.places.length,d=>{var s=rn(),_=v(s),D=m(_),U=v(D,!0);c(D),c(s),Z(()=>{w(_,`${(e.places[0].offset||"")??""} `),Pe(D,"href",e.places[0].ref),w(U,e.places[0]._)}),M(d,s)},d=>{var s=on(),_=v(s,!0);c(s),Z(()=>w(_,de)),M(d,s)});var oe=m(z,4),Je=v(oe,!0);c(oe);var $e=m(oe,2);Q($e,()=>{var d;return(d=e.provenanceFound)==null?void 0:d.geo},d=>{var s=ln();const _=oa(()=>[e.provenanceFound.geo[1],e.provenanceFound.geo[0]]);var D=m(ge(s),2),U=v(D);ja(U,{get center(){return a(_)},zoom:7,class:"map",standardControls:!0,style:"https://api.maptiler.com/maps/positron/style.json?key=brTBbnRxuiKp6PgjwFPr",children:(ie,tt)=>{ka(ie,{get lngLat(){return a(_)},children:(Ue,it)=>{Da(Ue,{offset:[0,-10],children:(st,Ve)=>{var ze=sn(),Nt=v(ze,!0);c(ze),Z(()=>w(Nt,e.provenanceFound._)),M(st,ze)},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}}),c(D),M(d,s)}),c(L),c(l);var Be=m(l,2),et=m(v(Be),2);Q(et,()=>e.provenanceLost,d=>{var s=dn(),_=v(s,!0);c(s),Z(()=>w(_,e.provenanceLost._)),M(d,s)},d=>{var s=cn(),_=m(v(s),2),D=v(_);c(_);var U=m(_,4),ie=v(U),tt=v(ie,!0);c(ie);var Ue=m(ie);Q(Ue,()=>e.idno,Ve=>{var ze=Ct();Z(()=>w(ze,`,
							${e.idno._??""}`)),M(Ve,ze)}),c(U);var it=m(U,4),st=v(it,!0);c(it),Mt(4),c(s),Z(()=>{var Ve;w(D,`${e.settlement??""}, ${e.country??""}`),Pe(ie,"href",e.repository.ref),w(tt,e.repository._),w(st,((Ve=e.provenanceObserved)==null?void 0:Ve._)||de)}),M(d,s)}),c(Be);var Fe=m(Be,2),vt=m(v(Fe),2);fa(vt,{inscription:e});var mt=m(vt,2),gt=m(v(mt),2),Bt=v(gt,!0);c(gt),c(mt),c(Fe);var nt=m(Fe,2),pt=m(v(nt),2),rt=v(pt),zt=v(rt,!0);c(rt),c(pt),c(nt);var ot=m(nt,2),Ht=v(ot);Ye(Ht,()=>j.html),c(ot);var ht=m(ot,2);Q(ht,()=>T.length,d=>{var s=un();Ge(s,21,()=>T,Ke,(_,D)=>{var U=Qe(),ie=ge(U);Ye(ie,()=>a(D).html),M(_,U)}),c(s),M(d,s)});var _t=m(ht,2),yt=m(v(_t),2),xt=m(v(yt),2),Zt=v(xt,!0);c(xt),c(yt),c(_t),c(he),c(S),Z(()=>{var d;w(pe,`${e.file??""}: ${e.title??""}`),w($,`${e.textLang._??""}, `),Pe(ee,"href",e.type.ref),w(K,e.type._),w(k,`${e.status??""}, `),Pe(te,"href",`${ma}inscription/${g??""}`),w(ye,a(x)),w(De,e.support||de),Pe(le,"href",e.material.ref),w(ve,e.material._),w(Re,e.layoutDesc.layout.p||de),w(A,e.handNote.lettering||de),w(Je,((d=e.provenanceFound)==null?void 0:d._)||de),w(Bt,e.evidence||de),Pe(rt,"href",e.type.ref),w(zt,e.type._),w(Zt,e.citation||de)}),M(r,S),Ee()}export{wn as component};
